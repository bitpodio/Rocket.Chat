function module(e,t,a){let l,n,r,i,u,o,s,c,d,m,p,g,E,k,f,S,v,b,h,y,x,C,T,F,_;a.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){l=e}},0),a.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},1),a.link("@rocket.chat/fuselage",{Field(e){r=e},FieldGroup(e){i=e},Flex(e){u=e},InputBox(e){o=e},Margins(e){s=e},Select(e){c=e},Skeleton(e){d=e},TextInput(e){m=e}},0),a.link("@rocket.chat/fuselage-hooks",{useAutoFocus(e){p=e}},1),a.link("react",{default(e){g=e},useEffect(e){E=e},useReducer(e){k=e},useState(e){f=e},useCallback(e){S=e},useMemo(e){v=e}},2),a.link("../../../contexts/SettingsContext",{useSettingsDispatch(e){b=e}},3),a.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){h=e}},4),a.link("../../../contexts/TranslationContext",{useTranslation(e){y=e},useLanguages(e){x=e}},5),a.link("../Pager",{Pager(e){C=e}},6),a.link("../SetupWizardState",{useSetupWizardContext(e){T=e}},7),a.link("../Step",{Step(e){F=e}},8),a.link("../StepHeader",{StepHeader(e){_=e}},9);const w=()=>{const e="RESET",t="SET_VALUE",[a,l]=k((a,l)=>{let{type:r,payload:i}=l;if(r===e)return i;if(r===t){const{_id:e,value:t}=i;return a.map(a=>a._id===e?n(n({},a),{},{value:t}):a)}return a},[]),r=S(t=>l({type:e,payload:t}),[]),i=S((e,a)=>l({type:t,payload:{_id:e,value:a}}),[]);return{fields:a,resetFields:r,setFieldValue:i}};function q(e){let{step:t,title:a,active:k}=e;const{settings:S,currentStep:q,goToPreviousStep:z,goToNextStep:L}=T(),{fields:D,resetFields:W,setFieldValue:M}=w(),[P,A]=f(!1),I=x();E(()=>{W(S.filter(e=>{let{wizard:a}=e;return a.step===t}).filter(e=>{let{type:t}=e;return["string","select","language","boolean"].includes(t)}).sort((e,t)=>{let{wizard:{order:a}}=e,{wizard:{order:l}}=t;return a-l}).map(e=>{let{value:t}=e,a=l(e,["value"]);return n(n({},a),{},{value:null!=t?t:""})}))},[S,q,t,W]);const R=y(),V=b(),j=p(k),B=h(),H=()=>{z()},N=async e=>{e.preventDefault(),A(!0);try{await V(D.map(e=>{let{_id:t,value:a}=e;return{_id:t,value:a}})),L()}catch(t){B({type:"error",message:t})}finally{A(!1)}},O=v(()=>!!D.find(e=>e.requiredOnWizard&&""===String(e.value).trim()),[D]);return 0===D.length?g.createElement(F,{active:k,working:P,onSubmit:N},g.createElement(_,{number:t,title:a}),g.createElement(s,{blockEnd:"x32"},g.createElement(i,null,Array.from({length:5},(e,t)=>g.createElement(r,{key:t},g.createElement(u.Item,{align:"stretch"},g.createElement(r.Label,null,g.createElement(d,{width:"50%"}))),g.createElement(o.Skeleton,null)))))):g.createElement(F,{active:k,working:P,onSubmit:N},g.createElement(_,{number:t,title:a}),g.createElement(s,{blockEnd:"x32"},g.createElement(i,null,D.map((e,t)=>{let{_id:a,type:l,i18nLabel:n,value:i,values:u,requiredOnWizard:o}=e;return(g.createElement(r,{key:t},g.createElement(r.Label,{htmlFor:a,required:o},R(n)),g.createElement(r.Row,null,"string"===l&&g.createElement(m,{type:"text","data-qa":a,id:a,name:a,ref:0===t?j:void 0,value:i,onChange:e=>{let{currentTarget:{value:t}}=e;return M(a,t)}}),"select"===l&&g.createElement(c,{"data-qa":a,id:a,name:a,placeholder:R("Select_an_option"),value:i,onChange:e=>M(a,e),options:u.map(e=>{let{i18nLabel:t,key:a}=e;return[a,R(t)]})}),"boolean"===l&&g.createElement(c,{"data-qa":a,id:a,name:a,ref:0===t?j:void 0,value:String(i),onChange:e=>M(a,"true"===e),options:[["true",R("Yes")],["false",R("No")]]}),"language"===l&&g.createElement(c,{"data-qa":a,id:a,name:a,placeholder:R("Default"),value:i,onChange:e=>M(a,e),options:I.map(e=>{let{key:t,name:a}=e;return[t,a]}).sort((e,t)=>{let[a]=e,[l]=t;return a-l})}))))}))),g.createElement(C,{disabled:P,isContinueEnabled:!O,onBackClick:q>2&&H}))}a.exportDefault(q)}


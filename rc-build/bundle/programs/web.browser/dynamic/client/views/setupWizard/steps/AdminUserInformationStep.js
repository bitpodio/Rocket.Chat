function module(e,t,n){let a,r,l,s,o,i,u,c,m,d,E,g,p,h,k,x,_,v,w,y,f,S,T;function C(e){let{step:t,title:n,active:C}=e;const b=w(),F=h("registerUser"),R=h("setUsername"),I=k("forceLogin"),L=y(),U=_(),q=async e=>{let{name:t,username:n,email:a,password:r,onRegistrationEmailSent:l}=e;await F({name:t,username:n,email:a,pass:r}),L.run("userRegistered");try{await b(a,r)}catch(s){if("error-invalid-email"===s.error)return void(l&&l());throw U({type:"error",message:s}),s}I(!1),await R(n),L.run("usernameSet")},z=x("UTF8_Names_Validation"),M=E(()=>new RegExp("^".concat(z,"$")),[z]),P=E(()=>/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]+$/i,[]),[A,D]=g(""),[Z,H]=g(""),[N,W]=g(""),[$,G]=g(""),[O,V]=g(!0),[j,B]=g(!0),J=E(()=>A&&Z&&N&&$,[A,Z,N,$]),[K,Q]=g(!1);p(()=>{V(Z&&M.test(Z))},[Z,M]),p(()=>{B(N&&P.test(N))},[N,P]);const X=v(),Y=c(C),ee=async e=>{if(e.preventDefault(),A&&Z&&N&&$){Q(!0);try{await q({name:A,username:Z,email:N,password:$,onRegistrationEmailSent:()=>{U({type:"success",message:X("We_have_sent_registration_email")})}})}catch(t){console.error(t)}finally{Q(!1)}}},te=m(),ne=m(),ae=m(),re=m();return d.createElement(S,{active:C,working:K,onSubmit:ee},d.createElement(T,{number:t,title:n}),d.createElement(o,{blockEnd:"x32"},d.createElement(l,null,d.createElement(r,null,d.createElement(r.Label,{htmlFor:te,required:!0},X("Name")),d.createElement(r.Row,null,d.createElement(u,{ref:Y,id:te,addon:d.createElement(s,{name:"user",size:"x20"}),placeholder:X("Type_your_name"),value:A,onChange:e=>{let{currentTarget:{value:t}}=e;return D(t)}}))),d.createElement(r,null,d.createElement(r.Label,{htmlFor:ne,required:!0},X("Username")),d.createElement(r.Row,null,d.createElement(u,{id:ne,addon:d.createElement(s,{name:"at",size:"x20"}),placeholder:X("Type_your_username"),value:Z,onChange:e=>{let{currentTarget:{value:t}}=e;return H(t)},error:Z&&!M.test(Z)?"error":""})),!O&&d.createElement(r.Error,null,X("Invalid_username"))),d.createElement(r,null,d.createElement(r.Label,{htmlFor:ae,required:!0},X("Organization_Email")),d.createElement(r.Row,null,d.createElement(a,{id:ae,addon:d.createElement(s,{name:"mail",size:"x20"}),placeholder:X("Type_your_email"),value:N,onChange:e=>{let{currentTarget:{value:t}}=e;return W(t)},error:j?"":"error"})),!j&&d.createElement(r.Error,null,X("Invalid_email"))),d.createElement(r,null,d.createElement(r.Label,{htmlFor:re,required:!0},X("Password")),d.createElement(r.Row,null,d.createElement(i,{id:re,addon:d.createElement(s,{name:"key",size:"x20"}),placeholder:X("Type_your_password"),value:$,onChange:e=>{let{currentTarget:{value:t}}=e;return G(t)}}))))),d.createElement(f,{disabled:K,isContinueEnabled:J}))}n.link("@rocket.chat/fuselage",{EmailInput(e){a=e},Field(e){r=e},FieldGroup(e){l=e},Icon(e){s=e},Margins(e){o=e},PasswordInput(e){i=e},TextInput(e){u=e}},0),n.link("@rocket.chat/fuselage-hooks",{useAutoFocus(e){c=e},useUniqueId(e){m=e}},1),n.link("react",{default(e){d=e},useMemo(e){E=e},useState(e){g=e},useEffect(e){p=e}},2),n.link("../../../contexts/ServerContext",{useMethod(e){h=e}},3),n.link("../../../contexts/SessionContext",{useSessionDispatch(e){k=e}},4),n.link("../../../contexts/SettingsContext",{useSetting(e){x=e}},5),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){_=e}},6),n.link("../../../contexts/TranslationContext",{useTranslation(e){v=e}},7),n.link("../../../contexts/UserContext",{useLoginWithPassword(e){w=e}},8),n.link("../../../hooks/useCallbacks",{useCallbacks(e){y=e}},9),n.link("../Pager",{Pager(e){f=e}},10),n.link("../Step",{Step(e){S=e}},11),n.link("../StepHeader",{StepHeader(e){T=e}},12),n.exportDefault(C)}


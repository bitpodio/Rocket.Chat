function module(e,t,n){let l,o,r,a,i,s,c,m,d,u,k,p,x,C,E,f,h,b,g,v,I,S,w,y,A,T,U,M,B,D,V,_;n.export({createItemData:()=>O,RoomMembers:()=>L}),n.link("react",{default(e){l=e},useCallback(e){o=e},useMemo(e){r=e},useState(e){a=e}},0),n.link("@rocket.chat/fuselage",{Box(e){i=e},Icon(e){s=e},TextInput(e){c=e},Margins(e){m=e},Select(e){d=e},Throbber(e){u=e},ButtonGroup(e){k=e},Button(e){p=e},Callout(e){x=e}},1),n.link("react-virtuoso",{Virtuoso(e){C=e}},2),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){E=e},useDebouncedValue(e){f=e},useLocalStorage(e){h=e},useAutoFocus(e){b=e}},3),n.link("memoize-one",{default(e){g=e}},4),n.link("../../../../../contexts/TranslationContext",{useTranslation(e){v=e}},5),n.link("../../../../../contexts/UserContext",{useUserRoom(e){I=e}},6),n.link("../../../../../components/VerticalBar",{default(e){S=e}},7),n.link("../../../../../contexts/ServerContext",{useMethod(e){w=e}},8),n.link("../../../../../hooks/useAsyncState",{AsyncStatePhase(e){y=e}},9),n.link("../../../../../contexts/AuthorizationContext",{useAtLeastOnePermission(e){A=e}},10),n.link("../../hooks/useDataWithLoadMore",{useDataWithLoadMore(e){T=e}},11),n.link("./components/MemberItem",{MemberItem(e){U=e}},12),n.link("../../UserInfo",{default(e){M=e}},13),n.link("../InviteUsers/InviteUsers",{default(e){B=e}},14),n.link("../AddUsers/AddUsers",{default(e){D=e}},15),n.link("../../../providers/ToolboxProvider",{useTabBarClose(e){V=e}},16),n.link("../../../../../components/ScrollableContentWrapper",{default(e){_=e}},17);const O=g((e,t)=>({onClickView:e,rid:t})),z=l.memo(e=>{let{user:t,data:n,index:o}=e;const{onClickView:r,rid:a}=n;return t?l.createElement(L.Option,{index:o,username:t.username,_id:t._id,rid:a,status:t.status,name:t.name,onClickView:r}):l.createElement(L.Option.Skeleton,null)}),L=e=>{let{loading:t,members:n=[],text:o,type:a,setText:f,setType:h,onClickClose:g,onClickView:I,onClickAdd:w,onClickInvite:y,total:A,error:T,loadMoreItems:U,rid:M}=e;const B=v(),D=b(!0),V=r(()=>[["online",B("Online")],["all",B("All")]],[B]),L=O(I,M),G=E(e=>U(e+1,Math.min(50,e+1-n.length)));return l.createElement(l.Fragment,null,l.createElement(S.Header,null,l.createElement(S.Icon,{name:"team"}),l.createElement(S.Text,null,B("Members")),g&&l.createElement(S.Close,{onClick:g})),l.createElement(S.Content,{p:"x12"},l.createElement(i,{display:"flex",flexDirection:"row",p:"x12",flexShrink:0},l.createElement(i,{display:"flex",flexDirection:"row",flexGrow:1,mi:"neg-x4"},l.createElement(m,{inline:"x4"},l.createElement(c,{placeholder:B("Search_by_username"),value:o,ref:D,onChange:f,addon:l.createElement(s,{name:"magnifier",size:"x20"})}),l.createElement(d,{flexGrow:0,width:"110px",onChange:h,value:a,options:V})))),T&&l.createElement(i,{pi:"x24",pb:"x12"},l.createElement(x,{type:"danger"},T)),t&&l.createElement(i,{pi:"x24",pb:"x12"},l.createElement(u,{size:"x12"})),!t&&n.length<=0&&l.createElement(i,{pi:"x24",pb:"x12"},B("No_results_found")),!t&&n.length>0&&l.createElement(i,{pi:"x24",pb:"x12"},l.createElement(i,{is:"span",color:"info",fontScale:"p1"},B("Showing"),": ",l.createElement(i,{is:"span",color:"default",fontScale:"p2"},n.length)),l.createElement(i,{is:"span",color:"info",fontScale:"p1",mis:"x8"},B("Total"),": ",l.createElement(i,{is:"span",color:"default",fontScale:"p2"},A))),l.createElement(i,{w:"full",h:"full",overflow:"hidden",flexShrink:1},!t&&n&&n.length>0&&l.createElement(C,{style:{height:"100%",width:"100%"},totalCount:A,endReached:G,overscan:50,data:n,components:{Scroller:_},itemContent:(e,t)=>l.createElement(z,{data:L,user:t,index:e})}))),l.createElement(S.Footer,null,l.createElement(k,{stretch:!0},y&&l.createElement(p,{onClick:y,width:"50%"},l.createElement(i,{is:"span",mie:"x4"},l.createElement(s,{name:"link",size:"x20"})),B("Invite_Link")),w&&l.createElement(p,{onClick:w,width:"50%",primary:!0},l.createElement(i,{is:"span",mie:"x4"},l.createElement(s,{name:"user-plus",size:"x20"})),B("Add_users")))))};L.Option=U;const G=e=>{const t=w("getUsersOfRoom");return T(o(e=>t(...e),[t]),e)};n.exportDefault(e=>{let{rid:t}=e;const[n,i]=a({}),s=V(),c=I(t);c.type=c.t,c.rid=t;const[m,d]=h("members-list-type","online"),[u,k]=a(""),p=f(u,500),x=r(()=>[t,"all"===m,{limit:50},p],[t,m,p]),{value:C,phase:b,more:g,error:v}=G(x),S=A(r(()=>["p"===c.t?"add-user-to-any-p-room":"add-user-to-any-c-room","add-user-to-joined-room"],[c.t]),t),w=o(e=>{k(e.currentTarget.value)},[]),T=E(e=>{const{username:t}=e.currentTarget.dataset;i({tab:"UserInfo",username:t})}),U=E(()=>{i({tab:"InviteUsers"})}),_=E(()=>{i({tab:"AddUsers"})}),O=o(()=>i({}),[i]),z=o((e,t)=>g(n=>{let[l,o,,r]=n;return[l,o,{skip:e,limit:t-e},r]},(e,t)=>({total:t.total,finished:t.records.length<50,records:[...e.records,...t.records]})),[g]);return"UserInfo"===n.tab?l.createElement(M,{rid:t,onClickClose:s,onClickBack:O,username:n.username}):"InviteUsers"===n.tab?l.createElement(B,{onClickClose:s,rid:t,onClickBack:O}):"AddUsers"===n.tab?l.createElement(D,{onClickClose:s,rid:t,onClickBack:O}):l.createElement(L,{rid:t,loading:b===y.LOADING,type:m,text:u,error:v,setType:d,setText:w,members:null==C?void 0:C.records,total:null==C?void 0:C.total,onClickClose:s,onClickView:T,onClickAdd:S&&_,onClickInvite:S&&U,loadMoreItems:z})})}


function module(e,n,t){let l,o,a,i,r,c,s,u,d,m,p,C,v,_,b;t.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){l=e}},0),t.export({CallBBB:()=>k}),t.link("react",{default(e){o=e},useEffect(e){a=e}},0),t.link("@rocket.chat/fuselage",{Box(e){i=e},Button(e){r=e},ButtonGroup(e){c=e}},1),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){s=e}},2),t.link("../../../../../contexts/TranslationContext",{useTranslation(e){u=e}},3),t.link("../../../../../components/VerticalBar",{default(e){d=e}},4),t.link("../../../providers/ToolboxProvider",{useTabBarClose(e){m=e}},5),t.link("../../../../../contexts/SettingsContext",{useSetting(e){p=e}},6),t.link("../../../providers/RoomProvider",{useRoom(e){C=e}},7),t.link("../../../../../contexts/AuthorizationContext",{usePermission(e){v=e}},8),t.link("../../../../../contexts/ServerContext",{useMethod(e){_=e}},9),t.link("../../../../../../app/ui-utils/client",{popout(e){b=e}},10);const k=e=>{let{handleClose:n,canManageCall:t,live:a,startCall:s,endCall:m,openNewWindow:p}=e,C=l(e,["handleClose","canManageCall","live","startCall","endCall","openNewWindow"]);const v=u();return(o.createElement(o.Fragment,null,o.createElement(d.Header,null,o.createElement(d.Icon,{name:"phone"}),o.createElement(d.Text,null,v("Call")),n&&o.createElement(d.Close,{onClick:n})),o.createElement(d.ScrollableContent,C,p?o.createElement(o.Fragment,null,o.createElement(i,{fontScale:"p2"},v("Video_Conference")),o.createElement(i,{fontScale:"p1",color:"neutral-700"},v("Opened_in_a_new_window"))):null,o.createElement(c,{stretch:!0},a&&o.createElement(r,{primary:!0,onClick:s},v("BBB_Join_Meeting")),a&&t&&o.createElement(r,{danger:!0,onClick:m},v("BBB_End_Meeting")),!a&&t&&o.createElement(r,{primary:!0,onClick:s},v("BBB_Start_Meeting")),!a&&!t&&o.createElement(r,{primary:!0},v("BBB_You_have_no_permission_to_start_a_call"))))))},B=e=>{var n,t;let{rid:l}=e;const i=m(),r=!!p("bigbluebutton_Open_New_Window"),c=v("call-management",l),u=C(),d=_("bbbJoin"),B=_("bbbEnd"),g=s(()=>{B({rid:l})}),E=s(async()=>{const e=await d({rid:l});if(e)return r?window.open(e.url):void b.open({content:"bbbLiveView",data:{source:e.url,streamingOptions:e,canOpenExternal:!0,showVideoControls:!1},onCloseCallback:()=>!1})});a(()=>{var e;if("call"===(null==u?void 0:null===(e=u.streamingOptions)||void 0===e?void 0:e.type)&&!b.context)return E(),()=>{b.close()}},[null==u?void 0:null===(n=u.streamingOptions)||void 0===n?void 0:n.type,E]);const w="d"===(null==u?void 0:u.t)||c;return(o.createElement(k,{handleClose:i,openNewWindow:r,live:"call"===(null==u?void 0:null===(t=u.streamingOptions)||void 0===t?void 0:t.type),endCall:g,startCall:E,canManageCall:w}))};t.exportDefault(B)}


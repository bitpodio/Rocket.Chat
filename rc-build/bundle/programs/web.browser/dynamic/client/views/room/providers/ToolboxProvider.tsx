function module(e,t,o){let n,s,r,a,l,i,u,c,d,b,p,x,m,f,v,k;o.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),o.export({ToolboxProvider:()=>g,useTabContext:()=>y,useTab:()=>S,useTabBarOpen:()=>w,useTabBarClose:()=>A,useTabBarOpenUserInfo:()=>B}),o.link("react",{default(e){s=e},useContext(e){r=e},useMemo(e){a=e},useState(e){l=e},useCallback(e){i=e},useLayoutEffect(e){u=e}},0),o.link("@rocket.chat/fuselage-hooks",{useDebouncedState(e){c=e},useMutableCallback(e){d=e},useSafely(e){b=e}},1),o.link("../lib/Toolbox/ToolboxContext",{ToolboxContext(e){p=e}},2),o.link("../../../contexts/RouterContext",{useCurrentRoute(e){x=e},useRoute(e){m=e}},3),o.link("../../../contexts/SessionContext",{useSession(e){f=e}},4),o.link("../../../contexts/SettingsContext",{useSetting(e){v=e}},5),o.link("../../../contexts/UserContext",{useUserId(e){k=e}},6);const C={l:"live",d:"direct",p:"group",c:"channel"},h=s.memo(e=>{let{handleChange:t,room:o,action:n,id:s}=e;const r="function"==typeof n?n({room:o}):n,a=C[o.t],l=r&&(!r.groups||C[o.t]&&r.groups.includes(a));return u(()=>(t(e=>{l&&r?e.get(s)!==r&&e.set(s,r):e.delete(s)}),()=>{t(e=>e.delete(s))}),[r,l,t,s]),null}),T=e=>{const{listen:t,actions:o}=r(p),[n,s]=l(Array.from(o.entries()));return u(()=>{const e=t(e=>{s(Array.from(e.entries()))});return()=>{e()}},[t,e,s]),{listen:t,actions:n}},g=e=>{let{children:t,room:o}=e;const r=v("Accounts_AllowAnonymousRead"),C=k(),[g,y]=l([void 0]),[S,w]=b(c(new Map,5)),A=d(e=>{e(S),w(e=>new Map(e))}),{listen:B,actions:M}=T(o),[R,U]=x(),I=m(R||""),E=f("openedRoom"),O=null==U?void 0:U.tab,P=null==U?void 0:U.context,_=d(()=>{I.push(n(n({},U),{},{tab:"",context:""}))}),j=d((e,t)=>{var o;if(e===(null===(o=g[0])||void 0===o?void 0:o.id)&&void 0===t)return _();I.push(n(n({},U),{},{tab:e,context:t}))}),D=i(e=>{switch(o.t){case"l":j("visitor-info",e);break;case"d":j("user-info",e);break;default:j("members-list",e)}},[o.t,j]);u(()=>{E===o._id&&(O||y([void 0,void 0]),y([S.get(O),P]))},[O,S,E,o._id,P]);const L=a(()=>({listen:B,actions:new Map(S),activeTabBar:g[0],context:g[1],open:j,close:_,openUserInfo:D}),[B,S,g,j,_,D]);return(s.createElement(p.Provider,{value:L},M.filter(e=>{let[,t]=e;return C||r&&t.hasOwnProperty("anonymous")&&t.anonymous}).map(e=>{let[t,n]=e;return(s.createElement(h,{action:n,room:o,id:t,key:t,handleChange:A}))}),t))},y=()=>r(p).context,S=()=>r(p).activeTabBar,w=()=>r(p).open,A=()=>r(p).close,B=()=>r(p).openUserInfo}


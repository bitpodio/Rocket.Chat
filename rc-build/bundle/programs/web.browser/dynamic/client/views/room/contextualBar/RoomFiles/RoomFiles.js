function module(e,t,l){let n,o,s,a,i,r,c,u,d,m,x,p,k,f,h,C,g,D,E,I,y,w,A,M,T,S,F,v,b,L;l.export({createItemData:()=>_,RoomFiles:()=>R}),l.link("react",{default(e){n=e},useState(e){o=e},useCallback(e){s=e},useMemo(e){a=e}},0),l.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){i=e},useLocalStorage(e){r=e},useUniqueId(e){c=e},useAutoFocus(e){u=e}},1),l.link("@rocket.chat/fuselage",{Box(e){d=e},Icon(e){m=e},TextInput(e){x=e},Select(e){p=e},Throbber(e){k=e},Margins(e){f=e}},2),l.link("react-virtuoso",{Virtuoso(e){h=e}},3),l.link("memoize-one",{default(e){C=e}},4),l.link("../../../../contexts/UserContext",{useUserId(e){g=e}},5),l.link("../../../../components/DeleteFileWarning",{default(e){D=e}},6),l.link("../../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){E=e}},7),l.link("../../../../contexts/ModalContext",{useSetModal(e){I=e}},8),l.link("../../../../contexts/ServerContext",{useMethod(e){y=e}},9),l.link("../../../../hooks/useAsyncState",{AsyncStatePhase(e){w=e}},10),l.link("../../../../contexts/TranslationContext",{useTranslation(e){A=e}},11),l.link("../../../../components/VerticalBar",{default(e){M=e}},12),l.link("./components/FileItem",{default(e){T=e}},13),l.link("./hooks/useFilesList",{useFilesList(e){S=e}},14),l.link("../../../../hooks/lists/useRecordList",{useRecordList(e){F=e}},15),l.link("./hooks/useMessageDeletionIsAllowed",{useMessageDeletionIsAllowed(e){v=e}},16),l.link("../../providers/ToolboxProvider",{useTabBarClose(e){b=e}},17),l.link("../../../../components/ScrollableContentWrapper",{default(e){L=e}},18);const G=n.memo(e=>{let{item:t,data:l,index:o}=e;const{userId:s,onClickDelete:a,isDeletionAllowed:i}=l;return t&&n.createElement(R.Item,{index:o,_id:t._id,name:t.name,url:t.url,uploadedAt:t.uploadedAt,user:t.user,ts:t.ts,type:t.type,typeGroup:t.typeGroup,fileData:t,userId:s,onClickDelete:a,isDeletionAllowed:i})}),_=C((e,t)=>({onClickDelete:e,isDeletionAllowed:t})),R=function e(t){let{loading:l,filesItems:o=[],text:s,type:i,setText:r,setType:C,onClickClose:g,onClickDelete:D,total:E,loadMoreItems:I,isDeletionAllowed:y}=t;const w=A(),T=a(()=>[["all",w("All")],["image",w("Images")],["video",w("Videos")],["audio",w("Audios")],["text",w("Texts")],["application",w("Files")]],[w]),S=u(!0),F=c(),v=_(D,y);return n.createElement(n.Fragment,null,n.createElement(M.Header,null,n.createElement(M.Icon,{name:"attachment"}),n.createElement(M.Text,null,w("Files")),g&&n.createElement(M.Close,{onClick:g})),n.createElement(M.Content,{p:"x12"},n.createElement(d,{display:"flex",flexDirection:"row",p:"x12",flexShrink:0},n.createElement(d,{display:"flex",flexDirection:"row",flexGrow:1,mi:"neg-x4"},n.createElement(f,{inline:"x4"},n.createElement(x,{"data-qa-files-search":!0,id:F,placeholder:w("Search_Files"),ref:S,value:s,onChange:r,addon:n.createElement(m,{name:"magnifier",size:"x20"})}),n.createElement(p,{flexGrow:0,width:"110px",onChange:C,value:i,options:T})))),l&&n.createElement(d,{p:"x12"},n.createElement(k,{size:"x12"})),!l&&o.length<=0&&n.createElement(d,{p:"x12"},w("No_results_found")),n.createElement(d,{w:"full",h:"full",flexShrink:1,overflow:"hidden"},n.createElement(h,{style:{height:"100%",width:"100%"},totalCount:E,endReached:l?()=>{}:e=>I(e,Math.min(50,E-e)),overscan:50,data:o,components:{Scroller:L},itemContent:(e,t)=>n.createElement(G,{data:v,index:e,item:t})}))))};R.Item=T,l.exportDefault(e=>{let{rid:t}=e;const l=g(),c=b(),u=A(),d=I(),m=i(()=>d()),x=E(),p=y("deleteFileMessage"),[k,f]=r("file-list-type","all"),[h,C]=o(""),M=s(e=>{C(e.currentTarget.value)},[]),{filesList:T,loadMoreItems:L}=S(a(()=>({rid:t,type:k,text:h}),[t,k,h])),{phase:G,items:_,itemCount:z}=F(T),B=i(e=>{const t=async()=>{try{await p(e),x({type:"success",message:u("Deleted")})}catch(t){x({type:"error",message:t})}m()};d(n.createElement(D,{onConfirm:t,onCancel:m}))},[]),U=v(t,l);return n.createElement(R,{rid:t,loading:G===w.LOADING,type:k,text:h,loadMoreItems:L,setType:f,setText:M,filesItems:_,total:z,onClickClose:c,onClickDelete:B,isDeletionAllowed:U})})}


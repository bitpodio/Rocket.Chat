function module(e,t,l){let n,a,o,r,s,i,c,d,m,u,p,_,g,E,h,w,y;function f(){var e;const t=_(),l=g(),[f,k]=i(d(!0)),[C,S]=i(d()),[v,x]=i(d([])),T=h("GET","getCurrentImportOperation"),F=h("GET","getLatestImportOperations"),D=h("POST","downloadPendingFiles"),I=h("POST","downloadPendingAvatars"),P=E("admin-import-new"),b=E("admin-import-progress");m(()=>{const e=async()=>{k(!0);try{const{operation:e}=await T();S(e)}catch(e){l({type:"error",message:t("Failed_To_Load_Import_Operation")})}try{const e=await F();x(e)}catch(e){l({type:"error",message:t("Failed_To_Load_Import_History")})}k(!1)};e()},[l,T,F,S,x,k,t]);const O=u(()=>null==v?void 0:v.some(e=>{let{importerKey:t,status:l}=e;return"slack"===t&&l===w.DONE}),[v]),L=()=>{P.push()},M=async()=>{try{k(!0);const{count:e}=await D();if(!e)return l({type:"info",message:t("No_files_left_to_download")}),void k(!1);l({type:"info",message:t("File_Downloads_Started")}),b.push()}catch(e){console.error(e),l({type:"error",message:t("Failed_To_Download_Files")}),k(!1)}},N=async()=>{try{k(!0);const{count:e}=await I();if(!e)return l({type:"info",message:t("No_files_left_to_download")}),void k(!1);l({type:"info",message:t("File_Downloads_Started")}),b.push()}catch(e){console.error(e),l({type:"error",message:t("Failed_To_Download_Files")}),k(!1)}},R=s("(max-width: 768px)");return c.createElement(p,null,c.createElement(p.Header,{title:t("Import")},c.createElement(o,null,c.createElement(a,{primary:!0,disabled:f,onClick:L},t("Import_New_File")),O&&c.createElement(a,{disabled:f,onClick:M},t("Download_Pending_Files")),O&&c.createElement(a,{disabled:f,onClick:N},t("Download_Pending_Avatars")))),c.createElement(p.ScrollableContentWithShadow,null,c.createElement(r,{fixed:!0},c.createElement(r.Head,null,c.createElement(r.Row,null,c.createElement(r.Cell,{is:"th",rowSpan:2,width:"x140"},t("Import_Type")),c.createElement(r.Cell,{is:"th",rowSpan:2},t("Last_Updated")),!R&&c.createElement(c.Fragment,null,c.createElement(r.Cell,{is:"th",rowSpan:2},t("Last_Status")),c.createElement(r.Cell,{is:"th",rowSpan:2},t("File")),c.createElement(r.Cell,{is:"th",align:"center",colSpan:4,width:"x320"},t("Counters")))),!R&&c.createElement(r.Row,null,c.createElement(r.Cell,{is:"th",align:"center"},t("Users")),c.createElement(r.Cell,{is:"th",align:"center"},t("Channels")),c.createElement(r.Cell,{is:"th",align:"center"},t("Messages")),c.createElement(r.Cell,{is:"th",align:"center"},t("Total")))),c.createElement(r.Body,null,f?Array.from({length:20},(e,t)=>c.createElement(y.Skeleton,{small:R,key:t})):c.createElement(c.Fragment,null,(null==C?void 0:C.valid)&&c.createElement(y,n({},C,{small:R})),null==v?void 0:null===(e=v.filter(e=>{let{_id:t}=e;return(null==C?void 0:C._id)!==t||!(null!=C&&C.valid)}))||void 0===e?void 0:e.map(e=>c.createElement(y,n({key:e._id},e,{valid:!1,small:R}))))))))}l.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),l.link("@rocket.chat/fuselage",{Button(e){a=e},ButtonGroup(e){o=e},Table(e){r=e}},0),l.link("@rocket.chat/fuselage-hooks",{useMediaQuery(e){s=e},useSafely(e){i=e}},1),l.link("react",{default(e){c=e},useState(e){d=e},useEffect(e){m=e},useMemo(e){u=e}},2),l.link("../../../components/Page",{default(e){p=e}},3),l.link("../../../contexts/TranslationContext",{useTranslation(e){_=e}},4),l.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){g=e}},5),l.link("../../../contexts/RouterContext",{useRoute(e){E=e}},6),l.link("../../../contexts/ServerContext",{useEndpoint(e){h=e}},7),l.link("../../../../app/importer/lib/ImporterProgressStep",{ProgressStep(e){w=e}},8),l.link("./ImportOperationSummary",{default(e){y=e}},9),l.exportDefault(f)}


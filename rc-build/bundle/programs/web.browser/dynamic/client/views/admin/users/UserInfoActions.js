function module(e,t,n){let s,o,a,r,i,l,c,u,d,m,_,h,b,k,f,g,p,y,x,E,T,v;n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){s=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default(e){o=e}},1),n.link("@babel/runtime/helpers/extends",{default(e){a=e}},2),n.export({UserInfoActions:()=>C}),n.link("@rocket.chat/fuselage",{ButtonGroup(e){r=e},Menu(e){i=e},Option(e){l=e}},0),n.link("react",{default(e){c=e},useCallback(e){u=e},useMemo(e){d=e}},1),n.link("../../room/hooks/useUserInfoActions",{useUserInfoActionsSpread(e){m=e}},2),n.link("../../../components/ConfirmOwnerChangeWarningModal",{default(e){_=e}},3),n.link("../../room/contextualBar/UserInfo",{UserInfo(e){h=e}},4),n.link("../../../contexts/AuthorizationContext",{usePermission(e){b=e}},5),n.link("../../../contexts/ModalContext",{useSetModal(e){k=e}},6),n.link("../../../contexts/RouterContext",{useRoute(e){f=e}},7),n.link("../../../contexts/ServerContext",{useMethod(e){g=e},useEndpoint(e){p=e}},8),n.link("../../../contexts/SettingsContext",{useSetting(e){y=e}},9),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){x=e}},10),n.link("../../../contexts/TranslationContext",{useTranslation(e){E=e}},11),n.link("../../../components/DeleteSuccessModal",{default(e){T=e}},12),n.link("../../../components/DeleteWarningModal",{default(e){v=e}},13);const C=e=>{let{username:t,_id:n,isActive:C,isAdmin:S,onChange:O}=e;const w=E(),A=k(),U=f("direct"),M=f("admin-users"),R=x(),D=b("create-d"),P=b("edit-other-user-info"),I=b("assign-admin-role"),W=b("edit-other-user-e2ee"),B=b("edit-other-user-totp"),K=b("edit-other-user-active-status"),j=b("delete-user"),q=y("Accounts_TwoFactorAuthentication_Enforce_Password_Fallback"),F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async()=>{try{return await e()}catch(o){var n,s;if("user-last-owner"===(null===(n=o.xhr)||void 0===n?void 0:null===(s=n.responseJSON)||void 0===s?void 0:s.errorType)){const{shouldChangeOwner:n,shouldBeRemoved:s}=o.xhr.responseJSON.details;return void A(c.createElement(_,a({shouldChangeOwner:n,shouldBeRemoved:s},t,{onConfirm:async()=>{await e(!0),A()},onCancel:()=>{A(),O()}})))}R({type:"error",message:o})}}},G=d(()=>({userId:n}),[n]),J=p("POST","users.delete"),L=y("Message_ErasureType"),N=F((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(G.confirmRelinquish=e);const t=await J(G);t.success?A(c.createElement(T,{children:w("User_has_been_deleted"),onClose:()=>{A(),O()}})):A()}),{contentTitle:w("Delete_User_Warning_".concat(L)),confirmLabel:w("Delete")}),z=u(()=>{A(c.createElement(v,{children:w("Delete_User_Warning_".concat(L)),onCancel:()=>A(),onDelete:N}))},[N,L,A,w]),Y=g("setAdminStatus"),H=u(async()=>{try{await Y(n,!S);const e=S?"User_is_no_longer_an_admin":"User_is_now_an_admin";R({type:"success",message:w(e)}),O()}catch(e){R({type:"error",message:e})}},[n,R,S,O,Y,w]),Q=p("POST","users.resetE2EKey"),V=p("POST","users.resetTOTP"),X=u(async()=>{A();const e=await Q({userId:n});e&&A(c.createElement(T,{children:w("Users_key_has_been_reset"),onClose:()=>{A(),O()}}))},[Q,O,A,w,n]),Z=u(async()=>{A();const e=await V({userId:n});e&&A(c.createElement(T,{children:w("Users_TOTP_has_been_reset"),onClose:()=>{A(),O()}}))},[V,O,A,w,n]),$=u(()=>{A(c.createElement(v,{children:w("E2E_Reset_Other_Key_Warning"),deleteText:w("Reset"),onCancel:()=>A(),onDelete:X}))},[X,w,A]),ee=u(()=>{A(c.createElement(v,{children:w("TOTP_Reset_Other_Key_Warning"),deleteText:w("Reset"),onCancel:()=>A(),onDelete:Z}))},[Z,w,A]),te=d(()=>({userId:n,activeStatus:!C}),[n,C]),ne=C?"User_has_been_deactivated":"User_has_been_activated",se=p("POST","users.setActiveStatus"),oe=F((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(te.confirmRelinquish=e);try{const e=await se(te);e.success&&(R({type:"success",message:w(ne)}),O())}catch(t){throw t}}),{confirmLabel:w("Yes_deactivate_it")}),ae=u(()=>U.push({rid:t}),[U,t]),re=u(()=>M.push({context:"edit",id:n}),[n,M]),ie=d(()=>o(o(o(o(o(o(o({},D&&{directMessage:{icon:"balloon",label:w("Direct_Message"),action:ae}}),P&&{editUser:{icon:"edit",label:w("Edit"),action:re}}),I&&t&&{makeAdmin:{icon:"key",label:w(S?"Remove_Admin":"Make_Admin"),action:H}}),W&&q&&{resetE2EEKey:{icon:"key",label:w("Reset_E2E_Key"),action:$}}),B&&q&&{resetTOTP:{icon:"key",label:w("Reset_TOTP"),action:ee}}),j&&{delete:{icon:"trash",label:w("Delete"),action:z}}),K&&{changeActiveStatus:{icon:"user",label:w(C?"Deactivate":"Activate"),action:oe}}),[w,D,ae,P,re,I,S,H,j,z,K,C,oe,q,W,B,$,ee,t]),{actions:le,menu:ce}=m(ie),ue=d(()=>ce?c.createElement(i,{mi:"x4",placement:"bottom-start",small:!1,ghost:!1,flexShrink:0,key:"menu",renderItem:e=>{let{label:{label:t,icon:n}}=e,o=s(e,["label"]);return(c.createElement(l,a({label:t,title:t,icon:n},o)))},options:ce}):null,[ce]),de=d(()=>{const e=e=>{let[t,{label:n,icon:s,action:o}]=e;return(c.createElement(h.Action,{key:t,title:n,label:n,onClick:o,icon:s}))};return[...le.map(e),ue].filter(Boolean)},[le,ue]);return c.createElement(r,{flexGrow:0,justifyContent:"center"},de)}}


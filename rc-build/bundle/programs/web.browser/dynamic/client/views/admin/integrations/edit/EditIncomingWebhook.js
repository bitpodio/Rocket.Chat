function module(e,t,n){let a,l,o,i,r,s,c,u,d,m,p,k,x,g,b,h,E,f,_,C,v,y,D;function w(e){let{integrationId:t}=e,n=o(e,["integrationId"]);const a=k(),s=r(()=>({integrationId:t}),[t]),{value:c,phase:m,error:p,reload:x}=y("integrations.get",s),g=()=>{x()};return m===D.LOADING?i.createElement(u,l({w:"full",pb:"x24"},n),i.createElement(d,{mbe:"x4"}),i.createElement(d,{mbe:"x8"}),i.createElement(d,{mbe:"x4"}),i.createElement(d,{mbe:"x8"}),i.createElement(d,{mbe:"x4"}),i.createElement(d,{mbe:"x8"})):p?i.createElement(u,l({mbs:"x16"},n),a("Oops_page_not_found")):i.createElement(M,l({data:c.integration,onChange:g},n))}n.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),n.link("@babel/runtime/helpers/extends",{default(e){l=e}},1),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){o=e}},2),n.export({default:()=>w}),n.link("react",{default(e){i=e},useMemo(e){r=e},useCallback(e){s=e}},0),n.link("@rocket.chat/fuselage",{Field(e){c=e},Box(e){u=e},Skeleton(e){d=e},Margins(e){m=e},Button(e){p=e}},1),n.link("../../../../contexts/TranslationContext",{useTranslation(e){k=e}},2),n.link("../../../../contexts/ServerContext",{useMethod(e){x=e}},3),n.link("../../../../hooks/useEndpointAction",{useEndpointAction(e){g=e}},4),n.link("../../../../contexts/RouterContext",{useRoute(e){b=e}},5),n.link("../../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){h=e}},6),n.link("../../../../contexts/ModalContext",{useSetModal(e){E=e}},7),n.link("../../../../hooks/useForm",{useForm(e){f=e}},8),n.link("../IncomingWebhookForm",{default(e){_=e}},9),n.link("../../../../components/DeleteSuccessModal",{default(e){C=e}},10),n.link("../../../../components/DeleteWarningModal",{default(e){v=e}},11),n.link("../../../../hooks/useEndpointData",{useEndpointData(e){y=e}},12),n.link("../../../../hooks/useAsyncState",{AsyncStatePhase(e){D=e}},13);const I=e=>{var t,n,a,l,o,i;const r={enabled:e.enabled,channel:null!==(t=e.channel.join(", "))&&void 0!==t?t:"",username:null!==(n=e.username)&&void 0!==n?n:"",name:null!==(a=e.name)&&void 0!==a?a:"",alias:null!==(l=e.alias)&&void 0!==l?l:"",avatarUrl:null!==(o=e.avatarUrl)&&void 0!==o?o:"",emoji:null!==(i=e.emoji)&&void 0!==i?i:"",scriptEnabled:e.scriptEnabled,script:e.script};return r};function M(e){let{data:t,onChange:n}=e,d=o(e,["data","onChange"]);const y=k(),D=h(),{values:w,handlers:M,reset:S}=f(I(t)),j=E(),A=r(()=>({type:"webhook-incoming",integrationId:t._id}),[t._id]),T=g("POST","integrations.remove",A),F=x("updateIncomingIntegration"),R=b("admin-integrations"),W=s(()=>{const e=()=>j(),t=async()=>{const t=await T();t.success&&j(i.createElement(C,{children:y("Your_entry_has_been_deleted"),onClose:()=>{e(),R.push({})}}))};j(i.createElement(v,{children:y("Integration_Delete_Warning"),onDelete:t,onCancel:e}))},[T,R,j,y]),G=s(async()=>{try{await F(t._id,a({},w)),D({type:"success",message:y("Integration_updated")}),n()}catch(e){D({type:"error",message:e})}},[t._id,D,w,n,F,y]),O=r(()=>i.createElement(c,null,i.createElement(c.Row,{display:"flex",flexDirection:"column"},i.createElement(u,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},i.createElement(m,{inlineEnd:"x4"},i.createElement(p,{flexGrow:1,type:"reset",onClick:S},y("Reset")),i.createElement(p,{mie:"none",flexGrow:1,onClick:G},y("Save")))),i.createElement(p,{mbs:"x4",primary:!0,danger:!0,w:"full",onClick:W},y("Delete")))),[W,G,S,y]);return i.createElement(_,l({formHandlers:M,formValues:w,extraData:{_id:t._id,token:t.token},append:O},d))}}


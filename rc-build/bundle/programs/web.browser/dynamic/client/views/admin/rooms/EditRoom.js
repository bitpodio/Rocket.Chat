function module(e,t,n){let l,a,o,r,c,i,m,u,s,d,E,h,f,p,v,w,x,b,C,R,k,y,g,_,A,D,T,S,N;n.link("@babel/runtime/helpers/objectSpread2",{default(e){l=e}},0),n.export({EditRoomContextBar:()=>O}),n.link("react",{default(e){a=e},useState(e){o=e},useMemo(e){r=e}},0),n.link("@rocket.chat/fuselage",{Box(e){c=e},Skeleton(e){i=e},Button(e){m=e},ButtonGroup(e){u=e},TextInput(e){s=e},Field(e){d=e},ToggleSwitch(e){E=e},Icon(e){h=e},Callout(e){f=e},TextAreaInput(e){p=e}},1),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){v=e}},2),n.link("../../../components/VerticalBar",{default(e){w=e}},3),n.link("../../../components/NotAuthorizedPage",{default(e){x=e}},4),n.link("../../../components/avatar/RoomAvatarEditor",{default(e){b=e}},5),n.link("../../../components/DeleteChannelWarning",{default(e){C=e}},6),n.link("../../../contexts/ModalContext",{useSetModal(e){R=e}},7),n.link("../../../contexts/TranslationContext",{useTranslation(e){k=e}},8),n.link("../../../hooks/useForm",{useForm(e){y=e}},9),n.link("../../../../app/utils/client",{roomTypes(e){g=e},RoomSettingsEnum(e){_=e}},10),n.link("../../../contexts/ServerContext",{useMethod(e){A=e}},11),n.link("../../../contexts/AuthorizationContext",{usePermission(e){D=e}},12),n.link("../../../hooks/useEndpointAction",{useEndpointActionExperimental(e){T=e}},13),n.link("../../../hooks/useEndpointData",{useEndpointData(e){S=e}},14),n.link("../../../hooks/useAsyncState",{AsyncStatePhase(e){N=e}},15);const G=e=>{var t,n,a;return{roomName:"d"===e.t?e.usernames.join(" x "):g.getRoomName(e.t,l({type:e.t},e)),roomType:e.t,readOnly:!!e.ro,archived:!!e.archived,isDefault:!!e.default,favorite:!!e.favorite,featured:!!e.featured,roomTopic:null!==(t=e.topic)&&void 0!==t?t:"",roomDescription:null!==(n=e.description)&&void 0!==n?n:"",roomAnnouncement:null!==(a=e.announcement)&&void 0!==a?a:"",roomAvatar:void 0}};function O(e){let{rid:t}=e;const n=D("view-room-administration");return n?a.createElement(L,{rid:t}):a.createElement(x,null)}function L(e){let{rid:t}=e;const{value:n={},phase:o,error:m,reload:u}=S("rooms.adminRooms.getRoom",r(()=>({rid:t}),[t]));return o===N.LOADING?a.createElement(c,{w:"full",pb:"x24"},a.createElement(i,{mbe:"x4"}),a.createElement(i,{mbe:"x8"}),a.createElement(i,{mbe:"x4"}),a.createElement(i,{mbe:"x8"}),a.createElement(i,{mbe:"x4"}),a.createElement(i,{mbe:"x8"})):o===N.REJECTED?m.message:a.createElement(I,{room:l({type:n.t},n),onChange:u})}function I(e){var t;let{room:n,onChange:l}=e;const i=k(),[x,S]=o(!1),N=R(),{values:O,handlers:L,hasUnsavedChanges:I,reset:P}=y(G(n)),[j,F,M,B,z,H,V]=r(()=>{const e=g.getConfig(n.t).allowRoomSettingChange;return[e(n,_.NAME),e(n,_.TOPIC),e(n,_.ANNOUNCEMENT),e(n,_.ARCHIVE_OR_UNARCHIVE),e(n,_.DESCRIPTION),e(n,_.TYPE),e(n,_.READ_ONLY)]},[n]),{roomName:U,roomType:J,readOnly:Y,archived:W,isDefault:q,favorite:K,featured:Q,roomTopic:X,roomAvatar:Z,roomDescription:$,roomAnnouncement:ee}=O,{handleIsDefault:te,handleFavorite:ne,handleFeatured:le,handleRoomName:ae,handleRoomType:oe,handleReadOnly:re,handleArchived:ce,handleRoomAvatar:ie,handleRoomTopic:me,handleRoomDescription:ue,handleRoomAnnouncement:se}=L,de=W!==!!n.archived,Ee=D("delete-".concat(n.t)),he=n.archived?"unarchive":"archive",fe=n.archived?"Room_has_been_unarchived":"Room_has_been_archived",pe=T("POST","rooms.saveRoomSettings",i("Room_updated_successfully")),ve=T("POST","rooms.changeArchivationState",i(fe)),we=v(async()=>{const e=()=>pe({rid:n._id,roomName:U,roomTopic:X,roomType:J,readOnly:Y,default:q,favorite:{defaultValue:q,favorite:K},featured:Q,roomDescription:$,roomAnnouncement:ee,roomAvatar:Z}),t=()=>ve({rid:n._id,action:he});await Promise.all([I&&e(),de&&t()].filter(Boolean)),l()}),xe=v(()=>{oe("p"===J?"c":"p")}),be=A("eraseRoom"),Ce=v(()=>{const e=()=>N(void 0),t=async()=>{await be(n._id),e(),S(!0)};N(a.createElement(C,{onConfirm:t,onCancel:e}))});return a.createElement(w.ScrollableContent,{is:"form",onSubmit:v(e=>e.preventDefault())},x&&a.createElement(f,{type:"danger",title:i("Room_has_been_deleted")}),"d"!==n.t&&a.createElement(c,{pbe:"x24",display:"flex",justifyContent:"center"},a.createElement(b,{roomAvatar:Z,room:n,onChangeAvatar:ie})),a.createElement(d,null,a.createElement(d.Label,null,i("Name")),a.createElement(d.Row,null,a.createElement(s,{disabled:x||!j,value:U,onChange:ae,flexGrow:1}))),"d"!==n.t&&a.createElement(a.Fragment,null,a.createElement(d,null,a.createElement(d.Label,null,i("Owner")),a.createElement(d.Row,null,a.createElement(c,{fontScale:"p1"},null===(t=n.u)||void 0===t?void 0:t.username))),z&&a.createElement(d,null,a.createElement(d.Label,null,i("Description")),a.createElement(d.Row,null,a.createElement(p,{rows:4,disabled:x,value:$,onChange:ue,flexGrow:1}))),M&&a.createElement(d,null,a.createElement(d.Label,null,i("Announcement")),a.createElement(d.Row,null,a.createElement(p,{rows:4,disabled:x,value:ee,onChange:se,flexGrow:1}))),F&&a.createElement(d,null,a.createElement(d.Label,null,i("Topic")),a.createElement(d.Row,null,a.createElement(p,{rows:4,disabled:x,value:X,onChange:me,flexGrow:1}))),H&&a.createElement(d,null,a.createElement(d.Row,null,a.createElement(d.Label,null,i("Private")),a.createElement(E,{disabled:x,checked:"p"===J,onChange:xe})),a.createElement(d.Hint,null,i("Just_invited_people_can_access_this_channel"))),V&&a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},a.createElement(d.Label,null,i("Read_only")),a.createElement(E,{disabled:x,checked:Y,onChange:re}))),a.createElement(d.Hint,null,i("Only_authorized_users_can_write_new_messages"))),B&&a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},a.createElement(d.Label,null,i("Archived")),a.createElement(E,{disabled:x,checked:W,onChange:ce}))))),a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},a.createElement(d.Label,null,i("Default")),a.createElement(E,{disabled:x,checked:q,onChange:te})))),a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},a.createElement(d.Label,null,i("Favorite")),a.createElement(E,{disabled:x,checked:K,onChange:ne})))),a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},a.createElement(d.Label,null,i("Featured")),a.createElement(E,{disabled:x,checked:Q,onChange:le})))),a.createElement(d,null,a.createElement(d.Row,null,a.createElement(c,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},a.createElement(u,{stretch:!0,flexGrow:1},a.createElement(m,{type:"reset",disabled:!I||x,onClick:P},i("Reset")),a.createElement(m,{flexGrow:1,disabled:!I||x,onClick:we},i("Save")))))),a.createElement(d,null,a.createElement(d.Row,null,a.createElement(m,{primary:!0,flexGrow:1,danger:!0,disabled:x||!Ee,onClick:Ce},a.createElement(h,{name:"trash",size:"x16"}),i("Delete")))))}}


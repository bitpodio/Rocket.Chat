function module(e,t,n){let l,r,a,o,i,c,s,u,m,E,g,_,d,h,p,f,y,b,k,w,S,H,R,I,C,x,L,O,T;function P(e){let{data:t}=e,n=r(e,["data"]);const o=k(),c=H("replayOutgoingIntegration"),{_id:g,_createdAt:h,_updatedAt:p,httpResult:f,event:y,step:b,httpCallData:R,data:I,prepareSentMessage:x,processSentMessage:L,url:O,httpError:T,errorStack:P,error:M,integration:{_id:W}}=t,D="string"==typeof h?h:h.toISOString(),j="string"==typeof p?p:p.toISOString(),N=_(e=>{e.stopPropagation(),c({integrationId:W,historyId:g})}),v=C(),A=w("json",JSON.stringify(I||"",null,2)),F=w("json",JSON.stringify(x||"",null,2)),J=w("json",JSON.stringify(L||"",null,2)),B=w("json",JSON.stringify(R||"",null,2)),G=w("json",JSON.stringify(T||"",null,2)),z=w("json",JSON.stringify(f||"",null,2)),U=w("json",JSON.stringify(P||"",null,2));return d.createElement(u.Item,l({title:d.createElement(s,{display:"inline-flex",w:"full",flexDirection:"row",justifyContent:"space-between"},d.createElement(s,{display:"flex",flexDirection:"row",alignItems:"center"},d.createElement(i,{name:"info-circled",size:"x16",mie:"x4"}),v(h)),d.createElement(a,{ghost:!0,onClick:N},o("Replay")))},n),d.createElement(E,null,d.createElement(m,null,d.createElement(m.Label,null,o("Status")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("code",null,o(M?"Failure":"Success"))))),d.createElement(m,null,d.createElement(m.Label,null,o("Integration_Outgoing_WebHook_History_Time_Triggered")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("code",null,D)))),d.createElement(m,null,d.createElement(m.Label,null,o("Integration_Outgoing_WebHook_History_Time_Ended_Or_Error")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("code",null,j)))),d.createElement(m,null,d.createElement(m.Label,null,o("Event_Trigger")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("code",null,o(S.outgoingEvents[y].label))))),d.createElement(m,null,d.createElement(m.Label,null,o("Integration_Outgoing_WebHook_History_Trigger_Step")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("code",null,b)))),I&&d.createElement(m,null,d.createElement(m.Label,null,o("Integration_Outgoing_WebHook_History_Data_Passed_To_Trigger")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("pre",null,d.createElement("code",{dangerouslySetInnerHTML:{__html:A}}))))),x&&d.createElement(m,null,d.createElement(m.Label,null,o("Integration_Outgoing_WebHook_History_Messages_Sent_From_Prepare_Script")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("pre",null,d.createElement("code",{dangerouslySetInnerHTML:{__html:F}}))))),L&&d.createElement(m,null,d.createElement(m.Label,null,o("Integration_Outgoing_WebHook_History_Messages_Sent_From_Process_Script")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("pre",null,d.createElement("code",{dangerouslySetInnerHTML:{__html:J}}))))),O&&d.createElement(m,null,d.createElement(m.Label,null,o("URL")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("code",null,O)))),R&&d.createElement(m,null,d.createElement(m.Label,null,o("Integration_Outgoing_WebHook_History_Data_Passed_To_URL")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("pre",null,d.createElement("code",{dangerouslySetInnerHTML:{__html:B}}))))),T&&d.createElement(m,null,d.createElement(m.Label,null,o("Integration_Outgoing_WebHook_History_Http_Response_Error")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("pre",null,d.createElement("code",{dangerouslySetInnerHTML:{__html:G}}))))),f&&d.createElement(m,null,d.createElement(m.Label,null,o("Integration_Outgoing_WebHook_History_Http_Response")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("pre",null,d.createElement("code",{dangerouslySetInnerHTML:{__html:z}}))))),P&&d.createElement(m,null,d.createElement(m.Label,null,o("Integration_Outgoing_WebHook_History_Error_Stacktrace")),d.createElement(m.Row,null,d.createElement(s,{withRichContent:!0,w:"full"},d.createElement("pre",null,d.createElement("code",{dangerouslySetInnerHTML:{__html:U}})))))))}function M(e){let{data:t,state:n,onChange:a}=e,o=r(e,["data","state","onChange"]);const i=k();return t&&n!==T.LOADING?t.length<1?d.createElement(s,l({mbs:"x16"},o),i("Integration_Outgoing_WebHook_No_History")):d.createElement(d.Fragment,null,d.createElement(u,{w:"full",maxWidth:"x600",alignSelf:"center",key:"content"},t.map(e=>d.createElement(P,{data:e,key:e._id})))):d.createElement(s,l({w:"full",pb:"x24"},o),d.createElement(c,{mbe:"x4"}),d.createElement(c,{mbe:"x8"}),d.createElement(c,{mbe:"x4"}),d.createElement(c,{mbe:"x8"}),d.createElement(c,{mbe:"x4"}),d.createElement(c,{mbe:"x8"}))}function W(e){const t=x(),n=k(),[r,c]=f(),[s,u]=f(),[m,E]=f(),[w,S]=f(!1),[C,P]=f(0),W=R("admin-integrations"),D=H("clearIntegrationHistory"),j=I("id"),N=h(()=>({id:j,count:m,offset:s}),[j,m,s]),{value:v,phase:A,reload:F}=O("integrations.history",N),J=async()=>{try{await D(),t({type:"success",message:n("Integration_History_Cleared")}),F(),S(!1)}catch(e){t({type:"error",message:e})}},B=()=>{W.push({})},G=_(e=>{let{type:t,id:n,diff:l,data:r}=e;if("inserted"===t)return P(e=>e+1),void c(e=>[r].concat(e));"updated"!==t?"removed"===t&&c([]):c(e=>{const t=e.findIndex(e=>{let{_id:t}=e;return t===n});return Object.assign(e[t],l),e})});y(()=>{A!==T.RESOLVED||w||(c(v.history),P(v.total),S(!0))},[v,w,A]),y(()=>(w&&L.on(j,G),()=>L.removeListener(j,G)),[G,j,w]);const z=p(e=>{let{count:t,current:l,itemsPerPage:r}=e;return n("Showing_results_of",l+1,Math.min(l+r,t),t)},[n]);return(d.createElement(b,l({flexDirection:"column"},e),d.createElement(b.Header,{title:n("Integration_Outgoing_WebHook_History")},d.createElement(o,null,d.createElement(a,{onClick:B},d.createElement(i,{name:"back",size:"x16"})," ",n("Back")),d.createElement(a,{primary:!0,danger:!0,onClick:J,disabled:0===C},d.createElement(i,{name:"trash"})," ",n("clear_history")))),d.createElement(b.ScrollableContentWithShadow,null,d.createElement(M,{key:"historyContent",data:r,state:A}),d.createElement(g,{current:s,itemsPerPage:m,itemsPerPageLabel:n("Items_per_page:"),showingResultsLabel:z,count:C,onSetItemsPerPage:E,onSetCurrent:u}))))}n.link("@babel/runtime/helpers/extends",{default(e){l=e}},0),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){r=e}},1),n.link("@rocket.chat/fuselage",{Button(e){a=e},ButtonGroup(e){o=e},Icon(e){i=e},Skeleton(e){c=e},Box(e){s=e},Accordion(e){u=e},Field(e){m=e},FieldGroup(e){E=e},Pagination(e){g=e}},0),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){_=e}},1),n.link("react",{default(e){d=e},useMemo(e){h=e},useCallback(e){p=e},useState(e){f=e},useEffect(e){y=e}},2),n.link("../../../../components/Page",{default(e){b=e}},3),n.link("../../../../contexts/TranslationContext",{useTranslation(e){k=e}},4),n.link("../../../../hooks/useHighlightedCode",{useHighlightedCode(e){w=e}},5),n.link("../../../../../app/integrations/lib/rocketchat",{integrations(e){S=e}},6),n.link("../../../../contexts/ServerContext",{useMethod(e){H=e}},7),n.link("../../../../contexts/RouterContext",{useRoute(e){R=e},useRouteParameter(e){I=e}},8),n.link("../../../../hooks/useFormatDateAndTime",{useFormatDateAndTime(e){C=e}},9),n.link("../../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){x=e}},10),n.link("../../../../../app/integrations/client/streamer",{integrationHistoryStreamer(e){L=e}},11),n.link("../../../../hooks/useEndpointData",{useEndpointData(e){O=e}},12),n.link("../../../../hooks/useAsyncState",{AsyncStatePhase(e){T=e}},13),n.exportDefault(W)}


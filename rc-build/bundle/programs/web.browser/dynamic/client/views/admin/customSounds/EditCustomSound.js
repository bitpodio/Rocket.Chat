function module(e,t,n){let l,a,r,o,s,c,i,u,m,d,E,h,p,f,g,k,C,x,b,y,S,_,w,D,v,M,B,T,F;function I(e){let{_id:t,onChange:n}=e,o=a(e,["_id","onChange"]);const s=c(()=>({query:JSON.stringify({_id:t})}),[t]),{value:i,phase:E,error:h,reload:p}=T("custom-sounds.list",s);if(E===F.LOADING)return r.createElement(u,{pb:"x20"},r.createElement(g,{mbs:"x8"}),r.createElement(C.Skeleton,{w:"full"}),r.createElement(g,{mbs:"x8"}),r.createElement(C.Skeleton,{w:"full"}),r.createElement(d,{stretch:!0,w:"full",mbs:"x8"},r.createElement(m,{disabled:!0},r.createElement(k,{inheritColor:!0})),r.createElement(m,{primary:!0,disabled:!0},r.createElement(k,{inheritColor:!0}))),r.createElement(d,{stretch:!0,w:"full",mbs:"x8"},r.createElement(m,{primary:!0,danger:!0,disabled:!0},r.createElement(k,{inheritColor:!0}))));if(h||!i||i.sounds.length<1)return r.createElement(u,{fontScale:"h1",pb:"x20"},h);const f=()=>{n&&n(),p&&p()};return(r.createElement(N,l({data:i.sounds[0],onChange:f},o)))}function N(e){let{close:t,onChange:n,data:l}=e,g=a(e,["close","onChange","data"]);const k=x(),C=y(),T=D(),{_id:F,name:I}=l||{},N=c(()=>l||{},[l]),[A,R]=s(()=>{var e;return null!==(e=null==l?void 0:l.name)&&void 0!==e?e:""}),[q,L]=s(()=>null!=l?l:{});i(()=>{R(I||""),L(N||"")},[I,N,F]);const O=b("deleteCustomSound"),W=b("uploadCustomSound"),G=b("insertOrUpdateSound"),P=o(e=>{L(e)},[]),U=c(()=>I!==A||N!==q,[A,I,N,q]),j=o(async e=>{const t=w(e,A,{previousName:I,previousSound:N,_id:F}),n=_(t,e);if(0===n.length){let n;try{n=await G(t)}catch(l){C({type:"error",message:l})}if(t._id=n,t.random=Math.round(1e3*Math.random()),e&&e!==N){C({type:"success",message:k("Uploading_file")});const n=new FileReader;n.readAsBinaryString(e),n.onloadend=()=>{try{return W(n.result,e.type,t),C({type:"success",message:k("File_uploaded")})}catch(l){C({type:"error",message:l})}}}}n.forEach(e=>C({type:"error",message:k("error-the-field-is-required",{field:k(e)})}))},[F,C,G,A,I,N,k,W]),z=o(async()=>{j(q),n()},[j,q,n]),H=o(()=>{const e=()=>{T(null),t(),n()},l=async()=>{try{await O(F),T(()=>r.createElement(M,{children:k("Custom_Sound_Has_Been_Deleted"),onClose:e}))}catch(t){C({type:"error",message:t}),n()}},a=()=>{T(null)};T(()=>r.createElement(B,{children:k("Custom_Sound_Delete_Warning"),onDelete:l,onCancel:a}))},[F,t,O,C,n,T,k]),[J]=S(P,"audio/mp3");return r.createElement(v.ScrollableContent,g,r.createElement(p,null,r.createElement(p.Label,null,k("Name")),r.createElement(p.Row,null,r.createElement(h,{value:A,onChange:e=>R(e.currentTarget.value),placeholder:k("Name")}))),r.createElement(p,null,r.createElement(p.Label,{alignSelf:"stretch"},k("Sound_File_mp3")),r.createElement(u,{display:"flex",flexDirection:"row",mbs:"none"},r.createElement(E,{inline:"x4"},r.createElement(m,{square:!0,onClick:J},r.createElement(f,{name:"upload",size:"x20"})),q&&q.name||"none"))),r.createElement(p,null,r.createElement(p.Row,null,r.createElement(d,{stretch:!0,w:"full"},r.createElement(m,{onClick:t},k("Cancel")),r.createElement(m,{primary:!0,onClick:z,disabled:!U},k("Save"))))),r.createElement(p,null,r.createElement(p.Row,null,r.createElement(d,{stretch:!0,w:"full"},r.createElement(m,{primary:!0,danger:!0,onClick:H},r.createElement(f,{name:"trash",mie:"x4"}),k("Delete"))))))}n.link("@babel/runtime/helpers/extends",{default(e){l=e}},0),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){a=e}},1),n.link("react",{default(e){r=e},useCallback(e){o=e},useState(e){s=e},useMemo(e){c=e},useEffect(e){i=e}},0),n.link("@rocket.chat/fuselage",{Box(e){u=e},Button(e){m=e},ButtonGroup(e){d=e},Margins(e){E=e},TextInput(e){h=e},Field(e){p=e},Icon(e){f=e},Skeleton(e){g=e},Throbber(e){k=e},InputBox(e){C=e}},1),n.link("../../../contexts/TranslationContext",{useTranslation(e){x=e}},2),n.link("../../../contexts/ServerContext",{useMethod(e){b=e}},3),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){y=e}},4),n.link("../../../hooks/useFileInput",{useFileInput(e){S=e}},5),n.link("./lib",{validate(e){_=e},createSoundData(e){w=e}},6),n.link("../../../contexts/ModalContext",{useSetModal(e){D=e}},7),n.link("../../../components/VerticalBar",{default(e){v=e}},8),n.link("../../../components/DeleteSuccessModal",{default(e){M=e}},9),n.link("../../../components/DeleteWarningModal",{default(e){B=e}},10),n.link("../../../hooks/useEndpointData",{useEndpointData(e){T=e}},11),n.link("../../../hooks/useAsyncState",{AsyncStatePhase(e){F=e}},12),n.exportDefault(I)}


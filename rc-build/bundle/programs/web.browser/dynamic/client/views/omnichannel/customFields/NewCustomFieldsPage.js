function module(e,t,l){let a,s,n,i,o,r,u,c,d,m,h,k,b,p,C,v,f,x,g;l.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),l.link("react",{default(e){s=e},useCallback(e){n=e},useState(e){i=e}},0),l.link("@rocket.chat/fuselage",{Box(e){o=e},Button(e){r=e},Icon(e){u=e},FieldGroup(e){c=e},ButtonGroup(e){d=e}},1),l.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){m=e}},2),l.link("use-subscription",{useSubscription(e){h=e}},3),l.link("./CustomFieldsForm",{default(e){k=e}},4),l.link("../../../components/Page",{default(e){b=e}},5),l.link("../../../contexts/TranslationContext",{useTranslation(e){p=e}},6),l.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){C=e}},7),l.link("../../../contexts/ServerContext",{useMethod(e){v=e}},8),l.link("../../../contexts/RouterContext",{useRoute(e){f=e}},9),l.link("../../../hooks/useForm",{useForm(e){x=e}},10),l.link("../additionalForms",{formsSubscription(e){g=e}},11);const E={field:"",label:"",scope:"visitor",visibility:!0,regexp:""},F=e=>{let{reload:t}=e;const l=p(),F=C(),[S,y]=i({}),{useCustomFieldsAdditionalForm:w=(()=>{})}=h(g),B=w(),M=f("omnichannel-customfields"),T=n(()=>{M.push({})},[M]),{values:D,handlers:G,hasUnsavedChanges:R}=x(E),U=v("livechat:saveCustomField"),{hasError:W,data:_,hasUnsavedChanges:j}=S,{label:z,field:A}=D,H=!W&&z&&A&&(j||R),I=m(async()=>{try{await U(void 0,a(a({},D),{},{visibility:D.visibility?"visible":"hidden"},_)),F({type:"success",message:l("Saved")}),t(),M.push({})}catch(e){F({type:"error",message:e})}}),N=m(e=>{y(a(a({},S),e))});return s.createElement(b,null,s.createElement(b.Header,{title:l("New_Custom_Field")},s.createElement(d,null,s.createElement(r,{onClick:T},s.createElement(u,{size:"x16",name:"back"}),l("Back")),s.createElement(r,{primary:!0,onClick:I,disabled:!H},l("Save")))),s.createElement(b.ScrollableContentWithShadow,null,s.createElement(o,{maxWidth:"x600",w:"full",alignSelf:"center"},s.createElement(c,null,s.createElement(k,{values:D,handlers:G}),B&&s.createElement(B,{onChange:N,state:D})))))};l.exportDefault(F)}


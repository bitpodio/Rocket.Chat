function module(e,t,a){let n,l,o,c,r,s,i,u,m,d,E,k,h,f,x,g,p,C,v,T,y,A,w,b,D,P,R,S;function _(e){let{_id:t,reload:a}=e;const n=x("DELETE","livechat/users/agent/".concat(t)),l=P(),o=R(),s=f(),i=c(async()=>{const e=await n();!0===e.success&&a()}),u=c(e=>{e.stopPropagation();const t=async()=>{try{await i(),o({type:"success",message:s("Agent_removed")})}catch(e){o({type:"error",message:e})}l()};l(r.createElement(D,{onDelete:t,onCancel:()=>l()}))});return r.createElement(d.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},r.createElement(k,{small:!0,ghost:!0,title:s("Remove"),onClick:u},r.createElement(E,{name:"trash",size:"x16"})))}function M(e){let{reload:t}=e;const a=f(),n=A("id"),l=w("omnichannel-agents"),o=x("DELETE","livechat/users/agent/".concat(n)),s=P(),i=R(),u=c(async()=>{const e=await o();!0===e.success&&(l.push({}),t())}),m=c(e=>{e.stopPropagation();const t=async()=>{try{await u(),i({type:"success",message:a("Agent_removed")})}catch(e){i({type:"error",message:e})}s()};s(r.createElement(D,{onDelete:t,onCancel:()=>s()}))}),d=c(()=>l.push({context:"edit",id:n}));return[r.createElement(T.Action,{key:a("Remove"),title:a("Remove"),label:a("Remove"),onClick:m,icon:"trash"}),r.createElement(T.Action,{key:a("Edit"),title:a("Edit"),label:a("Edit"),onClick:d,icon:"edit"})]}a.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),a.export({RemoveAgentButton:()=>_,AgentInfoActions:()=>M}),a.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){l=e},useMediaQuery(e){o=e},useMutableCallback(e){c=e}},0),a.link("react",{default(e){r=e},useMemo(e){s=e},useCallback(e){i=e},useState(e){u=e}},1),a.link("@rocket.chat/fuselage",{Box(e){m=e},Table(e){d=e},Icon(e){E=e},Button(e){k=e}},2),a.link("../../../components/GenericTable",{default(e){h=e}},3),a.link("../../../contexts/TranslationContext",{useTranslation(e){f=e}},4),a.link("../../../hooks/useEndpointAction",{useEndpointAction(e){x=e}},5),a.link("../../../contexts/AuthorizationContext",{usePermission(e){g=e}},6),a.link("../../../components/NotAuthorizedPage",{default(e){p=e}},7),a.link("./AgentsPage",{default(e){C=e}},8),a.link("./AgentEdit",{default(e){v=e}},9),a.link("./AgentInfo",{default(e){T=e}},10),a.link("../../../components/avatar/UserAvatar",{default(e){y=e}},11),a.link("../../../contexts/RouterContext",{useRouteParameter(e){A=e},useRoute(e){w=e}},12),a.link("../../../components/VerticalBar",{default(e){b=e}},13),a.link("../../../components/DeleteWarningModal",{default(e){D=e}},14),a.link("../../../contexts/ModalContext",{useSetModal(e){P=e}},15),a.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){R=e}},16),a.link("../../../hooks/useEndpointData",{useEndpointData(e){S=e}},17);const H=e=>"asc"===e?1:-1,I=(e,t)=>{let{text:a,itemsPerPage:l,current:o}=e,[c,r]=t;return s(()=>n(n({fields:JSON.stringify({name:1,username:1,emails:1,avatarETag:1}),text:a,sort:JSON.stringify({[c]:H(r),usernames:"name"===c?H(r):void 0})},l&&{count:l}),o&&{offset:o}),[a,l,o,c,r])};function B(){const e=f(),t=g("manage-livechat-agents"),[a,n]=u({text:"",current:0,itemsPerPage:25}),[E,k]=u(["name","asc"]),x=o("(min-width: 1024px)"),D=l(a,500),P=l(E,500),R=I(D,P),H=w("omnichannel-agents"),B=A("context"),N=A("id"),z=c(e=>{const[t,a]=E;k(t!==e?[e,"asc"]:[e,"asc"===a?"desc":"asc"])}),L=c(e=>()=>H.push({context:"info",id:e})),{value:U,reload:J}=S("livechat/users/agent",R),O=s(()=>[r.createElement(h.HeaderCell,{key:"name",direction:E[1],active:"name"===E[0],onClick:z,sort:"name"},e("Name")),x&&r.createElement(h.HeaderCell,{key:"username",direction:E[1],active:"username"===E[0],onClick:z,sort:"username"},e("Username")),r.createElement(h.HeaderCell,{key:"email",direction:E[1],active:"emails.address"===E[0],onClick:z,sort:"emails.address"},e("Email")),r.createElement(h.HeaderCell,{key:"status",direction:E[1],active:"status"===E[0],onClick:z,sort:"status"},e("Livechat_status")),r.createElement(h.HeaderCell,{key:"remove",w:"x60"},e("Remove"))].filter(Boolean),[E,z,e,x]),Q=i(t=>{let{emails:a,_id:n,username:l,name:o,avatarETag:c,statusLivechat:s}=t;return(r.createElement(d.Row,{key:n,tabIndex:0,role:"link",onClick:L(n),action:!0,"qa-user-id":n},r.createElement(d.Cell,{withTruncatedText:!0},r.createElement(m,{display:"flex",alignItems:"center"},r.createElement(y,{size:x?"x28":"x40",title:l,username:l,etag:c}),r.createElement(m,{display:"flex",withTruncatedText:!0,mi:"x8"},r.createElement(m,{display:"flex",flexDirection:"column",alignSelf:"center",withTruncatedText:!0},r.createElement(m,{fontScale:"p2",withTruncatedText:!0,color:"default"},o||l),!x&&o&&r.createElement(m,{fontScale:"p1",color:"hint",withTruncatedText:!0}," ","@".concat(l)," "))))),x&&r.createElement(d.Cell,null,r.createElement(m,{fontScale:"p2",withTruncatedText:!0,color:"hint"},l)," ",r.createElement(m,{mi:"x4"})),r.createElement(d.Cell,{withTruncatedText:!0},a&&a.length&&a[0].address),r.createElement(d.Cell,{withTruncatedText:!0},e("available"===s?"Available":"Not_Available")),r.createElement(_,{_id:n,reload:J})))},[x,J,L,e]),V=i(()=>{if(!B)return"";const t=()=>{H.push({})};return(r.createElement(b,null,r.createElement(b.Header,null,"edit"===B&&e("Edit_User"),"info"===B&&e("User_Info"),r.createElement(b.Close,{onClick:t})),"edit"===B&&r.createElement(v,{uid:N,reload:J}),"info"===B&&r.createElement(T,{uid:N},r.createElement(M,{id:N,reload:J}))))},[e,B,N,H,J]);return t?r.createElement(C,{setParams:n,params:a,onHeaderClick:z,data:U,useQuery:I,reload:J,header:O,renderRow:Q,title:e("Agents")},r.createElement(V,null)):r.createElement(p,null)}a.exportDefault(B)}


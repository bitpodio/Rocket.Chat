function module(e,t,a){let n,l,r,s,o,c,i,m,u,d,x,E,k,g,f,h,p,T,C,v,y,w,M;function b(e){let{_id:t,reload:a}=e;const n=g(),l=f("DELETE","livechat/users/manager/".concat(t)),r=v(),c=y(),i=s(async()=>{const e=await l();!0===e.success&&a()}),m=s(e=>{e.stopPropagation();const t=async()=>{try{await i(),c({type:"success",message:n("Manager_removed")})}catch(e){c({type:"error",message:e})}r()};r(o.createElement(w,{onDelete:t,onCancel:()=>r()}))});return o.createElement(d.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},o.createElement(E,{small:!0,ghost:!0,title:n("Remove"),onClick:m},o.createElement(x,{name:"trash",size:"x16"})))}a.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),a.export({RemoveManagerButton:()=>b,ManagersRoute:()=>P}),a.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){l=e},useMediaQuery(e){r=e},useMutableCallback(e){s=e}},0),a.link("react",{default(e){o=e},useMemo(e){c=e},useCallback(e){i=e},useState(e){m=e}},1),a.link("@rocket.chat/fuselage",{Box(e){u=e},Table(e){d=e},Icon(e){x=e},Button(e){E=e}},2),a.link("../../../components/GenericTable",{default(e){k=e}},3),a.link("../../../contexts/TranslationContext",{useTranslation(e){g=e}},4),a.link("../../../hooks/useEndpointAction",{useEndpointAction(e){f=e}},5),a.link("../../../contexts/AuthorizationContext",{usePermission(e){h=e}},6),a.link("../../../components/NotAuthorizedPage",{default(e){p=e}},7),a.link("./ManagersPage",{default(e){T=e}},8),a.link("../../../components/avatar/UserAvatar",{default(e){C=e}},9),a.link("../../../contexts/ModalContext",{useSetModal(e){v=e}},10),a.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){y=e}},11),a.link("../../../components/DeleteWarningModal",{default(e){w=e}},12),a.link("../../../hooks/useEndpointData",{useEndpointData(e){M=e}},13);const S=e=>"asc"===e?1:-1,D=(e,t)=>{let{text:a,itemsPerPage:l,current:r}=e,[s,o]=t;return c(()=>n(n({fields:JSON.stringify({name:1,username:1,emails:1,avatarETag:1}),text:a,sort:JSON.stringify({[s]:S(o),usernames:"name"===s?S(o):void 0})},l&&{count:l}),r&&{offset:r}),[a,l,r,s,o])};function P(){const e=g(),t=h("manage-livechat-managers"),[a,n]=m({text:"",current:0,itemsPerPage:25}),[x,E]=m(["name","asc"]),f=r("(min-width: 1024px)"),v=s(e=>{const[t,a]=x;E(t!==e?[e,"asc"]:[e,"asc"===a?"desc":"asc"])}),y=l(a,500),w=l(x,500),S=D(y,w),{value:P={},reload:R}=M("livechat/users/manager",S),A=c(()=>[o.createElement(k.HeaderCell,{key:"name",direction:x[1],active:"name"===x[0],onClick:v,sort:"name"},e("Name")),f&&o.createElement(k.HeaderCell,{key:"username",direction:x[1],active:"username"===x[0],onClick:v,sort:"username"},e("Username")),o.createElement(k.HeaderCell,{key:"email",direction:x[1],active:"emails.address"===x[0],onClick:v,sort:"emails.address"},e("Email")),o.createElement(k.HeaderCell,{key:"remove",w:"x60"},e("Remove"))].filter(Boolean),[x,v,e,f]),H=i(e=>{let{emails:t,_id:a,username:n,name:l,avatarETag:r}=e;return(o.createElement(d.Row,{key:a,tabIndex:0,"qa-user-id":a},o.createElement(d.Cell,{withTruncatedText:!0},o.createElement(u,{display:"flex",alignItems:"center"},o.createElement(C,{size:f?"x28":"x40",title:n,username:n,etag:r}),o.createElement(u,{display:"flex",withTruncatedText:!0,mi:"x8"},o.createElement(u,{display:"flex",flexDirection:"column",alignSelf:"center",withTruncatedText:!0},o.createElement(u,{fontScale:"p2",withTruncatedText:!0,color:"default"},l||n),!f&&l&&o.createElement(u,{fontScale:"p1",color:"hint",withTruncatedText:!0}," ","@".concat(n)," "))))),f&&o.createElement(d.Cell,null,o.createElement(u,{fontScale:"p2",withTruncatedText:!0,color:"hint"},n)," ",o.createElement(u,{mi:"x4"})),o.createElement(d.Cell,{withTruncatedText:!0},t&&t.length&&t[0].address),o.createElement(b,{_id:a,reload:R})))},[f,R]);return t?o.createElement(T,{setParams:n,params:a,onHeaderClick:v,data:P,useQuery:D,reload:R,header:A,renderRow:H,title:e("Managers")}):o.createElement(p,null)}a.exportDefault(P)}


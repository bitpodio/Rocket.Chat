function module(e,t,n){let a,l,o,r,i,s,c,d,m,u,k,p,E,h,C,g,x,f,T,w,v,D,b;function y(e){let{_id:t,reload:n}=e;const a=E("DELETE","livechat/department/".concat(t)),l=v(),i=D(),s=p(),c=o(async()=>{const e=await a();!0===e.success&&n()}),k=o(e=>{e.stopPropagation();const t=async()=>{try{await c(),i({type:"success",message:s("Department_removed")})}catch(e){i({type:"error",message:e})}l()};l(r.createElement(w,{onDelete:t,onCancel:()=>l()}))});return r.createElement(d.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},r.createElement(u,{small:!0,ghost:!0,title:s("Remove"),onClick:k},r.createElement(m,{name:"trash",size:"x16"})))}n.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),n.export({RemoveDepartmentButton:()=>y}),n.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){l=e},useMutableCallback(e){o=e}},0),n.link("react",{default(e){r=e},useMemo(e){i=e},useCallback(e){s=e},useState(e){c=e}},1),n.link("@rocket.chat/fuselage",{Table(e){d=e},Icon(e){m=e},Button(e){u=e}},2),n.link("../../../components/GenericTable",{default(e){k=e}},3),n.link("../../../contexts/TranslationContext",{useTranslation(e){p=e}},4),n.link("../../../hooks/useEndpointAction",{useEndpointAction(e){E=e}},5),n.link("../../../contexts/AuthorizationContext",{usePermission(e){h=e}},6),n.link("../../../components/NotAuthorizedPage",{default(e){C=e}},7),n.link("./DepartmentsPage",{default(e){g=e}},8),n.link("./DepartmentEdit",{default(e){x=e}},9),n.link("../../../contexts/RouterContext",{useRouteParameter(e){f=e},useRoute(e){T=e}},10),n.link("../../../components/DeleteWarningModal",{default(e){w=e}},11),n.link("../../../contexts/ModalContext",{useSetModal(e){v=e}},12),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){D=e}},13),n.link("../../../hooks/useEndpointData",{useEndpointData(e){b=e}},14);const R=e=>"asc"===e?1:-1,P=(e,t)=>{let{text:n,itemsPerPage:l,current:o}=e,[r,s]=t;return i(()=>a(a({fields:JSON.stringify({name:1,username:1,emails:1,avatarETag:1}),text:n,sort:JSON.stringify({[r]:R(s),usernames:"name"===r?R(s):void 0})},l&&{count:l}),o&&{offset:o}),[n,l,o,r,s])};function _(){const e=p(),t=h("manage-livechat-departments"),[n,a]=c({text:"",current:0,itemsPerPage:25}),[m,u]=c(["name","asc"]),E=l(n,500),w=l(m,500),v=P(E,w),D=T("omnichannel-departments"),R=f("context"),_=f("id"),A=o(e=>{const[t,n]=m;u(t!==e?[e,"asc"]:[e,"asc"===n?"desc":"asc"])}),N=o(e=>()=>D.push({context:"edit",id:e})),{value:H={},reload:M}=b("livechat/department",v),S=i(()=>[r.createElement(k.HeaderCell,{key:"name",direction:m[1],active:"name"===m[0],onClick:A,sort:"name"},e("Name")),r.createElement(k.HeaderCell,{key:"description",direction:m[1],active:"description"===m[0],onClick:A,sort:"description"},e("Description")),r.createElement(k.HeaderCell,{key:"numAgents",direction:m[1],active:"numAgents"===m[0],onClick:A,sort:"numAgents"},e("Num_Agents")),r.createElement(k.HeaderCell,{key:"enabled",direction:m[1],active:"enabled"===m[0],onClick:A,sort:"enabled"},e("Enabled")),r.createElement(k.HeaderCell,{key:"showOnRegistration",direction:m[1],active:"showOnRegistration"===m[0],onClick:A,sort:"status"},e("Show_on_registration_page")),r.createElement(k.HeaderCell,{key:"remove",w:"x60"},e("Remove"))].filter(Boolean),[m,A,e]),O=s(t=>{let{name:n,_id:a,description:l,numAgents:o,enabled:i,showOnRegistration:s}=t;return(r.createElement(d.Row,{key:a,tabIndex:0,role:"link",onClick:N(a),action:!0,"qa-user-id":a},r.createElement(d.Cell,{withTruncatedText:!0},n),r.createElement(d.Cell,{withTruncatedText:!0},l),r.createElement(d.Cell,{withTruncatedText:!0},o||"0"),r.createElement(d.Cell,{withTruncatedText:!0},e(i?"Yes":"No")),r.createElement(d.Cell,{withTruncatedText:!0},e(s?"Yes":"No")),r.createElement(y,{_id:a,reload:M})))},[N,e,M]);return t?"edit"===R||"new"===R?r.createElement(x,{reload:M,id:_,title:e("edit"===R?"Edit_Department":"New_Department")}):r.createElement(g,{setParams:a,params:n,onHeaderClick:A,data:H,useQuery:P,reload:M,header:S,renderRow:O,title:e("Departments")}):r.createElement(C,null)}n.exportDefault(_)}


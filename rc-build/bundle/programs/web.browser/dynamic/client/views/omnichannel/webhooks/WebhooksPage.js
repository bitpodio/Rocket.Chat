function module(e,t,o){let n,a,l,s,c,r,_,i,h,u,k,m,d,v,w,b,g,L,E,p,f,C,y;o.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),o.link("react",{default(e){a=e},useMemo(e){l=e}},0),o.link("@rocket.chat/fuselage",{Box(e){s=e},Callout(e){c=e},FieldGroup(e){r=e},Field(e){_=e},TextInput(e){i=e},MultiSelect(e){h=e},Button(e){u=e},ButtonGroup(e){k=e}},1),o.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){m=e}},2),o.link("../../../contexts/AuthorizationContext",{usePermission(e){d=e}},3),o.link("../../../contexts/ServerContext",{useMethod(e){v=e}},4),o.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){w=e}},5),o.link("../../../contexts/TranslationContext",{useTranslation(e){b=e}},6),o.link("../../../hooks/useForm",{useForm(e){g=e}},7),o.link("../../../components/Page",{default(e){L=e}},8),o.link("../../../components/ExternalLink",{default(e){E=e}},9),o.link("../../../components/PageSkeleton",{default(e){p=e}},10),o.link("../../../components/NotAuthorizedPage",{default(e){f=e}},11),o.link("../../../hooks/useEndpointData",{useEndpointData(e){C=e}},12),o.link("../../../hooks/useAsyncState",{AsyncStatePhase(e){y=e}},13);const S=e=>e.reduce((e,t)=>{let{_id:o,value:a}=t;return e=n(n({},e),{},{[o]:a})},{}),x=e=>Object.entries(e).reduce((e,t)=>{let[o,n]=t;return n&&(e=[...e,o]),e},[]),T="https://rocket.chat/docs/administrator-guides/livechat/#integrations",M=()=>{const e=b(),{value:t,phase:o,error:n}=C("livechat/integrations.settings"),l=d("view-livechat-webhooks");return l?o===y.LOADING?a.createElement(p,null):t&&t.success&&t.settings&&!n?a.createElement(A,{settings:S(t.settings)}):a.createElement(L,null,a.createElement(L.Header,{title:e("Webhooks")}),a.createElement(L.ScrollableContentWithShadow,null,a.createElement(c,{type:"danger"},e("Error")))):a.createElement(f,null)},U=e=>{let{Livechat_webhookUrl:t,Livechat_secret_token:o,Livechat_webhook_on_start:n,Livechat_webhook_on_close:a,Livechat_webhook_on_chat_taken:l,Livechat_webhook_on_chat_queued:s,Livechat_webhook_on_forward:c,Livechat_webhook_on_offline_msg:r,Livechat_webhook_on_visitor_message:_,Livechat_webhook_on_agent_message:i}=e;const h={Livechat_webhook_on_start:n,Livechat_webhook_on_close:a,Livechat_webhook_on_chat_taken:l,Livechat_webhook_on_chat_queued:s,Livechat_webhook_on_forward:c,Livechat_webhook_on_offline_msg:r,Livechat_webhook_on_visitor_message:_,Livechat_webhook_on_agent_message:i},u=x(h);return{Livechat_webhookUrl:t,Livechat_secret_token:o,sendOn:u}},A=e=>{let{settings:t}=e;const o=b(),c=w(),{values:d,handlers:p,hasUnsavedChanges:f,reset:C,commit:y}=g(U(t)),S=v("livechat:saveIntegration"),x=v("livechat:webhookTest"),{Livechat_webhookUrl:M,Livechat_secret_token:A,sendOn:O}=d,{handleLivechat_webhookUrl:R,handleLivechat_secret_token:W,handleSendOn:q}=p,D=l(()=>[["Livechat_webhook_on_start",o("Chat_start")],["Livechat_webhook_on_close",o("Chat_close")],["Livechat_webhook_on_chat_taken",o("Chat_taken")],["Livechat_webhook_on_chat_queued",o("Chat_queued")],["Livechat_webhook_on_forward",o("Forwarding")],["Livechat_webhook_on_offline_msg",o("Offline_messages")],["Livechat_webhook_on_visitor_message",o("Visitor_message")],["Livechat_webhook_on_agent_message",o("Agent_messages")]],[o]),F=m(async()=>{const e=D.reduce((e,t)=>{let[o]=t;return e=n(n({},e),{},{[o]:O.includes(o)?1:0})},{});try{await S(n({Livechat_webhookUrl:M,Livechat_secret_token:A},e)),c({type:"success",message:o("Saved")}),y()}catch(t){c({type:"error",message:t})}}),I=m(async()=>{try{await x(),c({type:"success",message:o("It_works")}),y()}catch(e){c({type:"error",message:e})}});return a.createElement(L,null,a.createElement(L.Header,{title:o("Webhooks")},a.createElement(k,null,a.createElement(u,{onClick:()=>C()},o("Reset")),a.createElement(u,{onClick:I,disabled:!M||f},o("Send_Test")),a.createElement(u,{primary:!0,onClick:F,disabled:!f},o("Save")))),a.createElement(L.ScrollableContentWithShadow,null,a.createElement(s,{maxWidth:"x600",w:"full",alignSelf:"center"},a.createElement("p",null,o("You_can_use_webhooks_to_easily_integrate_livechat_with_your_CRM")),a.createElement("p",null,a.createElement(E,{to:T},o("Click_here"))," ",o("to_see_more_details_on_how_to_integrate")),a.createElement(r,{style:{marginTop:"1.5rem"}},a.createElement(_,null,a.createElement(_.Label,null,o("Webhook_URL")),a.createElement(_.Row,null,a.createElement(i,{value:M,onChange:R,placeholder:"https://yourdomain.com/webhook/entrypoint"}))),a.createElement(_,null,a.createElement(_.Label,null,o("Secret_token")),a.createElement(_.Row,null,a.createElement(i,{value:A,onChange:W,placeholder:o("Secret_token")}))),a.createElement(_,null,a.createElement(_.Label,null,o("Send_request_on")),a.createElement(_.Row,null,a.createElement(s,{w:"full",display:"flex",alignItems:"stretch",justifyContent:"stretch"},a.createElement(h,{w:"full",value:O,onChange:q,options:D,placeholder:o("Select_an_option")}))))))))};o.exportDefault(M)}


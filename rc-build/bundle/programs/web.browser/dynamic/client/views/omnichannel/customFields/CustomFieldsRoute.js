function module(e,t,l){let a,i,n,o,s,c,r,d,u,m,k,C,x,f,h,b,p,v,E,y,g,T,w,P;function R(e){let{_id:t,reload:l}=e;const a=w("livechat:removeCustomField"),s=y(),d=g(),u=b(),m=c(async()=>{try{await a(t)}catch(e){console.log(e)}l()}),k=c(e=>{e.stopPropagation();const t=async()=>{try{await m(),d({type:"success",message:u("Custom_Field_Removed")})}catch(e){d({type:"error",message:e})}s()};s(r.createElement(T,{onDelete:t,onCancel:()=>s()}))});return r.createElement(i.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},r.createElement(o,{small:!0,ghost:!0,title:u("Remove"),onClick:k},r.createElement(n,{name:"trash",size:"x16"})))}l.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),l.export({RemoveCustomFieldButton:()=>R}),l.link("@rocket.chat/fuselage",{Table(e){i=e},Icon(e){n=e},Button(e){o=e}},0),l.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){s=e},useMutableCallback(e){c=e}},1),l.link("react",{default(e){r=e},useMemo(e){d=e},useCallback(e){u=e},useState(e){m=e}},2),l.link("./CustomFieldsPage",{default(e){k=e}},3),l.link("./NewCustomFieldsPage",{default(e){C=e}},4),l.link("./EditCustomFieldsPage",{default(e){x=e}},5),l.link("../../../contexts/AuthorizationContext",{usePermission(e){f=e}},6),l.link("../../../components/NotAuthorizedPage",{default(e){h=e}},7),l.link("../../../contexts/TranslationContext",{useTranslation(e){b=e}},8),l.link("../../../contexts/RouterContext",{useRouteParameter(e){p=e},useRoute(e){v=e}},9),l.link("../../../components/GenericTable",{default(e){E=e}},10),l.link("../../../contexts/ModalContext",{useSetModal(e){y=e}},11),l.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){g=e}},12),l.link("../../../components/DeleteWarningModal",{default(e){T=e}},13),l.link("../../../contexts/ServerContext",{useMethod(e){w=e}},14),l.link("../../../hooks/useEndpointData",{useEndpointData(e){P=e}},15);const F=e=>"asc"===e?1:-1,M=(e,t)=>{let{text:l,itemsPerPage:i,current:n}=e,[o,s]=t;return d(()=>a(a({fields:JSON.stringify({label:1}),text:l,sort:JSON.stringify({[o]:F(s)})},i&&{count:i}),n&&{offset:n}),[l,i,n,o,s])},S=()=>{const e=b(),t=f("view-livechat-customfields"),[l,a]=m({text:"",current:0,itemsPerPage:25}),[n,o]=m(["field","asc"]),y=s(l,500),g=s(n,500),T=M(y,g),w=v("omnichannel-customfields"),F=p("context"),S=c(e=>{const[t,l]=n;o(t!==e?[e,"asc"]:[e,"asc"===l?"desc":"asc"])}),_=c(e=>()=>w.push({context:"edit",id:e})),{value:D,reload:H}=P("livechat/custom-fields",T),N=d(()=>[r.createElement(E.HeaderCell,{key:"field",direction:n[1],active:"_id"===n[0],onClick:S,sort:"_id"},e("Field")),r.createElement(E.HeaderCell,{key:"label",direction:n[1],active:"label"===n[0],onClick:S,sort:"label"},e("Label")),r.createElement(E.HeaderCell,{key:"scope",direction:n[1],active:"scope"===n[0],onClick:S,sort:"scope"},e("Scope")),r.createElement(E.HeaderCell,{key:"visibility",direction:n[1],active:"visibility"===n[0],onClick:S,sort:"visibility"},e("Visibility")),r.createElement(E.HeaderCell,{key:"remove",w:"x60"},e("Remove"))].filter(Boolean),[n,S,e]),V=u(t=>{let{label:l,_id:a,scope:n,visibility:o}=t;return(r.createElement(i.Row,{key:a,tabIndex:0,role:"link",onClick:_(a),action:!0,"qa-user-id":a},r.createElement(i.Cell,{withTruncatedText:!0},a),r.createElement(i.Cell,{withTruncatedText:!0},l),r.createElement(i.Cell,{withTruncatedText:!0},e("visitor"===n?"Visitor":"Room")),r.createElement(i.Cell,{withTruncatedText:!0},e("visible"===o?"Visible":"Hidden")),r.createElement(R,{_id:a,reload:H})))},[_,H,e]);return t?"new"===F?r.createElement(C,{reload:H}):"edit"===F?r.createElement(x,{reload:H}):r.createElement(k,{setParams:a,params:l,onHeaderClick:S,data:D,useQuery:M,reload:H,header:N,renderRow:V,title:e("Custom_Fields")}):r.createElement(h,null)};l.exportDefault(S)}


function module(e,t,a){let n,l,s,r,o,u,c,i,m,d,p,h,E,v,b,f,k,x,g,w,C,S,D,A,R,U,y,G;function I(e){let{uid:t,reload:a}=e;const n=g(),{value:l,phase:r,error:o}=y("livechat/users/agent/".concat(t)),{value:u,phase:c,error:i}=y("livechat/agents/".concat(t,"/departments")),{value:m,phase:d,error:h}=y("livechat/department");return[r,d,c].includes(G.LOADING)?s.createElement(S,null):o||i||h||!l||!l.user?s.createElement(p,{mbs:"x16"},n("User_not_found")):s.createElement(L,{uid:t,data:l,userDepartments:u,availableDepartments:m,reset:a})}function L(e){let{data:t,userDepartments:a,availableDepartments:S,uid:y,reset:G}=e,I=l(e,["data","userDepartments","availableDepartments","uid","reset"]);const L=g(),M=R("omnichannel-agents"),[_,F]=u(),{user:T}=t||{user:{}},{name:B,username:z,statusLivechat:N}=T,P=A(T),j=r(()=>S&&S.departments?S.departments.map(e=>{let{_id:t,name:a}=e;return[t,a||t]}):[],[S]),O=r(()=>a&&a.departments?a.departments.map(e=>{let{departmentId:t}=e;return t}):[],[a]),V=f(U),W=o({values:{},hasUnsavedChanges:!1}),q=b(e=>{let{hasUnsavedChanges:t}=e,a=l(e,["hasUnsavedChanges"]);W.current=a,t!==_&&F(t)}),{useMaxChatsPerAgent:H=(()=>{})}=V,{values:J,handlers:K,hasUnsavedChanges:Q,commit:X}=D({departments:O,status:N,maxChats:0}),{reset:Y,commit:Z}=W.current,{handleDepartments:$,handleStatus:ee}=K,{departments:te,status:ae}=J,ne=H(),le=k("livechat:saveAgentInfo"),se=k("livechat:changeLivechatStatus"),re=x(),oe=b(()=>{G(),Y()}),ue=b(async()=>{try{await le(y,W.current.values,te),await se({status:ae,agentId:y}),re({type:"success",message:L("saved")}),M.push({})}catch(e){re({type:"error",message:e}),console.log(e)}X(),Z()});return s.createElement(w.ScrollableContent,n({is:"form"},I),s.createElement(p,{alignSelf:"center"},s.createElement(C.Avatar,{margin:"auto",size:"x332",title:z,username:z})),s.createElement(c,null,s.createElement(c.Label,null,L("Name")),s.createElement(c.Row,null,s.createElement(i,{flexGrow:1,value:B,disabled:!0}))),s.createElement(c,null,s.createElement(c.Label,null,L("Username")),s.createElement(c.Row,null,s.createElement(i,{flexGrow:1,value:z,disabled:!0,addon:s.createElement(E,{name:"at",size:"x20"})}))),s.createElement(c,null,s.createElement(c.Label,null,L("Email")),s.createElement(c.Row,null,s.createElement(i,{flexGrow:1,value:P,disabled:!0,addon:s.createElement(E,{name:"mail",size:"x20"})}))),s.createElement(c,null,s.createElement(c.Label,null,L("Departments")),s.createElement(c.Row,null,s.createElement(h,{options:j,value:te,placeholder:L("Select_an_option"),onChange:$,flexGrow:1}))),s.createElement(c,null,s.createElement(c.Label,null,L("Status")),s.createElement(c.Row,null,s.createElement(v,{options:[["available",L("Available")],["not-available",L("Not_Available")]],value:ae,placeholder:L("Select_an_option"),onChange:ee,flexGrow:1}))),ne&&s.createElement(ne,{data:T,onChange:q}),s.createElement(c.Row,null,s.createElement(p,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},s.createElement(d,{inlineEnd:"x4"},s.createElement(m,{flexGrow:1,type:"reset",disabled:!Q&&!_,onClick:oe},L("Reset")),s.createElement(m,{mie:"none",flexGrow:1,disabled:!Q&&!_,onClick:ue},L("Save"))))))}a.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),a.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){l=e}},1),a.export({default:()=>I,AgentEdit:()=>L}),a.link("react",{default(e){s=e},useMemo(e){r=e},useRef(e){o=e},useState(e){u=e}},0),a.link("@rocket.chat/fuselage",{Field(e){c=e},TextInput(e){i=e},Button(e){m=e},Margins(e){d=e},Box(e){p=e},MultiSelect(e){h=e},Icon(e){E=e},Select(e){v=e}},1),a.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){b=e}},2),a.link("use-subscription",{useSubscription(e){f=e}},3),a.link("../../../contexts/ServerContext",{useMethod(e){k=e}},4),a.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){x=e}},5),a.link("../../../contexts/TranslationContext",{useTranslation(e){g=e}},6),a.link("../../../components/VerticalBar",{default(e){w=e}},7),a.link("../../room/contextualBar/UserInfo",{UserInfo(e){C=e}},8),a.link("../../../components/Skeleton",{FormSkeleton(e){S=e}},9),a.link("../../../hooks/useForm",{useForm(e){D=e}},10),a.link("../../../lib/getUserEmailAddress",{getUserEmailAddress(e){A=e}},11),a.link("../../../contexts/RouterContext",{useRoute(e){R=e}},12),a.link("../additionalForms",{formsSubscription(e){U=e}},13),a.link("../../../hooks/useEndpointData",{useEndpointData(e){y=e}},14),a.link("../../../hooks/useAsyncState",{AsyncStatePhase(e){G=e}},15)}


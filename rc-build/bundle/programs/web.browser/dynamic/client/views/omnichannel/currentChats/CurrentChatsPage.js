function module(e,t,l){let a,n,r,o,s,i,c,m,u,d,x,f,p,h,E,g,C,k,D,b,v,y,S,w,F,M,G,T,A;l.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},0),l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},1),l.link("@babel/runtime/helpers/extends",{default(e){r=e}},2),l.link("react",{default(e){o=e},useEffect(e){s=e},useMemo(e){i=e}},0),l.link("@rocket.chat/fuselage",{TextInput(e){c=e},Box(e){m=e},Icon(e){u=e},MultiSelect(e){d=e},Select(e){x=e},InputBox(e){f=e},Menu(e){p=e}},1),l.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){h=e},useLocalStorage(e){E=e}},2),l.link("moment",{default(e){g=e}},3),l.link("use-subscription",{useSubscription(e){C=e}},4),l.link("../additionalForms",{formsSubscription(e){k=e}},5),l.link("../../../components/Page",{default(e){D=e}},6),l.link("../../../contexts/TranslationContext",{useTranslation(e){b=e}},7),l.link("../../../contexts/AuthorizationContext",{usePermission(e){v=e}},8),l.link("../../../components/GenericTable",{default(e){y=e}},9),l.link("../../../contexts/ServerContext",{useMethod(e){S=e}},10),l.link("../../../components/DeleteWarningModal",{default(e){w=e}},11),l.link("../../../contexts/ModalContext",{useSetModal(e){F=e}},12),l.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){M=e}},13),l.link("../../../components/AutoCompleteDepartment",{AutoCompleteDepartment(e){G=e}},14),l.link("../../../components/AutoCompleteAgent",{AutoCompleteAgent(e){T=e}},15),l.link("../../../hooks/useEndpointData",{useEndpointData(e){A=e}},16);const Y=e=>o.createElement(m,r({fontScale:"p2",color:"default"},e)),_=e=>{let{handleClearFilters:t,handleRemoveClosed:l}=e,s=n(e,["handleClearFilters","handleRemoveClosed"]);const i=b(),c=v("remove-closed-livechat-rooms"),d=a({clearFilters:{label:o.createElement(m,null,o.createElement(u,{name:"refresh",size:"x16",marginInlineEnd:"x4"}),i("Clear_filters")),action:t}},c&&{removeClosed:{label:o.createElement(m,{color:"danger"},o.createElement(u,{name:"trash",size:"x16",marginInlineEnd:"x4"}),i("Delete_all_closed_chats")),action:l}});return o.createElement(p,r({alignSelf:"flex-end",small:!1,square:!0,options:d,placement:"bottom-start"},s))},B=e=>{let{setFilter:t,reload:l}=e,a=n(e,["setFilter","reload"]);const u=F(),p=M(),D=b(),{value:v}=A("livechat/custom-fields"),y=[["all",D("All")],["closed",D("Closed")],["opened",D("Open")]],B=i(()=>v&&v.customFields?v.customFields.map(e=>{let{_id:t,label:l}=e;return[t,l]}):[],[v]),[R,H]=E("guest",""),[I,P]=E("servedBy","all"),[z,W]=E("status","all"),[j,q]=E("department","all"),[L,O]=E("from",""),[J,K]=E("to",""),[N,Q]=E("tags",[]),[U,V]=E("tags",[]),X=h(e=>H(e.target.value)),Z=h(e=>P(e)),$=h(e=>W(e)),ee=h(e=>q(e)),te=h(e=>O(e.target.value)),le=h(e=>K(e.target.value)),ae=h(e=>Q(e)),ne=h(e=>V(e)),re=h(()=>{H(""),P("all"),W("all"),q("all"),O(""),K(""),Q([]),V([])}),oe=C(k),{useCurrentChatTags:se=(()=>{})}=oe,ie=se(),ce=h(e=>e.preventDefault()),me=function(e,t){return e[t]="",e};s(()=>{t({guest:R,servedBy:I,status:z,department:j,from:L&&g(new Date(L)).utc().format("YYYY-MM-DDTHH:mm:ss"),to:J&&g(new Date(J)).utc().format("YYYY-MM-DDTHH:mm:ss"),tags:N,customFields:U.reduce(me,{})})},[t,R,I,z,j,L,J,N,U]);const ue=h(()=>{re()}),de=S("livechat:removeAllClosedRooms"),xe=h(async()=>{const e=async()=>{try{await de(),l(),p({type:"success",message:D("Chat_removed")})}catch(e){p({type:"error",message:e})}u()};u(o.createElement(w,{onDelete:e,onCancel:()=>u()}))});return o.createElement(m,r({mb:"x16",is:"form",onSubmit:ce,display:"flex",flexDirection:"column"},a),o.createElement(m,r({display:"flex",flexDirection:"row",flexWrap:"wrap"},a),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},D("Guest")),o.createElement(c,{flexShrink:0,placeholder:D("Guest"),onChange:X,value:R})),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},D("Served_By")),o.createElement(T,{value:I,onChange:Z})),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},D("Department")),o.createElement(G,{value:j,onChange:ee,label:D("All")})),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},D("Status")),o.createElement(x,{flexShrink:0,options:y,value:z,onChange:$,placeholder:D("Status")})),o.createElement(m,{display:"flex",mie:"x8",flexGrow:0,flexDirection:"column"},o.createElement(Y,{mb:"x4"},D("From")),o.createElement(f,{type:"date",flexShrink:0,placeholder:D("From"),onChange:te,value:L})),o.createElement(m,{display:"flex",mie:"x8",flexGrow:0,flexDirection:"column"},o.createElement(Y,{mb:"x4"},D("To")),o.createElement(f,{type:"date",flexShrink:0,placeholder:D("To"),onChange:le,value:J})),o.createElement(_,{handleClearFilters:ue,handleRemoveClosed:xe})),ie&&o.createElement(m,r({display:"flex",flexDirection:"row",marginBlockStart:"x8"},a),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},D("Tags")),o.createElement(ie,{value:N,handler:ae}))),v&&o.createElement(m,r({display:"flex",flexDirection:"row",marginBlockStart:"x8"},a),o.createElement(m,{display:"flex",mie:"x8",flexGrow:1,flexDirection:"column"},o.createElement(Y,{mb:"x4"},D("Custom_Fields")),o.createElement(d,r({options:B,value:U,onChange:ne,flexGrow:1},a)))))};function R(e){let{data:t,header:l,setParams:a,params:s,title:i,renderRow:c,reload:m,children:u}=e;return(o.createElement(D,{flexDirection:"row"},o.createElement(D,null,o.createElement(D.Header,{title:i}),o.createElement(D.Content,null,o.createElement(y,{header:l,renderRow:c,results:t&&t.rooms,total:t&&t.total,setParams:a,params:s,reload:m,renderFilter:e=>{let{onChange:t}=e,l=n(e,["onChange"]);return(o.createElement(B,r({setFilter:t},l)))}}))),u))}l.exportDefault(R)}


function module(e,t,n){let a,l,r,s,c,i,o,u,m,d,g,f,p,x,E,h,k,y,T,C,L;function A(e){let{agentList:t,setAgentList:n}=e,s=r(e,["agentList","setAgentList"]);const u=E(),[d,g]=o(),p=h("GET","livechat/users/agent/".concat(d)),x=C(),k=c(e=>g(e)),y=c(async()=>{if(!d)return;const{user:e}=await p();0===t.filter(t=>t.agentId===e._id).length?(n([l(l({},e),{},{agentId:e._id}),...t]),g()):x({type:"error",message:u("This_agent_was_already_selected")})});return i.createElement(m,a({display:"flex",alignItems:"center"},s),i.createElement(L,{empty:!0,value:d,onChange:k}),i.createElement(f,{disabled:!d,onClick:y,mis:"x8",primary:!0},u("Add")))}function I(e){let{agentId:t,setAgentList:n,agentList:a}=e;const l=T(),r=C(),s=E(),o=c(e=>{e.stopPropagation();const c=async()=>{const e=a.filter(e=>e.agentId!==t);n(e),r({type:"success",message:s("Agent_removed")}),l()};l(i.createElement(y,{onDelete:c,onCancel:()=>l()}))});return i.createElement(f,{small:!0,ghost:!0,title:s("Remove"),onClick:o},i.createElement(g,{name:"trash",size:"x16"}))}function b(e){let{agentId:t,setAgentList:n,agentList:a}=e;const l=E(),[r,s]=o(a.find(e=>e.agentId===t).count||0),u=c(async e=>{const l=Number(e.currentTarget.value);s(l),n(a.map(e=>(e.agentId===t&&(e.count=l),e)))});return i.createElement(m,{display:"flex"},i.createElement(p,{flexShrink:1,key:"".concat(t,"-count"),title:l("Count"),value:r,onChange:u}))}function v(e){let{agentId:t,setAgentList:n,agentList:a}=e;const l=E(),[r,s]=o(a.find(e=>e.agentId===t).order||0),u=c(async e=>{const l=Number(e.currentTarget.value);s(l),n(a.map(e=>(e.agentId===t&&(e.order=l),e)))});return i.createElement(m,{display:"flex"},i.createElement(p,{flexShrink:1,key:"".concat(t,"-order"),title:l("Order"),value:r,onChange:u}))}n.link("@babel/runtime/helpers/extends",{default(e){a=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default(e){l=e}},1),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){r=e}},2),n.export({RemoveAgentButton:()=>I,Count:()=>b,Order:()=>v}),n.link("@rocket.chat/fuselage-hooks",{useMediaQuery(e){s=e},useMutableCallback(e){c=e}},0),n.link("react",{default(e){i=e},useState(e){o=e},useEffect(e){u=e}},1),n.link("@rocket.chat/fuselage",{Box(e){m=e},Table(e){d=e},Icon(e){g=e},Button(e){f=e},NumberInput(e){p=e}},2),n.link("../../../components/GenericTable",{default(e){x=e}},3),n.link("../../../contexts/TranslationContext",{useTranslation(e){E=e}},4),n.link("../../../hooks/useEndpointAction",{useEndpointAction(e){h=e}},5),n.link("../../../components/avatar/UserAvatar",{default(e){k=e}},6),n.link("../../../components/DeleteWarningModal",{default(e){y=e}},7),n.link("../../../contexts/ModalContext",{useSetModal(e){T=e}},8),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){C=e}},9),n.link("../../../components/AutoCompleteAgent",{AutoCompleteAgent(e){L=e}},10);const w=i.memo(e=>{let{agentId:t,username:n,name:a,avatarETag:l,mediaQuery:r,agentList:s,setAgentList:c}=e;return(i.createElement(d.Row,{key:t,tabIndex:0,role:"link",action:!0,"qa-user-id":t},i.createElement(d.Cell,{withTruncatedText:!0},i.createElement(m,{display:"flex",alignItems:"center"},i.createElement(k,{size:r?"x28":"x40",title:n,username:n,etag:l}),i.createElement(m,{display:"flex",withTruncatedText:!0,mi:"x8"},i.createElement(m,{display:"flex",flexDirection:"column",alignSelf:"center",withTruncatedText:!0},i.createElement(m,{fontScale:"p2",withTruncatedText:!0,color:"default"},a||n),!r&&a&&i.createElement(m,{fontScale:"p1",color:"hint",withTruncatedText:!0}," ","@".concat(n)," "))))),i.createElement(d.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},i.createElement(b,{agentId:t,agentList:s,setAgentList:c})),i.createElement(d.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},i.createElement(v,{agentId:t,agentList:s,setAgentList:c})),i.createElement(d.Cell,{fontScale:"p1",color:"hint"},i.createElement(I,{agentId:t,agentList:s,setAgentList:c}))))});function S(e){let{agents:t,setAgentListFinal:n}=e;const l=E(),[r,c]=o(t&&JSON.parse(JSON.stringify(t))||[]);u(()=>n(r),[r,n]);const m=s("(min-width: 1024px)");return(i.createElement(i.Fragment,null,i.createElement(A,{agentList:r,setAgentList:c}),i.createElement(x,{header:i.createElement(i.Fragment,null,i.createElement(x.HeaderCell,{key:"name",w:"x200"},l("Name")),i.createElement(x.HeaderCell,{key:"Count",w:"x140"},l("Count")),i.createElement(x.HeaderCell,{key:"Order",w:"x120"},l("Order")),i.createElement(x.HeaderCell,{key:"remove",w:"x40"},l("Remove"))),results:r,total:null==r?void 0:r.length,pi:"x24"},e=>i.createElement(w,a({key:e._id,mediaQuery:m,agentList:r,setAgentList:c},e)))))}n.exportDefault(S)}


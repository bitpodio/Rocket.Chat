function module(e,t,n){let i,a,l,u,s,c,r,o,h,d,v,m,g,k,b,A,p;n.link("@babel/runtime/helpers/objectSpread2",{default(e){i=e}},0),n.link("react",{default(e){a=e},useState(e){l=e},useEffect(e){u=e},useCallback(e){s=e},useMemo(e){c=e}},0),n.link("../../app/notifications/client",{Notifications(e){r=e}},1),n.link("../contexts/OmnichannelContext",{OmnichannelContext(e){o=e}},2),n.link("../hooks/useReactiveValue",{useReactiveValue(e){h=e}},3),n.link("../contexts/UserContext",{useUser(e){d=e},useUserId(e){v=e}},4),n.link("../contexts/AuthorizationContext",{usePermission(e){m=e}},5),n.link("../contexts/SettingsContext",{useSetting(e){g=e}},6),n.link("../../app/livechat/client/collections/LivechatInquiry",{LivechatInquiry(e){k=e}},7),n.link("../../app/livechat/client/lib/stream/queueManager",{initializeLivechatInquiryStream(e){b=e}},8),n.link("../hooks/useMethodData",{useMethodData(e){A=e}},9),n.link("../hooks/useAsyncState",{AsyncStatePhase(e){p=e}},10);const _=[],f={inquiries:{enabled:!1},enabled:!1,agentAvailable:!1,showOmnichannelQueueLink:!1},x=()=>{const e=v(),t=g("Livechat_guest_pool_max_number_incoming_livechats_displayed");return u(()=>{const t=async()=>{b(e)};return(async()=>{b(e),r.onUser("departmentAgentData",t)})(),()=>{r.unUser("departmentAgentData",t)}},[e]),h(s(()=>k.find({status:"queued",$or:[{defaultAgent:{$exists:!1}},{"defaultAgent.agentId":e}]},{sort:{queueOrder:1,estimatedWaitingTimeQueue:1,estimatedServiceTimeAt:1},limit:t}).fetch(),[t,e]))},L=e=>{let{children:t}=e;return(a.createElement(o.Provider,{value:f,children:t}))},q=e=>{let{value:t,children:n}=e;const l=x(),u=g("Livechat_show_queue_list_link")&&t.agentAvailable,s=c(()=>i(i({},t),{},{inquiries:{enabled:!0,queue:l},showOmnichannelQueueLink:u}),[t,l,u]);return a.createElement(o.Provider,{value:s,children:n})},y=e=>{let{children:t}=e;const n=g("Livechat_Routing_Method"),[s,c]=l(i(i({},f),{},{enabled:!0})),r=d(),{value:h,phase:v,reload:k}=A("livechat:getRoutingConfig",_),b=m("view-livechat-queue");return u(()=>{v!==p.LOADING&&k()},[n,k]),u(()=>{c(e=>i(i({},e),{},{agentAvailable:"available"===(null==r?void 0:r.statusLivechat)}))},[null==r?void 0:r.statusLivechat]),h&&r?b&&h.showQueue&&!h.autoAssignAgent&&s.agentAvailable?a.createElement(q,{value:s,children:t}):a.createElement(o.Provider,{value:s,children:t}):a.createElement(L,{children:t})},E=a.memo(e=>{let{children:t}=e;const n=g("Livechat_enabled"),i=m("view-l-room");return n&&i?a.createElement(y,{children:t}):a.createElement(L,{children:t})});n.exportDefault(E)}


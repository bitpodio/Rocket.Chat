function module(e,t,l){let n,a,r,s,o,u,i,m,c,d,h,f,p,E,b;l.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),l.link("@babel/runtime/helpers/objectSpread2",{default(e){a=e}},1),l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){r=e}},2),l.export({default:()=>C}),l.link("react",{default(e){s=e},useMemo(e){o=e},useEffect(e){u=e},useState(e){i=e}},0),l.link("@rocket.chat/fuselage",{TextInput(e){m=e},Select(e){c=e},Field(e){d=e}},1),l.link("../contexts/SettingsContext",{useSetting(e){h=e}},2),l.link("../hooks/useForm",{useForm(e){f=e}},3),l.link("../contexts/TranslationContext",{useTranslation(e){p=e}},4),l.link("../lib/capitalize",{capitalize(e){E=e}},5),l.link("../hooks/useComponentDidUpdate",{useComponentDidUpdate(e){b=e}},6);const F=e=>{let{label:t,name:l,required:n,minLength:a,maxLength:r,setState:c,state:h,className:f,setCustomFieldsError:E=(()=>[])}=e;const F=p(),[g,k]=i(""),C=o(()=>{const e=[];return!h&&n&&e.push(F("The_field_is_required",t||l)),h.length<a&&h.length>0&&e.push(F("Min_length_is",a)),e.join(", ")},[h,n,a,F,t,l]);return u(()=>{E(e=>C?[...e,{name:l}]:e.filter(e=>e.name!==l))},[l,E,C]),b(()=>{k(C)},[C]),o(()=>s.createElement(d,{className:f},s.createElement(d.Label,null,t||F(l),n&&"*"),s.createElement(d.Row,null,s.createElement(m,{name:l,error:g,maxLength:r,flexGrow:1,value:h,onChange:e=>c(e.currentTarget.value)})),s.createElement(d.Error,null,g)),[f,t,F,l,n,g,r,h,c])},g=e=>{let{label:t,name:l,required:n,options:a={},setState:r,state:m,className:h,setCustomFieldsError:f=(()=>[])}=e;const E=p(),[F,g]=i(""),k=o(()=>Object.values(a).map(e=>[e,e]),[a]),C=o(()=>!m.length&&n?E("The_field_is_required",t||l):"",[l,t,n,m.length,E]);return u(()=>{f(e=>C?[...e,{name:l}]:e.filter(e=>e.name!==l))},[l,f,C]),b(()=>{g(C)},[C]),o(()=>s.createElement(d,{className:h},s.createElement(d.Label,null,t||E(l),n&&"*"),s.createElement(d.Row,null,s.createElement(c,{name:l,error:F,flexGrow:1,value:m,options:k,onChange:e=>r(e)})),s.createElement(d.Error,null,F)),[h,t,E,l,n,F,m,k,r])},k=e=>{let{formValues:t,formHandlers:l,customFields:o}=e,u=r(e,["formValues","formHandlers","customFields"]);return Object.entries(o).map(e=>{let[r,o]=e;const i=a({key:r,name:r,setState:l["handle".concat(E(r))],state:t[r]},o);return"select"===o.type?s.createElement(g,n({},i,u)):"text"===o.type?s.createElement(F,n({},i,u)):null})};function C(e){let{jsonCustomFields:t,customFieldsData:l,setCustomFieldsData:m,onLoadFields:c=(()=>{})}=e,d=r(e,["jsonCustomFields","customFieldsData","setCustomFieldsData","onLoadFields"]);const p=h("Accounts_CustomFields"),[E]=i(()=>{try{return t||JSON.parse(p||"{}")}catch(e){return{}}}),b=Boolean(Object.values(E).length),F=o(()=>Object.entries(E).reduce((e,t)=>{var l;let[n,a]=t;return e[n]=null!==(l=a.defaultValue)&&void 0!==l?l:"",e},{}),[E]),{values:g,handlers:C}=f(a(a({},F),l));return u(()=>{c(b),b&&m(g)},[b,c,m,g]),b?s.createElement(k,n({formValues:g,formHandlers:C,customFields:E},d)):null}}


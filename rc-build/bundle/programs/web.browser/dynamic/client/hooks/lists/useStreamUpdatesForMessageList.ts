function module(e,s,t){let n,r,o;t.export({useStreamUpdatesForMessageList:()=>u}),t.link("react",{useEffect(e){n=e}},0),t.link("../../contexts/ServerContext",{useStream(e){r=e}},1),t.link("../../lib/minimongo",{createFilterFromQuery(e){o=e}},2);const i=e=>{const s={ts:e.ts};return e.excludePinned&&(s.pinned={$ne:!0}),e.ignoreDiscussion&&(s.drid={$exists:!1}),e.users&&e.users.length&&(s["u.username"]={$in:e.users}),o(s)},u=(e,s,t)=>{const o=r("room-messages"),u=r("notify-room");n(()=>{if(!s||!t)return void e.clear();const n=o(t,s=>{e.handle(s)}),r=u("".concat(t,"/deleteMessage"),s=>{let{_id:t}=s;e.remove(t)}),c=u("".concat(t,"/deleteMessageBulk"),s=>{const t=i(s);e.prune(t)});return()=>{n(),r(),c()}},[o,u,s,t,e])}}


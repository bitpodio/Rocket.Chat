function module(e,t,n){let a,l,r,o,s,i,c,u,m,d,h,k,C,E,f,p,x,b,T;n.link("@babel/runtime/helpers/extends",{default(e){a=e}},0),n.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){l=e}},1),n.link("@babel/runtime/helpers/objectSpread2",{default(e){r=e}},2),n.export({default:()=>w}),n.link("react",{default(e){o=e},useState(e){s=e},useMemo(e){i=e},useCallback(e){c=e},useEffect(e){u=e}},0),n.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){m=e},useMutableCallback(e){d=e}},1),n.link("@rocket.chat/fuselage",{Table(e){h=e}},2),n.link("../../contexts/TranslationContext",{useTranslation(e){k=e}},3),n.link("../../hooks/useEndpointData",{useEndpointData(e){C=e}},4),n.link("../../components/GenericTable",{default(e){E=e}},5),n.link("../../components/FilterByText",{default(e){f=e}},6),n.link("../../contexts/RouterContext",{useRoute(e){p=e}},7),n.link("../../hooks/useFormatDate",{useFormatDate(e){x=e}},8),n.link("../../contexts/AuthorizationContext",{usePermission(e){b=e}},9),n.link("../../components/NotAuthorizedPage",{NotAuthorizedPage(e){T=e}},10);const v=(e,t)=>{let{text:n,itemsPerPage:a,current:l}=e,[o,s]=t;return i(()=>r(r({term:n,sort:JSON.stringify({[o]:"asc"===s?1:-1})},a&&{count:a}),l&&{offset:l}),[o,l,s,a,n])};function g(e){let{setContactReload:t}=e;const[n,r]=s({text:"",current:0,itemsPerPage:25}),[b,T]=s(["username","asc"]),g=k(),w=m(n,500),y=m(b,500),P=v(w,y),N=p("omnichannel-directory"),B=x(),D=d(e=>{const[t,n]=b;if(t===e)return T([e,"asc"===n?"desc":"asc"]);T([e,"asc"])}),H=d(()=>N.push({tab:"contacts",context:"new"})),R=d(e=>()=>N.push({tab:"contacts",context:"info",id:e})),{value:F,reload:z}=C("livechat/visitors.search",P);u(()=>{t(()=>z)},[z,t]);const A=i(()=>[o.createElement(E.HeaderCell,{key:"username",direction:b[1],active:"username"===b[0],onClick:D,sort:"username"},g("Username")),o.createElement(E.HeaderCell,{key:"name",direction:b[1],active:"name"===b[0],onClick:D,sort:"name"},g("Name")),o.createElement(E.HeaderCell,{key:"phone",direction:b[1],active:"phone"===b[0],onClick:D,sort:"phone"},g("Phone")),o.createElement(E.HeaderCell,{key:"email",direction:b[1],active:"visitorEmails.address"===b[0],onClick:D,sort:"visitorEmails.address"},g("Email")),o.createElement(E.HeaderCell,{key:"lastchat",direction:b[1],active:"lastchat"===b[0],onClick:D,sort:"visitorEmails.address"},g("Last_Chat"))].filter(Boolean),[b,D,g]),S=c(e=>{let{_id:t,username:n,name:a,visitorEmails:l,phone:r,lastChat:s}=e;return(o.createElement(h.Row,{key:t,tabIndex:0,role:"link",onClick:R(t),action:!0,"qa-user-id":t},o.createElement(h.Cell,{withTruncatedText:!0},n),o.createElement(h.Cell,{withTruncatedText:!0},a),o.createElement(h.Cell,{withTruncatedText:!0},r&&r.length&&r[0].phoneNumber),o.createElement(h.Cell,{withTruncatedText:!0},l&&l.length&&l[0].address),o.createElement(h.Cell,{withTruncatedText:!0},s&&B(s.ts))))},[B,R]);return o.createElement(E,{header:A,renderRow:S,results:F&&F.visitors,total:F&&F.total,setParams:r,params:n,renderFilter:e=>{let{onChange:t}=e,n=l(e,["onChange"]);return(o.createElement(f,a({displayButton:!0,textButton:g("New_Contact"),onButtonClick:H,onChange:t},n)))}})}function w(e){const t=b("view-l-room");return t?o.createElement(g,e):o.createElement(T,null)}}


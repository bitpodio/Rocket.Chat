function module(e,t,l){let n,a,r,o,i,c,s,d,m,u,k,f,h,x,p,C,E,w,T,b,g;l.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),l.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){a=e}},1),l.link("@babel/runtime/helpers/objectSpread2",{default(e){r=e}},2),l.export({default:()=>A}),l.link("react",{default(e){o=e},useState(e){i=e},useMemo(e){c=e},useCallback(e){s=e}},0),l.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){d=e},useMutableCallback(e){m=e}},1),l.link("@rocket.chat/fuselage",{Table(e){u=e},Tag(e){k=e},Box(e){f=e}},2),l.link("moment",{default(e){h=e}},3),l.link("meteor/meteor",{Meteor(e){x=e}},4),l.link("meteor/kadira:flow-router",{FlowRouter(e){p=e}},5),l.link("../../contexts/TranslationContext",{useTranslation(e){C=e}},6),l.link("../../hooks/useEndpointData",{useEndpointData(e){E=e}},7),l.link("../../components/GenericTable",{default(e){w=e}},8),l.link("../../components/FilterByText",{default(e){T=e}},9),l.link("../../contexts/AuthorizationContext",{usePermission(e){b=e}},10),l.link("../../components/NotAuthorizedPage",{default(e){g=e}},11);const y=(e,t,l)=>{let{text:n,itemsPerPage:a,current:o}=e,[i,s]=t;return c(()=>r(r({sort:JSON.stringify({[i]:"asc"===s?1:-1}),open:!1,roomName:n,agents:[l]},a&&{count:a}),o&&{offset:o}),[i,o,s,a,l,n])},v=()=>{const[e,t]=i({text:"",current:0,itemsPerPage:25}),[l,r]=i(["closedAt","desc"]),b=C(),g=d(e,500),v=d(l,500),A=x.userId(),D=y(g,v,A),P=m(e=>{const[t,n]=l;r(t!==e?[e,"asc"]:[e,"asc"===n?"desc":"asc"])}),S=m(e=>{p.go("live",{id:e})}),{value:H}=E("livechat/rooms",D),_=c(()=>[o.createElement(w.HeaderCell,{key:"fname",direction:l[1],active:"fname"===l[0],onClick:P,sort:"fname",w:"x400"},b("Contact_Name")),o.createElement(w.HeaderCell,{key:"department",direction:l[1],active:"department"===l[0],onClick:P,sort:"department",w:"x200"},b("Department")),o.createElement(w.HeaderCell,{key:"ts",direction:l[1],active:"ts"===l[0],onClick:P,sort:"ts",w:"x200"},b("Started_At")),o.createElement(w.HeaderCell,{key:"chatDuration",direction:l[1],active:"chatDuration"===l[0],onClick:P,sort:"chatDuration",w:"x120"},b("Chat_Duration")),o.createElement(w.HeaderCell,{key:"closedAt",direction:l[1],active:"closedAt"===l[0],onClick:P,sort:"closedAt",w:"x200"},b("Closed_At"))].filter(Boolean),[l,P,b]),L=s(e=>{let{_id:t,fname:l,ts:n,closedAt:a,department:r,tags:i}=e;return(o.createElement(u.Row,{key:t,tabIndex:0,role:"link",onClick:()=>S(t),action:!0,"qa-user-id":t},o.createElement(u.Cell,{withTruncatedText:!0},o.createElement(f,{display:"flex",flexDirection:"column"},o.createElement(f,{color:"default",withTruncatedText:!0},l),i&&o.createElement(f,{color:"hint",display:"flex","flex-direction":"row"},i.map(e=>o.createElement(f,{style:{marginTop:4,whiteSpace:"nowrap",overflow:e.length>10?"hidden":"visible",textOverflow:"ellipsis"},key:e,mie:"x4"},o.createElement(k,{style:{display:"inline"},disabled:!0},e)))))),o.createElement(u.Cell,{withTruncatedText:!0},r?r.name:""),o.createElement(u.Cell,{withTruncatedText:!0},h(n).format("L LTS")),o.createElement(u.Cell,{withTruncatedText:!0},h(a).from(h(n),!0)),o.createElement(u.Cell,{withTruncatedText:!0},h(a).format("L LTS"))))},[S]);return o.createElement(w,{header:_,renderRow:L,results:H&&H.rooms,total:H&&H.total,setParams:t,params:e,renderFilter:e=>{let{onChange:t}=e,l=a(e,["onChange"]);return(o.createElement(T,n({onChange:t},l)))}})};function A(e){const t=b("view-l-room");return t?o.createElement(v,e):o.createElement(g,null)}}


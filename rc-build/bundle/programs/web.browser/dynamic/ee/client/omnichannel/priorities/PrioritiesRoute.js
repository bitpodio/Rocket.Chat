function module(e,t,n){let i,a,r,l,o,c,s,u,d,m,k,p,h,E,x,C,y,f,P,T,g,v,w,M,b;function D(e){let{_id:t,reload:n}=e;const i=h("livechat:removePriority"),a=w(),o=M(),c=p(),s=y("omnichannel-priorities"),k=r(async()=>{try{await i(t)}catch(e){console.log(e)}n()}),E=r(e=>{e.stopPropagation();const t=async()=>{try{await k(),o({type:"success",message:c("Priority_removed")}),s.push({})}catch(e){o({type:"error",message:e})}a()};a(l.createElement(v,{onDelete:t,onCancel:()=>a()}))});return l.createElement(u.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},l.createElement(m,{small:!0,ghost:!0,title:c("Remove"),onClick:E},l.createElement(d,{name:"trash",size:"x16"})))}n.link("@babel/runtime/helpers/objectSpread2",{default(e){i=e}},0),n.export({RemovePriorityButton:()=>D}),n.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){a=e},useMutableCallback(e){r=e}},0),n.link("react",{default(e){l=e},useMemo(e){o=e},useCallback(e){c=e},useState(e){s=e}},1),n.link("@rocket.chat/fuselage",{Table(e){u=e},Icon(e){d=e},Button(e){m=e}},2),n.link("../../../../client/components/GenericTable",{default(e){k=e}},3),n.link("../../../../client/contexts/TranslationContext",{useTranslation(e){p=e}},4),n.link("../../../../client/contexts/ServerContext",{useMethod(e){h=e}},5),n.link("../../../../client/contexts/AuthorizationContext",{usePermission(e){E=e}},6),n.link("../../../../client/components/NotAuthorizedPage",{default(e){x=e}},7),n.link("../../../../client/contexts/RouterContext",{useRouteParameter(e){C=e},useRoute(e){y=e}},8),n.link("../../../../client/components/VerticalBar",{default(e){f=e}},9),n.link("./PrioritiesPage",{default(e){P=e}},10),n.link("./EditPriority",{PriorityEditWithData(e){T=e},PriorityNew(e){g=e}},11),n.link("../../../../client/components/DeleteWarningModal",{default(e){v=e}},12),n.link("../../../../client/contexts/ModalContext",{useSetModal(e){w=e}},13),n.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch(e){M=e}},14),n.link("../../../../client/hooks/useEndpointData",{useEndpointData(e){b=e}},15);const R=e=>"asc"===e?1:-1,_=(e,t)=>{let{text:n,itemsPerPage:a,current:r}=e,[l,c]=t;return o(()=>i(i({fields:JSON.stringify({name:1}),text:n,sort:JSON.stringify({[l]:R(c),usernames:"name"===l?R(c):void 0})},a&&{count:a}),r&&{offset:r}),[n,a,r,l,c])};function I(){const e=p(),t=E("manage-livechat-priorities"),[n,i]=s({text:"",current:0,itemsPerPage:25}),[d,m]=s(["name","asc"]),h=a(n,500),v=a(d,500),w=_(h,v),M=y("omnichannel-priorities"),R=C("context"),I=C("id"),S=r(e=>{const[t,n]=d;m(t!==e?[e,"asc"]:[e,"asc"===n?"desc":"asc"])}),H=r(e=>()=>M.push({context:"edit",id:e})),{value:N={},reload:B}=b("livechat/priorities.list",w),z=o(()=>[l.createElement(k.HeaderCell,{key:"name",direction:d[1],active:"name"===d[0],onClick:S,sort:"name"},e("Name")),l.createElement(k.HeaderCell,{key:"description",direction:d[1],active:"description"===d[0],onClick:S,sort:"description"},e("Description")),l.createElement(k.HeaderCell,{key:"dueTimeInMinutes",direction:d[1],active:"dueTimeInMinutes"===d[0],onClick:S,sort:"dueTimeInMinutes"},e("Estimated_due_time")),l.createElement(k.HeaderCell,{key:"remove",w:"x60"},e("Remove"))].filter(Boolean),[d,S,e]),A=c(t=>{let{_id:n,name:i,description:a,dueTimeInMinutes:r}=t;return(l.createElement(u.Row,{key:n,tabIndex:0,role:"link",onClick:H(n),action:!0,"qa-user-id":n},l.createElement(u.Cell,{withTruncatedText:!0},i),l.createElement(u.Cell,{withTruncatedText:!0},a),l.createElement(u.Cell,{withTruncatedText:!0},r,"  ",e("minutes")),l.createElement(D,{_id:n,reload:B})))},[B,H,e]),J=c(()=>{if(!R)return"";const t=()=>{M.push({})};return(l.createElement(f,null,l.createElement(f.Header,null,"edit"===R&&e("Edit_Priority"),"new"===R&&e("New_Priority"),l.createElement(f.Close,{onClick:t})),"edit"===R&&l.createElement(T,{priorityId:I,reload:B}),"new"===R&&l.createElement(g,{reload:B})))},[e,R,I,M,B]);return t?l.createElement(P,{setParams:i,params:n,onHeaderClick:S,data:N,useQuery:_,reload:B,header:z,renderRow:A,title:e("Priorities")},l.createElement(J,null)):l.createElement(x,null)}n.exportDefault(I)}


function module(e,t,n){let l,a,i,o,c,s,r,u,d,m,k,h,x,E,C,f,p,v,y,g,b,w,T,U,P;function D(e){let{_id:t,reload:n}=e;const l=x("livechat:removeUnit"),a=p("omnichannel-units"),c=T(),s=U(),r=h(),k=i(async()=>{try{await l(t)}catch(e){console.log(e)}a.push({}),n()}),E=i(e=>{e.stopPropagation();const t=async()=>{try{await k(),s({type:"success",message:r("Unit_removed")})}catch(e){s({type:"error",message:e})}c()};c(o.createElement(w,{onDelete:t,onCancel:()=>c()}))});return o.createElement(u.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},o.createElement(m,{small:!0,ghost:!0,title:r("Remove"),onClick:E},o.createElement(d,{name:"trash",size:"x16"})))}n.link("@babel/runtime/helpers/objectSpread2",{default(e){l=e}},0),n.export({RemoveUnitButton:()=>D}),n.link("@rocket.chat/fuselage-hooks",{useDebouncedValue(e){a=e},useMutableCallback(e){i=e}},0),n.link("react",{default(e){o=e},useMemo(e){c=e},useCallback(e){s=e},useState(e){r=e}},1),n.link("@rocket.chat/fuselage",{Table(e){u=e},Icon(e){d=e},Button(e){m=e}},2),n.link("../../../../client/components/GenericTable",{default(e){k=e}},3),n.link("../../../../client/contexts/TranslationContext",{useTranslation(e){h=e}},4),n.link("../../../../client/contexts/ServerContext",{useMethod(e){x=e}},5),n.link("../../../../client/contexts/AuthorizationContext",{usePermission(e){E=e}},6),n.link("../../../../client/components/NotAuthorizedPage",{default(e){C=e}},7),n.link("../../../../client/contexts/RouterContext",{useRouteParameter(e){f=e},useRoute(e){p=e}},8),n.link("../../../../client/components/VerticalBar",{default(e){v=e}},9),n.link("./UnitsPage",{default(e){y=e}},10),n.link("./EditUnit",{UnitEditWithData(e){g=e},UnitNew(e){b=e}},11),n.link("../../../../client/components/DeleteWarningModal",{default(e){w=e}},12),n.link("../../../../client/contexts/ModalContext",{useSetModal(e){T=e}},13),n.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch(e){U=e}},14),n.link("../../../../client/hooks/useEndpointData",{useEndpointData(e){P=e}},15);const M=e=>"asc"===e?1:-1,R=(e,t)=>{let{text:n,itemsPerPage:a,current:i}=e,[o,s]=t;return c(()=>l(l({fields:JSON.stringify({name:1}),text:n,sort:JSON.stringify({[o]:M(s),usernames:"name"===o?M(s):void 0})},a&&{count:a}),i&&{offset:i}),[n,a,i,o,s])};function S(){const e=h(),t=E("manage-livechat-units"),[n,l]=r({text:"",current:0,itemsPerPage:25}),[d,m]=r(["name","asc"]),x=a(n,500),w=a(d,500),T=R(x,w),U=p("omnichannel-units"),M=f("context"),S=f("id"),N=i(e=>{const[t,n]=d;m(t!==e?[e,"asc"]:[e,"asc"===n?"desc":"asc"])}),_=i(e=>()=>U.push({context:"edit",id:e})),{value:H={},reload:B}=P("livechat/units.list",T),z=c(()=>[o.createElement(k.HeaderCell,{key:"name",direction:d[1],active:"name"===d[0],onClick:N,sort:"name"},e("Name")),o.createElement(k.HeaderCell,{key:"visibility",direction:d[1],active:"visibility"===d[0],onClick:N,sort:"visibility"},e("Visibility")),o.createElement(k.HeaderCell,{key:"remove",w:"x60"},e("Remove"))].filter(Boolean),[d,N,e]),I=s(e=>{let{_id:t,name:n,visibility:l}=e;return(o.createElement(u.Row,{key:t,tabIndex:0,role:"link",onClick:_(t),action:!0,"qa-user-id":t},o.createElement(u.Cell,{withTruncatedText:!0},n),o.createElement(u.Cell,{withTruncatedText:!0},l),o.createElement(D,{_id:t,reload:B})))},[B,_]),V=s(()=>{if(!M)return"";const t=()=>{U.push({})};return(o.createElement(v,null,o.createElement(v.Header,null,"edit"===M&&e("Edit_Unit"),"new"===M&&e("New_Unit"),o.createElement(v.Close,{onClick:t})),"edit"===M&&o.createElement(g,{unitId:S,reload:B,allUnits:H}),"new"===M&&o.createElement(b,{reload:B,allUnits:H})))},[e,M,S,U,B,H]);return t?o.createElement(y,{setParams:l,params:n,onHeaderClick:N,data:H,useQuery:R,reload:B,header:z,renderRow:I,title:e("Units")},o.createElement(V,null)):o.createElement(C,null)}n.exportDefault(S)}


function module(e,t,a){let n,l,r,o,s,i,c,m,d,u,p,h,E,g,k,f,x,v,b,w,D;function C(e){let{tagId:t,reload:a}=e;const n=o(()=>({tagId:t}),[t]),{value:l,phase:s,error:i}=b("livechat/tags.getOne",n),{value:c,phase:m,error:d}=b("livechat/department"),p=k();return[s,m].includes(w.LOADING)?r.createElement(D,null):i||d?r.createElement(u,{m:"x16",type:"danger"},p("Not_Available")):r.createElement(N,{tagId:t,data:l,availableDepartments:c,reload:a})}function y(e){let{reload:t}=e;const a=k(),{value:n,phase:l,error:o}=b("livechat/department");return l===w.LOADING?r.createElement(D,null):o?r.createElement(m,{mbs:"x16"},a("Not_found")):r.createElement(N,{reload:t,isNew:!0,availableDepartments:n})}function N(e){let{data:t,tagId:a,isNew:u,availableDepartments:b,reload:w}=e,D=l(e,["data","tagId","isNew","availableDepartments","reload"]);const C=k(),y=v("omnichannel-tags"),N=t||{},T=o(()=>b&&b.departments?b.departments.map(e=>{let{_id:t,name:a}=e;return[t,a||t]}):[],[b]),{values:_,handlers:S,hasUnsavedChanges:I}=x({name:N.name,description:N.description,departments:N.departments&&""===N.departments[0]?[]:N.departments}),{handleName:G,handleDescription:M,handleDepartments:R}=S,{name:A,description:L,departments:F}=_,B=o(()=>A&&0!==A.length?void 0:C("The_field_is_required","name"),[A,C]),O=E("livechat:saveTag"),W=g(),j=h(()=>{w()}),q=o(()=>!B,[B]),P=h(async()=>{const e={name:A,description:L};if(!q)return W({type:"error",message:C("The_field_is_required")});const t=F||[""];try{await O(a,e,t),W({type:"success",message:C("Saved")}),w(),y.push({})}catch(n){W({type:"error",message:n})}});return r.createElement(f.ScrollableContent,n({is:"form"},D),r.createElement(s,null,r.createElement(s.Label,null,C("Name"),"*"),r.createElement(s.Row,null,r.createElement(i,{placeholder:C("Name"),flexGrow:1,value:A,onChange:G,error:I&&B}))),r.createElement(s,null,r.createElement(s.Label,null,C("Description")),r.createElement(s.Row,null,r.createElement(i,{placeholder:C("Description"),flexGrow:1,value:L,onChange:M}))),r.createElement(s,null,r.createElement(s.Label,null,C("Departments")),r.createElement(s.Row,null,r.createElement(d,{options:T,value:F,maxWidth:"100%",placeholder:C("Select_an_option"),onChange:R,flexGrow:1}))),r.createElement(s.Row,null,r.createElement(m,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},r.createElement(p,{inlineEnd:"x4"},!u&&r.createElement(c,{flexGrow:1,type:"reset",disabled:!I,onClick:j},C("Reset")),r.createElement(c,{primary:!0,mie:"none",flexGrow:1,disabled:!I||!q,onClick:P},C("Save"))))))}a.link("@babel/runtime/helpers/extends",{default(e){n=e}},0),a.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){l=e}},1),a.export({TagEditWithData:()=>C,TagNew:()=>y,TagEdit:()=>N}),a.link("react",{default(e){r=e},useMemo(e){o=e}},0),a.link("@rocket.chat/fuselage",{Field(e){s=e},TextInput(e){i=e},Button(e){c=e},Box(e){m=e},MultiSelect(e){d=e},Callout(e){u=e},Margins(e){p=e}},1),a.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){h=e}},2),a.link("../../../../client/contexts/ServerContext",{useMethod(e){E=e}},3),a.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch(e){g=e}},4),a.link("../../../../client/contexts/TranslationContext",{useTranslation(e){k=e}},5),a.link("../../../../client/components/VerticalBar",{default(e){f=e}},6),a.link("../../../../client/hooks/useForm",{useForm(e){x=e}},7),a.link("../../../../client/contexts/RouterContext",{useRoute(e){v=e}},8),a.link("../../../../client/hooks/useEndpointData",{useEndpointData(e){b=e}},9),a.link("../../../../client/hooks/useAsyncState",{AsyncStatePhase(e){w=e}},10),a.link("../../../../client/components/Skeleton",{FormSkeleton(e){D=e}},11)}


function module(e,n,r){var o,t,u,a,i,c,s,l,m,_,f,d,b,p,v,g,k,h,x,U,w,A,E,M,y,R,T,C,S,I,O,P,B;r.link("@babel/runtime/helpers/objectSpread2",{default:function(e){o=e}},0),r.link("@babel/runtime/regenerator",{default:function(e){t=e}},1),r.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){u=e}},2),r.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},3),r.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){i=e}},4),r.export({useUserInfoActionsSpread:function(){return W},useUserInfoActions:function(){return z}}),r.link("react",{default:function(e){c=e},useCallback:function(e){s=e},useMemo:function(e){l=e}},0),r.link("@rocket.chat/fuselage",{Button:function(e){m=e},ButtonGroup:function(e){_=e},Icon:function(e){f=e},Modal:function(e){d=e},Box:function(e){b=e}},1),r.link("@rocket.chat/fuselage-hooks",{useAutoFocus:function(e){p=e},useMutableCallback:function(e){v=e}},2),r.link("../../../contexts/TranslationContext",{useTranslation:function(e){g=e}},3),r.link("../../../hooks/useReactiveValue",{useReactiveValue:function(e){k=e}},4),r.link("../../../contexts/AuthorizationContext",{usePermission:function(e){h=e},useAllPermissions:function(e){x=e}},5),r.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){U=e}},6),r.link("../../../contexts/UserContext",{useUserId:function(e){w=e},useUserSubscription:function(e){A=e},useUserSubscriptionByName:function(e){E=e}},7),r.link("../../../contexts/ServerContext",{useMethod:function(e){M=e}},8),r.link("../../../../app/webrtc/client",{WebRTC:function(e){y=e}},9),r.link("../../../contexts/RouterContext",{useRoute:function(e){R=e}},10),r.link("../../../contexts/ModalContext",{useSetModal:function(e){T=e}},11),r.link("../../../../app/models/client",{RoomRoles:function(e){C=e}},12),r.link("../../../../app/utils",{roomTypes:function(e){S=e},RoomMemberActions:function(e){I=e}},13),r.link("../../../hooks/useEndpointAction",{useEndpointActionExperimental:function(e){O=e}},14),r.link("./useUserRoom",{useUserRoom:function(e){P=e}},15),r.link("../../../../lib/escapeHTML",{escapeHTML:function(e){B=e}},16);var L=function(e,n,r){return k(s((function(){return!!C.findOne({rid:n,"u._id":e,roles:r})}),[e,n,r]))},N=function(e,n,r,o){var t=r||n,u=e&&e.name!==o;return t&&u},j=function(e){if(!e)return!1;var n=e.localUrl,r,o=e.remoteItems.get()||[];return null!==n.get()||0!==o.length},D=function(e,n,r){return e&&e.ro?(!Array.isArray(e.unmuted)||-1===e.unmuted.indexOf(n&&n.username))&&(!r||Array.isArray(e.muted)&&-1!==e.muted.indexOf(n&&n.username)):e&&Array.isArray(e.muted)&&e.muted.indexOf(n&&n.username)>-1},H=function(e){var n=e.text,r=e.confirmText,o=e.close,t=e.confirm,u=i(e,["text","confirmText","close","confirm"]),a=p(!0),s=g();return c.createElement(d,u,c.createElement(d.Header,null,c.createElement(f,{color:"warning",name:"modal-warning",size:20}),c.createElement(d.Title,null,s("Are_you_sure")),c.createElement(d.Close,{onClick:o})),c.createElement(d.Content,{fontScale:"p1"},n),c.createElement(d.Footer,null,c.createElement(_,{align:"end"},c.createElement(m,{ghost:!0,onClick:o},s("Cancel")),c.createElement(m,{ref:a,primary:!0,danger:!0,onClick:t},r))))},V=function(e){var n=a(e,2),r=n[0],o=n[1],t=o.action,u,i;return[r,{label:{label:o.label,icon:o.icon},action:t}]},W=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return l((function(){var r=Object.entries(e),o,t,u;return{actions:r.slice(0,n),menu:r.slice(n,r.length).map(V).length&&Object.fromEntries(r.slice(n,r.length).map(V))}}),[e,n])},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=g(),a=U(),i=R("direct"),m=T(),_=e._id,f=w(),d=v((function(){return m(null)})),p=P(n),C=A(n),V=E(e.username),W=L(_,n,"leader"),z=L(_,n,"moderator"),F=L(_,n,"owner"),G=s((function(){return y.getInstanceByRoomId(n)}),[n]),J=k(G),Y=x("post-readonly",n),K=C&&C.ignored&&C.ignored.indexOf(_)>-1,q=D(p,e,Y),Q="p"===p.t?"groups":"channels",X=p&&p.t&&S.getConfig(p.t),Z=u(X&&[X.allowMemberAction(p,I.SET_AS_OWNER),X.allowMemberAction(p,I.SET_AS_LEADER),X.allowMemberAction(p,I.SET_AS_MODERATOR),X.allowMemberAction(p,I.IGNORE),X.allowMemberAction(p,I.BLOCK),X.allowMemberAction(p,I.MUTE),X.allowMemberAction(p,I.REMOVE_USER)]),$=Z[0],ee=Z[1],ne=Z[2],re=Z[3],oe=Z[4],te=Z[5],ue=Z[6],ae=p&&p.t&&B(S.getRoomName(p.t,p)),ie=h("set-owner",n),ce=h("set-leader",n),se=h("set-moderator",n),le=h("mute-user",n),me=h("remove-user",n),_e=h("create-d"),fe=j(J),de=k(s((function(){return null==J?void 0:J.callInProgress.get()}),[J])),be=N(C,V,_e,e.username),pe=v((function(){return i.push({rid:e.username})})),ve=l((function(){return be&&{label:r("Direct_Message"),icon:"balloon",action:pe}}),[pe,be,r]),ge=l((function(){var e,n,o=de?function(){J.joinCall({audio:!0,video:!0})}:function(){J.startCall({audio:!0,video:!0})};return fe&&{label:r(de?"Join_video_call":"Start_video_call"),icon:"video",action:o}}),[de,fe,r,J]),ke=l((function(){var e,n,o=de?function(){J.joinCall({audio:!0,video:!1})}:function(){J.startCall({audio:!0,video:!1})};return fe&&{label:r(de?"Join_audio_call":"Start_audio_call"),icon:"mic",action:o}}),[de,fe,r,J]),he=F?"removeOwner":"addOwner",xe=F?"User__username__removed_from__room_name__owners":"User__username__is_now_a_owner_of__room_name_",Ue=O("POST",Q+"."+he,r(xe,{username:e.username,room_name:ae})),we=v(function(){function e(){return t.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ue({roomId:n,userId:_}));case 1:case"end":return e.stop()}}return e}(),null,null,null,Promise)}return e}()),Ae=l((function(){return $&&ie&&{label:r(F?"Remove_as_owner":"Set_as_owner"),icon:"shield-check",action:we}}),[we,F,r,$,ie]),Ee=W?"removeLeader":"addLeader",Me=W?"User__username__removed_from__room_name__leaders":"User__username__is_now_a_leader_of__room_name_",ye=O("POST",Q+"."+Ee,r(Me,{username:e.username,room_name:ae})),Re=v((function(){return ye({roomId:n,userId:_})})),Te=l((function(){return ee&&ce&&{label:r(W?"Remove_as_leader":"Set_as_leader"),icon:"shield-alt",action:Re}}),[W,ee,r,ce,Re]),Ce=z?"removeModerator":"addModerator",Se=z?"User__username__removed_from__room_name__moderators":"User__username__is_now_a_moderator_of__room_name_",Ie=O("POST",Q+"."+Ce,r(Se,{username:e.username,room_name:ae})),Oe=v((function(){return Ie({roomId:n,userId:_})})),Pe=l((function(){return ne&&se&&{label:r(z?"Remove_as_moderator":"Set_as_moderator"),icon:"shield",action:Oe}}),[Oe,z,ne,r,se]),Be=M("ignoreUser"),Le=v(function(){function e(){return t.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.awrap(Be({rid:n,userId:_,ignore:!K}));case 3:a(K?{type:"success",message:r("User_has_been_unignored")}:{type:"success",message:r("User_has_been_ignored")}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a({type:"error",message:e.t0});case 9:case"end":return e.stop()}}return e}(),null,null,[[0,6]],Promise)}return e}()),Ne=l((function(){return re&&_!==f&&{label:r(K?"Unignore":"Ignore"),icon:"ban",action:Le}}),[Le,K,f,re,r,_]),je=C.blocker,De=M(je?"unblockUser":"blockUser"),He=v(function(){function e(){return t.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.awrap(De({rid:n,blocked:_}));case 3:a({type:"success",message:r(je?"User_is_unblocked":"User_is_blocked")}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a({type:"error",message:e.t0});case 9:case"end":return e.stop()}}return e}(),null,null,[[0,6]],Promise)}return e}()),Ve=l((function(){return oe&&_!==f&&{label:r(je?"Unblock":"Block"),icon:"ban",action:He}}),[je,f,oe,r,He,_]),We=M(q?"unmuteUserInRoom":"muteUserInRoom"),ze=l((function(){var o=function(){var o=function(){function o(){return t.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,t.awrap(We({rid:n,username:e.username}));case 3:d(),a({type:"success",message:r(q?"User__username__unmuted_in_room__roomName__":"User__username__muted_in_room__roomName__",{username:e.username,roomName:ae})}),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),a({type:"error",message:o.t0});case 10:case"end":return o.stop()}}return o}(),null,null,[[0,7]],Promise)}return o}();if(q)return o();m(c.createElement(H,{text:r("The_user_wont_be_able_to_type_in_s",ae),close:d,confirmText:r("Yes_mute_user"),confirm:o}))};return te&&le&&{label:r(q?"Unmute_user":"Mute_user"),icon:q?"mic":"mic-off",action:o}}),[d,a,q,We,n,te,ae,m,r,e.username,le]),Fe=O("POST",Q+".kick",r("User_has_been_removed_from_s",ae)),Ge=v((function(){m(c.createElement(H,{text:r("The_user_will_be_removed_from_s",ae),close:d,confirmText:r("Yes_remove_user"),confirm:function(){Fe({roomId:n,userId:_}),d()}}))})),Je=l((function(){return ue&&me&&{label:c.createElement(b,{color:"danger"},r("Remove_from_room")),icon:"sign-out",action:Ge}}),[ue,me,Ge,r]);return l((function(){return o(o(o(o(o(o(o(o(o(o({},ve&&{openDirectMessage:ve}),ge&&{video:ge}),ke&&{audio:ke}),Ae&&{changeOwner:Ae}),Te&&{changeLeader:Te}),Pe&&{changeModerator:Pe}),Ne&&{ignoreUser:Ne}),ze&&{muteUser:ze}),Je&&{removeUser:Je}),Ve&&{toggleBlock:Ve})}),[ke,Te,Pe,Ae,Ne,ze,ve,Je,ge,Ve])}}


function module(e,t,n){var i,s,r,o,u,l,a,c,f,p,d,m,k,b;n.link("@babel/runtime/regenerator",{default:function(e){i=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){s=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},2),n.export({useFilesList:function(){return g}}),n.link("react",{useCallback:function(e){o=e},useEffect:function(e){u=e},useMemo:function(e){l=e},useState:function(e){a=e}},0),n.link("../../../../../lib/lists/FilesList",{FilesList:function(e){c=e}},1),n.link("../../../../../contexts/ServerContext",{useEndpoint:function(e){f=e}},2),n.link("../../../../../contexts/UserContext",{useUserRoom:function(e){p=e},useUserId:function(e){d=e}},3),n.link("../../../../../hooks/lists/useScrollableMessageList",{useScrollableMessageList:function(e){m=e}},4),n.link("../../../../../hooks/lists/useStreamUpdatesForMessageList",{useStreamUpdatesForMessageList:function(e){k=e}},5),n.link("../../../../../../app/ui-utils/client/config",{getConfig:function(e){b=e}},6);var g=function(e){var t=a((function(){return new c(e)})),n,g=r(t,1)[0],x=p(e.rid),S=d();u((function(){g.options!==e&&g.updateFilters(e)}),[g,e]);var v,y=x&&{c:"channels.files",l:"channels.files",d:"im.files",p:"groups.files"}[x.t],L=f("GET",y),h=o(function(){function t(t,n){var r,o,u;return i.async(function(){function l(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,i.awrap(L({roomId:e.rid,count:n-t,sort:JSON.stringify({uploadedAt:-1}),query:JSON.stringify(s({name:{$regex:e.text||"",$options:"i"}},"all"!==e.type&&{typeGroup:e.type}))}));case 2:return r=l.sent,o=r.files,u=r.total,l.abrupt("return",{items:o,itemCount:u});case 6:case"end":return l.stop()}}return l}(),null,null,null,Promise)}return t}(),[L,e.rid,e.type,e.text]),C=m(g,h,l((function(){var e=b("discussionListSize");return e?parseInt(e,10):void 0}),[])),I=C.loadMoreItems,M=C.initialItemCount;return k(g,S,e.rid),{filesList:g,loadMoreItems:I,initialItemCount:M}}}


function module(e,t,n){var o,l,i,a,r,s,u,c,f,d,m,p,x,k,h,C,g,D,E,v,I,y,w,A,T,M,b,S,F,L,G,_;n.link("@babel/runtime/regenerator",{default:function(e){o=e}},0),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},1),n.export({createItemData:function(){return z},RoomFiles:function(){return B}}),n.link("react",{default:function(e){i=e},useState:function(e){a=e},useCallback:function(e){r=e},useMemo:function(e){s=e}},0),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){u=e},useLocalStorage:function(e){c=e},useUniqueId:function(e){f=e},useAutoFocus:function(e){d=e}},1),n.link("@rocket.chat/fuselage",{Box:function(e){m=e},Icon:function(e){p=e},TextInput:function(e){x=e},Select:function(e){k=e},Throbber:function(e){h=e},Margins:function(e){C=e}},2),n.link("react-virtuoso",{Virtuoso:function(e){g=e}},3),n.link("memoize-one",{default:function(e){D=e}},4),n.link("../../../../contexts/UserContext",{useUserId:function(e){E=e}},5),n.link("../../../../components/DeleteFileWarning",{default:function(e){v=e}},6),n.link("../../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){I=e}},7),n.link("../../../../contexts/ModalContext",{useSetModal:function(e){y=e}},8),n.link("../../../../contexts/ServerContext",{useMethod:function(e){w=e}},9),n.link("../../../../hooks/useAsyncState",{AsyncStatePhase:function(e){A=e}},10),n.link("../../../../contexts/TranslationContext",{useTranslation:function(e){T=e}},11),n.link("../../../../components/VerticalBar",{default:function(e){M=e}},12),n.link("./components/FileItem",{default:function(e){b=e}},13),n.link("./hooks/useFilesList",{useFilesList:function(e){S=e}},14),n.link("../../../../hooks/lists/useRecordList",{useRecordList:function(e){F=e}},15),n.link("./hooks/useMessageDeletionIsAllowed",{useMessageDeletionIsAllowed:function(e){L=e}},16),n.link("../../providers/ToolboxProvider",{useTabBarClose:function(e){G=e}},17),n.link("../../../../components/ScrollableContentWrapper",{default:function(e){_=e}},18);var R=i.memo((function(e){var t=e.item,n=e.data,o=e.index,l=n.userId,a=n.onClickDelete,r=n.isDeletionAllowed;return t&&i.createElement(B.Item,{index:o,_id:t._id,name:t.name,url:t.url,uploadedAt:t.uploadedAt,user:t.user,ts:t.ts,type:t.type,typeGroup:t.typeGroup,fileData:t,userId:l,onClickDelete:a,isDeletionAllowed:r})})),z=D((function(e,t){return{onClickDelete:e,isDeletionAllowed:t}})),B=function(){function e(e){var t=e.loading,n=e.filesItems,o=void 0===n?[]:n,l=e.text,a=e.type,r=e.setText,u=e.setType,c=e.onClickClose,D=e.onClickDelete,E=e.total,v=e.loadMoreItems,I=e.isDeletionAllowed,y=T(),w=s((function(){return[["all",y("All")],["image",y("Images")],["video",y("Videos")],["audio",y("Audios")],["text",y("Texts")],["application",y("Files")]]}),[y]),A=d(!0),b=f(),S=z(D,I);return i.createElement(i.Fragment,null,i.createElement(M.Header,null,i.createElement(M.Icon,{name:"attachment"}),i.createElement(M.Text,null,y("Files")),c&&i.createElement(M.Close,{onClick:c})),i.createElement(M.Content,{p:"x12"},i.createElement(m,{display:"flex",flexDirection:"row",p:"x12",flexShrink:0},i.createElement(m,{display:"flex",flexDirection:"row",flexGrow:1,mi:"neg-x4"},i.createElement(C,{inline:"x4"},i.createElement(x,{"data-qa-files-search":!0,id:b,placeholder:y("Search_Files"),ref:A,value:l,onChange:r,addon:i.createElement(p,{name:"magnifier",size:"x20"})}),i.createElement(k,{flexGrow:0,width:"110px",onChange:u,value:a,options:w})))),t&&i.createElement(m,{p:"x12"},i.createElement(h,{size:"x12"})),!t&&o.length<=0&&i.createElement(m,{p:"x12"},y("No_results_found")),i.createElement(m,{w:"full",h:"full",flexShrink:1,overflow:"hidden"},i.createElement(g,{style:{height:"100%",width:"100%"},totalCount:E,endReached:t?function(){}:function(e){return v(e,Math.min(50,E-e))},overscan:50,data:o,components:{Scroller:_},itemContent:function(e,t){return i.createElement(R,{data:S,index:e,item:t})}}))))}return e}();B.Item=b,n.exportDefault((function(e){var t=e.rid,n=E(),f=G(),d=T(),m=y(),p=u((function(){return m()})),x=I(),k=w("deleteFileMessage"),h=c("file-list-type","all"),C=l(h,2),g=C[0],D=C[1],M=a(""),b=l(M,2),_=b[0],R=b[1],z=r((function(e){R(e.currentTarget.value)}),[]),P=S(s((function(){return{rid:t,type:g,text:_}}),[t,g,_])),U=P.filesList,V=P.loadMoreItems,q=F(U),N=q.phase,W=q.items,H=q.itemCount,O=u((function(e){var t=function(){function t(){return o.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.awrap(k(e));case 3:x({type:"success",message:d("Deleted")}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),x({type:"error",message:t.t0});case 9:p();case 10:case"end":return t.stop()}}return t}(),null,null,[[0,6]],Promise)}return t}();m(i.createElement(v,{onConfirm:t,onCancel:p}))}),[]),j=L(t,n);return i.createElement(B,{rid:t,loading:N===A.LOADING,type:g,text:_,loadMoreItems:V,setType:D,setText:z,filesItems:W,total:H,onClickClose:f,onClickDelete:O,isDeletionAllowed:j})}))}


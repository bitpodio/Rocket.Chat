function module(e,t,n){var r,a,u,i,l,o,c,f,s,d,p,m,v,g,k,E,b,S,h,x,y,C,T,w,F,_,q;n.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){a=e}},1),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){u=e}},2),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){i=e}},3),n.link("@rocket.chat/fuselage",{Field:function(e){l=e},FieldGroup:function(e){o=e},Flex:function(e){c=e},InputBox:function(e){f=e},Margins:function(e){s=e},Select:function(e){d=e},Skeleton:function(e){p=e},TextInput:function(e){m=e}},0),n.link("@rocket.chat/fuselage-hooks",{useAutoFocus:function(e){v=e}},1),n.link("react",{default:function(e){g=e},useEffect:function(e){k=e},useReducer:function(e){E=e},useState:function(e){b=e},useCallback:function(e){S=e},useMemo:function(e){h=e}},2),n.link("../../../contexts/SettingsContext",{useSettingsDispatch:function(e){x=e}},3),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){y=e}},4),n.link("../../../contexts/TranslationContext",{useTranslation:function(e){C=e},useLanguages:function(e){T=e}},5),n.link("../Pager",{Pager:function(e){w=e}},6),n.link("../SetupWizardState",{useSetupWizardContext:function(e){F=e}},7),n.link("../Step",{Step:function(e){_=e}},8),n.link("../StepHeader",{StepHeader:function(e){q=e}},9);var z=function(){var e="RESET",t="SET_VALUE",n=E((function(n,r){var a=r.type,i=r.payload;if(a===e)return i;if(a===t){var l=i._id,o=i.value;return n.map((function(e){return e._id===l?u(u({},e),{},{value:o}):e}))}return n}),[]),r=i(n,2),a=r[0],l=r[1],o,c;return{fields:a,resetFields:S((function(t){return l({type:e,payload:t})}),[]),setFieldValue:S((function(e,n){return l({type:t,payload:{_id:e,value:n}})}),[])}};function L(e){var t=e.step,n=e.title,E=e.active,S=F(),L=S.settings,D=S.currentStep,P=S.goToPreviousStep,W=S.goToNextStep,A=z(),M=A.fields,I=A.resetFields,R=A.setFieldValue,V=b(!1),j=i(V,2),B=j[0],H=j[1],N=T();k((function(){I(L.filter((function(e){var n;return e.wizard.step===t})).filter((function(e){var t=e.type;return["string","select","language","boolean"].includes(t)})).sort((function(e,t){var n,r;return e.wizard.order-t.wizard.order})).map((function(e){var t=e.value,n=a(e,["value"]);return u(u({},n),{},{value:null!=t?t:""})})))}),[L,D,t,I]);var O=C(),G=x(),U=v(E),Y=y(),J=function(){P()},K=function(){function e(e){return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),H(!0),t.prev=2,t.next=5,r.awrap(G(M.map((function(e){var t,n;return{_id:e._id,value:e.value}}))));case 5:W(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),Y({type:"error",message:t.t0});case 11:return t.prev=11,H(!1),t.finish(11);case 14:case"end":return t.stop()}}return t}(),null,null,[[2,8,11,14]],Promise)}return e}(),Q=h((function(){return!!M.find((function(e){return e.requiredOnWizard&&""===String(e.value).trim()}))}),[M]);return 0===M.length?g.createElement(_,{active:E,working:B,onSubmit:K},g.createElement(q,{number:t,title:n}),g.createElement(s,{blockEnd:"x32"},g.createElement(o,null,Array.from({length:5},(function(e,t){return g.createElement(l,{key:t},g.createElement(c.Item,{align:"stretch"},g.createElement(l.Label,null,g.createElement(p,{width:"50%"}))),g.createElement(f.Skeleton,null))}))))):g.createElement(_,{active:E,working:B,onSubmit:K},g.createElement(q,{number:t,title:n}),g.createElement(s,{blockEnd:"x32"},g.createElement(o,null,M.map((function(e,t){var n=e._id,r=e.type,a=e.i18nLabel,u=e.value,o=e.values,c=e.requiredOnWizard;return(g.createElement(l,{key:t},g.createElement(l.Label,{htmlFor:n,required:c},O(a)),g.createElement(l.Row,null,"string"===r&&g.createElement(m,{type:"text","data-qa":n,id:n,name:n,ref:0===t?U:void 0,value:u,onChange:function(e){var t=e.currentTarget.value;return R(n,t)}}),"select"===r&&g.createElement(d,{"data-qa":n,id:n,name:n,placeholder:O("Select_an_option"),value:u,onChange:function(e){return R(n,e)},options:o.map((function(e){var t=e.i18nLabel,n;return[e.key,O(t)]}))}),"boolean"===r&&g.createElement(d,{"data-qa":n,id:n,name:n,ref:0===t?U:void 0,value:String(u),onChange:function(e){return R(n,"true"===e)},options:[["true",O("Yes")],["false",O("No")]]}),"language"===r&&g.createElement(d,{"data-qa":n,id:n,name:n,placeholder:O("Default"),value:u,onChange:function(e){return R(n,e)},options:N.map((function(e){var t,n;return[e.key,e.name]})).sort((function(e,t){var n,r,a,u;return i(e,1)[0]-i(t,1)[0]}))}))))})))),g.createElement(w,{disabled:B,isContinueEnabled:!Q,onBackClick:D>2&&J}))}n.exportDefault(L)}


function module(e,n,t){var r,a,c,o,u,s,l,i,f,d,m,p,x,k,v,h,_,b,y,E,g,C;t.link("@babel/runtime/helpers/extends",{default:function(e){r=e}},0),t.link("@babel/runtime/regenerator",{default:function(e){a=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){c=e}},2),t.link("react",{default:function(e){o=e},useState:function(e){u=e},useCallback:function(e){s=e},useEffect:function(e){l=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){i=e},Button:function(e){f=e},TextInput:function(e){d=e},Margins:function(e){m=e}},1),t.link("@rocket.chat/fuselage-hooks",{useSafely:function(e){p=e}},2),t.link("yaqrcode",{default:function(e){x=e}},3),t.link("../../../contexts/UserContext",{useUser:function(e){k=e}},4),t.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){v=e}},5),t.link("../../../contexts/ModalContext",{useSetModal:function(e){h=e}},6),t.link("../../../contexts/TranslationContext",{useTranslation:function(e){_=e}},7),t.link("../../../hooks/useForm",{useForm:function(e){b=e}},8),t.link("../../../contexts/ServerContext",{useMethod:function(e){y=e}},9),t.link("../../../components/TextCopy",{default:function(e){E=e}},10),t.link("./BackupCodesModal",{default:function(e){g=e}},11),t.link("./VerifyCodeModal",{default:function(e){C=e}},12);var w=function(e){var n=_(),t=v(),w=k(),T=h(),M=y("2fa:enable"),S=y("2fa:disable"),P=y("2fa:validateTempToken"),D=y("2fa:checkCodesRemaining"),F=y("2fa:regenerateCodes"),I=p(u(!1)),B=c(I,2),R=B[0],V=B[1],z=p(u()),A=c(z,2),Q=A[0],U=A[1],q=p(u()),Y=c(q,2),j=Y[0],G=Y[1],H=p(u()),J=c(H,2),K=J[0],L=J[1],N=b({authCode:""}),O=N.values,W=N.handlers,X=O.authCode,Z=W.handleAuthCode,$=w&&w.services&&w.services.totp&&w.services.totp.enabled,ee=s((function(){return T(null)}),[T]);l((function(){var e;(function(){function e(){var e;return a.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:if($){n.next=2;break}return n.abrupt("return",!1);case 2:return n.next=4,a.awrap(D());case 4:e=n.sent,L(e.remaining);case 6:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e})()()}),[D,L,$]);var ne=s(function(){function e(){var e;return a.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.awrap(M());case 3:e=n.sent,G(e.secret),U(x(e.url,{size:200})),V(!0),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),t({type:"error",message:n.t0});case 12:case"end":return n.stop()}}return n}(),null,null,[[0,9]],Promise)}return e}(),[t,M,U,V,G]),te=s(function(){function e(){var e;return a.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:e=function(){function e(e){var r;return a.async(function(){function c(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,a.awrap(S(e));case 3:if(r=c.sent){c.next=6;break}return c.abrupt("return",t({type:"error",message:n("Invalid_two_factor_code")}));case 6:t({type:"success",message:n("Two-factor_authentication_disabled")}),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),t({type:"error",message:c.t0});case 12:ee();case 13:case"end":return c.stop()}}return c}(),null,null,[[0,9]],Promise)}return e}(),T(o.createElement(C,{onVerify:e,onCancel:ee}));case 2:case"end":return r.stop()}}return r}(),null,null,null,Promise)}return e}(),[ee,S,t,T,n]),re=s(function(){function e(){var e;return a.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.awrap(P(X));case 3:if(e=r.sent){r.next=6;break}return r.abrupt("return",t({type:"error",message:n("Invalid_two_factor_code")}));case 6:T(o.createElement(g,{codes:e.codes,onClose:ee})),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),t({type:"error",message:r.t0});case 12:case"end":return r.stop()}}return r}(),null,null,[[0,9]],Promise)}return e}(),[X,ee,t,T,n,P]),ae=s((function(){var e=function(){function e(e){var r;return a.async(function(){function c(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,a.awrap(F(e));case 3:if(r=c.sent){c.next=6;break}return c.abrupt("return",t({type:"error",message:n("Invalid_two_factor_code")}));case 6:T(o.createElement(g,{codes:r.codes,onClose:ee})),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),t({type:"error",message:c.t0});case 12:case"end":return c.stop()}}return c}(),null,null,[[0,9]],Promise)}return e}();T(o.createElement(C,{onVerify:e,onCancel:ee}))}),[ee,t,F,T,n]);return o.createElement(i,r({display:"flex",flexDirection:"column",alignItems:"flex-start"},e),o.createElement(m,{blockEnd:"x8"},o.createElement(i,{fontScale:"s2"},n("Two-factor_authentication")),!$&&!R&&o.createElement(o.Fragment,null,o.createElement(i,null,n("Two-factor_authentication_is_currently_disabled")),o.createElement(f,{primary:!0,onClick:ne},n("Enable_two-factor_authentication"))),!$&&R&&o.createElement(o.Fragment,null,o.createElement(i,null,n("Scan_QR_code")),o.createElement(i,null,n("Scan_QR_code_alternative_s")),o.createElement(E,{text:j}),o.createElement(i,{is:"img",size:"x200",src:Q,"aria-hidden":"true"}),o.createElement(i,{display:"flex",flexDirection:"row",w:"full"},o.createElement(d,{placeholder:n("Enter_authentication_code"),value:X,onChange:Z}),o.createElement(f,{primary:!0,onClick:re},n("Verify")))),$&&o.createElement(o.Fragment,null,o.createElement(f,{primary:!0,danger:!0,onClick:te},n("Disable_two-factor_authentication")),o.createElement(i,{fontScale:"p2",mbs:"x8"},n("Backup_codes")),o.createElement(i,null,n("You_have_n_codes_remaining",{number:K})),o.createElement(f,{onClick:ae},n("Regenerate_codes")))))};t.exportDefault(w)}


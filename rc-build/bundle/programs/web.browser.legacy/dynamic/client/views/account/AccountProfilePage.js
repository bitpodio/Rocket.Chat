function module(e,n,t){var r,a,o,s,u,l,c,i,d,f,m,v,_,p,h,w,g,x,C,k,A,y,b,P,U;t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){a=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){o=e}},2),t.link("@rocket.chat/fuselage",{ButtonGroup:function(e){s=e},Button:function(e){u=e},Box:function(e){l=e},Icon:function(e){c=e}},0),t.link("meteor/sha",{SHA256:function(e){i=e}},1),t.link("react",{default:function(e){d=e},useMemo:function(e){f=e},useState:function(e){m=e},useCallback:function(e){v=e}},2),t.link("../../components/Page",{default:function(e){_=e}},3),t.link("./AccountProfileForm",{default:function(e){p=e}},4),t.link("../../components/ConfirmOwnerChangeWarningModal",{default:function(e){h=e}},5),t.link("../../contexts/TranslationContext",{useTranslation:function(e){w=e}},6),t.link("../../hooks/useForm",{useForm:function(e){g=e}},7),t.link("../../contexts/SettingsContext",{useSetting:function(e){x=e}},8),t.link("../../contexts/UserContext",{useUser:function(e){C=e}},9),t.link("../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){k=e}},10),t.link("../../contexts/ServerContext",{useMethod:function(e){A=e}},11),t.link("../../contexts/ModalContext",{useSetModal:function(e){y=e}},12),t.link("../../hooks/useUpdateAvatar",{useUpdateAvatar:function(e){b=e}},13),t.link("../../lib/getUserEmailAddress",{getUserEmailAddress:function(e){P=e}},14),t.link("./ActionConfirmModal",{default:function(e){U=e}},15);var E=function(e){var n,t,r,a,o,s,u,l,c;return{realname:null!==(n=e.name)&&void 0!==n?n:"",email:null!==(t=P(e))&&void 0!==t?t:"",username:null!==(r=e.username)&&void 0!==r?r:"",password:"",confirmationPassword:"",avatar:"",url:null!==(a=e.avatarUrl)&&void 0!==a?a:"",statusText:null!==(o=e.statusText)&&void 0!==o?o:"",statusType:null!==(s=e.status)&&void 0!==s?s:"",bio:null!==(u=e.bio)&&void 0!==u?u:"",customFields:null!==(l=e.customFields)&&void 0!==l?l:{},nickname:null!==(c=e.nickname)&&void 0!==c?c:""}},S=function(){var e,n,t,S=w(),T=k(),F=C(),M=g(E(F)),O=M.values,D=M.handlers,B=M.hasUnsavedChanges,R=M.commit,L=m(!0),N=o(L,2),W=N[0],q=N[1],G=y(),H=m(!1),I=o(H,2),j=I[0],z=I[1],V=A("logoutOtherClients"),$=A("deleteUserOwnAccount"),J=A("saveUserProfile"),K=v((function(){return G(null)}),[G]),Q=Boolean(null==F?void 0:null===(e=F.services)||void 0===e?void 0:null===(n=e.password)||void 0===n?void 0:null===(t=n.bcrypt)||void 0===t?void 0:t.trim()),X=x("Message_ErasureType"),Y=x("Accounts_AllowRealNameChange"),Z=x("Accounts_AllowUserStatusMessageChange"),ee=x("Accounts_AllowUsernameChange"),ne=x("Accounts_AllowEmailChange"),te=x("Accounts_AllowPasswordChange"),re=x("Accounts_AllowPasswordChangeForOAuthUsers"),ae=x("Accounts_AllowUserAvatarChange"),oe=x("Accounts_AllowDeleteOwnAccount"),se=x("LDAP_Enable"),ue=x("LDAP_Username_Field"),le=se&&ue,ce=x("Accounts_RequireNameForSignUp"),ie=x("UTF8_Names_Validation"),de,fe;te&&!re&&(te=Boolean(null==F?void 0:null===(de=F.services)||void 0===de?void 0:null===(fe=de.password)||void 0===fe?void 0:fe.bcrypt));var me=f((function(){return new RegExp("^"+ie+"$")}),[ie]),ve=ee&&!le,_e=f((function(){return{allowRealNameChange:Y,allowUserStatusMessageChange:Z,allowEmailChange:ne,allowPasswordChange:te,allowUserAvatarChange:ae,allowDeleteOwnAccount:oe,canChangeUsername:ve,requireName:ce,namesRegex:me}}),[oe,ne,te,Y,ae,Z,ve,ce,me]),pe=O.realname,he=O.email,we=O.avatar,ge=O.username,xe=O.password,Ce=O.statusText,ke=O.statusType,Ae=O.customFields,ye=O.bio,be=O.nickname,Pe=D.handleAvatar,Ue=D.handlePassword,Ee=D.handleConfirmationPassword,Se=b(we,F._id),Te=v(function(){function e(){var e;return r.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:(e=function(){function e(e){var n;return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.awrap(J(a(a(a(a(a(a(a({},Y&&{realname:pe}),ne&&P(F)!==he&&{email:he}),te&&{newPassword:xe}),ve&&{username:ge}),Z&&{statusText:Ce}),e&&{typedPassword:i(e)}),{},{statusType:ke,nickname:be,bio:ye||""}),Ae));case 3:return Ue(""),Ee(""),t.next=7,r.awrap(Se());case 7:(n=t.sent)&&Pe(""),R(),T({type:"success",message:S("Profile_saved_successfully")}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),T({type:"error",message:t.t0});case 16:case"end":return t.stop()}}return t}(),null,null,[[0,13]],Promise)}return e}())();case 2:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e}(),[J,ne,te,Y,Z,ye,ve,he,xe,pe,Ce,ge,F,Se,Pe,T,S,Ae,ke,R,be,Ue,Ee]),Fe=v(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.prev=1,e.next=4,r.awrap(V());case 4:T({type:"success",message:S("Logged_out_of_other_clients_successfully")}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),T({type:"error",message:e.t0});case 10:z(!1);case 11:case"end":return e.stop()}}return e}(),null,null,[[1,7]],Promise)}return e}(),[V,T,S]),Me=v(function(){function e(){var e,n;return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:if(e=function(){function e(e){var n,t,a;return r.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r.awrap($(i(e)));case 3:T({type:"success",message:S("User_has_been_deleted")}),o.next=12;break;case 6:if(o.prev=6,o.t0=o.catch(0),"user-last-owner"!==o.t0.error){o.next=11;break}return n=o.t0.details,t=n.shouldChangeOwner,a=n.shouldBeRemoved,o.abrupt("return",G((function(){return d.createElement(h,{onConfirm:function(){$(i(e),!0)},onCancel:K,contentTitle:S("Delete_User_Warning_"+X),confirmLabel:S("Continue"),shouldChangeOwner:t,shouldBeRemoved:a})})));case 11:T({type:"error",message:o.t0});case 12:case"end":return o.stop()}}return o}(),null,null,[[0,6]],Promise)}return e}(),n=S("Are_you_sure_you_want_to_delete_your_account"),!Q){t.next=4;break}return t.abrupt("return",G((function(){return d.createElement(U,{onSave:e,onCancel:K,title:n,text:S("For_your_security_you_must_enter_your_current_password_to_continue"),isPassword:!0})})));case 4:return t.abrupt("return",G((function(){return d.createElement(U,{onSave:e,onCancel:K,title:n,text:S("If_you_are_sure_type_in_your_username"),isPassword:!0})})));case 5:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return e}(),[K,$,T,X,Q,S,G]);return d.createElement(_,null,d.createElement(_.Header,{title:S("Profile")},d.createElement(s,null,d.createElement(u,{primary:!0,disabled:!B||!W||j,onClick:Te},S("Save_changes")))),d.createElement(_.ScrollableContentWithShadow,null,d.createElement(l,{maxWidth:"600px",w:"full",alignSelf:"center"},d.createElement(p,{values:O,handlers:D,user:F,settings:_e,onSaveStateChange:q}),d.createElement(s,{stretch:!0,mb:"x12"},d.createElement(u,{onClick:Fe,flexGrow:0,disabled:j},S("Logout_Others")),oe&&d.createElement(u,{danger:!0,onClick:Me},d.createElement(c,{name:"trash",size:"x20",mie:"x4"}),S("Delete_my_account"))))))};t.exportDefault(S)}


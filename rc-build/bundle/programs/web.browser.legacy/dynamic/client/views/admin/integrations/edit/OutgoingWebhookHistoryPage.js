function module(e,t,n){var l,r,a,o,i,c,u,s,m,g,E,f,_,d,h,p,b,k,y,w,S,H,R,x,I,C,L,O,T,v,P;function M(e){var t=e.data,n=o(e,["data"]),l=S(),r=x("replayOutgoingIntegration"),c=t._id,s=t._createdAt,_=t._updatedAt,p=t.httpResult,b=t.event,k=t.step,y=t.httpCallData,w=t.data,I=t.prepareSentMessage,C=t.processSentMessage,O=t.url,T=t.httpError,v=t.errorStack,P=t.error,M=t.integration._id,W="string"==typeof s?s:s.toISOString(),D="string"==typeof _?_:_.toISOString(),j=d((function(e){e.stopPropagation(),r({integrationId:M,historyId:c})})),A=L(),N=H("json",JSON.stringify(w||"",null,2)),F=H("json",JSON.stringify(I||"",null,2)),J=H("json",JSON.stringify(C||"",null,2)),B=H("json",JSON.stringify(y||"",null,2)),G=H("json",JSON.stringify(T||"",null,2)),z=H("json",JSON.stringify(p||"",null,2)),U=H("json",JSON.stringify(v||"",null,2));return h.createElement(g.Item,a({title:h.createElement(m,{display:"inline-flex",w:"full",flexDirection:"row",justifyContent:"space-between"},h.createElement(m,{display:"flex",flexDirection:"row",alignItems:"center"},h.createElement(u,{name:"info-circled",size:"x16",mie:"x4"}),A(s)),h.createElement(i,{ghost:!0,onClick:j},l("Replay")))},n),h.createElement(f,null,h.createElement(E,null,h.createElement(E.Label,null,l("Status")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("code",null,l(P?"Failure":"Success"))))),h.createElement(E,null,h.createElement(E.Label,null,l("Integration_Outgoing_WebHook_History_Time_Triggered")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("code",null,W)))),h.createElement(E,null,h.createElement(E.Label,null,l("Integration_Outgoing_WebHook_History_Time_Ended_Or_Error")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("code",null,D)))),h.createElement(E,null,h.createElement(E.Label,null,l("Event_Trigger")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("code",null,l(R.outgoingEvents[b].label))))),h.createElement(E,null,h.createElement(E.Label,null,l("Integration_Outgoing_WebHook_History_Trigger_Step")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("code",null,k)))),w&&h.createElement(E,null,h.createElement(E.Label,null,l("Integration_Outgoing_WebHook_History_Data_Passed_To_Trigger")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("pre",null,h.createElement("code",{dangerouslySetInnerHTML:{__html:N}}))))),I&&h.createElement(E,null,h.createElement(E.Label,null,l("Integration_Outgoing_WebHook_History_Messages_Sent_From_Prepare_Script")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("pre",null,h.createElement("code",{dangerouslySetInnerHTML:{__html:F}}))))),C&&h.createElement(E,null,h.createElement(E.Label,null,l("Integration_Outgoing_WebHook_History_Messages_Sent_From_Process_Script")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("pre",null,h.createElement("code",{dangerouslySetInnerHTML:{__html:J}}))))),O&&h.createElement(E,null,h.createElement(E.Label,null,l("URL")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("code",null,O)))),y&&h.createElement(E,null,h.createElement(E.Label,null,l("Integration_Outgoing_WebHook_History_Data_Passed_To_URL")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("pre",null,h.createElement("code",{dangerouslySetInnerHTML:{__html:B}}))))),T&&h.createElement(E,null,h.createElement(E.Label,null,l("Integration_Outgoing_WebHook_History_Http_Response_Error")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("pre",null,h.createElement("code",{dangerouslySetInnerHTML:{__html:G}}))))),p&&h.createElement(E,null,h.createElement(E.Label,null,l("Integration_Outgoing_WebHook_History_Http_Response")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("pre",null,h.createElement("code",{dangerouslySetInnerHTML:{__html:z}}))))),v&&h.createElement(E,null,h.createElement(E.Label,null,l("Integration_Outgoing_WebHook_History_Error_Stacktrace")),h.createElement(E.Row,null,h.createElement(m,{withRichContent:!0,w:"full"},h.createElement("pre",null,h.createElement("code",{dangerouslySetInnerHTML:{__html:U}})))))))}function W(e){var t=e.data,n=e.state,l=e.onChange,r=o(e,["data","state","onChange"]),i=S();return t&&n!==P.LOADING?t.length<1?h.createElement(m,a({mbs:"x16"},r),i("Integration_Outgoing_WebHook_No_History")):h.createElement(h.Fragment,null,h.createElement(g,{w:"full",maxWidth:"x600",alignSelf:"center",key:"content"},t.map((function(e){return h.createElement(M,{data:e,key:e._id})})))):h.createElement(m,a({w:"full",pb:"x24"},r),h.createElement(s,{mbe:"x4"}),h.createElement(s,{mbe:"x8"}),h.createElement(s,{mbe:"x4"}),h.createElement(s,{mbe:"x8"}),h.createElement(s,{mbe:"x4"}),h.createElement(s,{mbe:"x8"}))}function D(e){var t=O(),n=S(),o=k(),s=r(o,2),m=s[0],g=s[1],E=k(),f=r(E,2),H=f[0],R=f[1],L=k(),M=r(L,2),D=M[0],j=M[1],A=k(!1),N=r(A,2),F=N[0],J=N[1],B=k(0),G=r(B,2),z=G[0],U=G[1],V=I("admin-integrations"),q=x("clearIntegrationHistory"),K=C("id"),Q=p((function(){return{id:K,count:D,offset:H}}),[K,D,H]),X=v("integrations.history",Q),Y=X.value,Z=X.phase,$=X.reload,ee=function(){function e(){return l.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.awrap(q());case 3:t({type:"success",message:n("Integration_History_Cleared")}),$(),J(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"error",message:e.t0});case 11:case"end":return e.stop()}}return e}(),null,null,[[0,8]],Promise)}return e}(),te=function(){V.push({})},ne=d((function(e){var t=e.type,n=e.id,l=e.diff,r=e.data;if("inserted"===t)return U((function(e){return e+1})),void g((function(e){return[r].concat(e)}));"updated"!==t?"removed"===t&&g([]):g((function(e){var t=e.findIndex((function(e){var t;return e._id===n}));return Object.assign(e[t],l),e}))}));y((function(){Z!==P.RESOLVED||F||(g(Y.history),U(Y.total),J(!0))}),[Y,F,Z]),y((function(){return F&&T.on(K,ne),function(){return T.removeListener(K,ne)}}),[ne,K,F]);var le=b((function(e){var t=e.count,l=e.current,r=e.itemsPerPage;return n("Showing_results_of",l+1,Math.min(l+r,t),t)}),[n]);return(h.createElement(w,a({flexDirection:"column"},e),h.createElement(w.Header,{title:n("Integration_Outgoing_WebHook_History")},h.createElement(c,null,h.createElement(i,{onClick:te},h.createElement(u,{name:"back",size:"x16"})," ",n("Back")),h.createElement(i,{primary:!0,danger:!0,onClick:ee,disabled:0===z},h.createElement(u,{name:"trash"})," ",n("clear_history")))),h.createElement(w.ScrollableContentWithShadow,null,h.createElement(W,{key:"historyContent",data:m,state:Z}),h.createElement(_,{current:H,itemsPerPage:D,itemsPerPageLabel:n("Items_per_page:"),showingResultsLabel:le,count:z,onSetItemsPerPage:j,onSetCurrent:R}))))}n.link("@babel/runtime/regenerator",{default:function(e){l=e}},0),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},1),n.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},2),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){o=e}},3),n.link("@rocket.chat/fuselage",{Button:function(e){i=e},ButtonGroup:function(e){c=e},Icon:function(e){u=e},Skeleton:function(e){s=e},Box:function(e){m=e},Accordion:function(e){g=e},Field:function(e){E=e},FieldGroup:function(e){f=e},Pagination:function(e){_=e}},0),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){d=e}},1),n.link("react",{default:function(e){h=e},useMemo:function(e){p=e},useCallback:function(e){b=e},useState:function(e){k=e},useEffect:function(e){y=e}},2),n.link("../../../../components/Page",{default:function(e){w=e}},3),n.link("../../../../contexts/TranslationContext",{useTranslation:function(e){S=e}},4),n.link("../../../../hooks/useHighlightedCode",{useHighlightedCode:function(e){H=e}},5),n.link("../../../../../app/integrations/lib/rocketchat",{integrations:function(e){R=e}},6),n.link("../../../../contexts/ServerContext",{useMethod:function(e){x=e}},7),n.link("../../../../contexts/RouterContext",{useRoute:function(e){I=e},useRouteParameter:function(e){C=e}},8),n.link("../../../../hooks/useFormatDateAndTime",{useFormatDateAndTime:function(e){L=e}},9),n.link("../../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){O=e}},10),n.link("../../../../../app/integrations/client/streamer",{integrationHistoryStreamer:function(e){T=e}},11),n.link("../../../../hooks/useEndpointData",{useEndpointData:function(e){v=e}},12),n.link("../../../../hooks/useAsyncState",{AsyncStatePhase:function(e){P=e}},13),n.exportDefault(D)}


function module(e,n,t){var r,o,i,l,a,u,s,c,d,f,m,g,p,v,k,x,h,b,E,y,C,w,_,D,W,S;function A(e){var n=e.integrationId,t=l(e,["integrationId"]),r=p(),o=u((function(){return{integrationId:n}}),[n]),s=_("integrations.get",o),c=s.value,m=s.phase,g=s.error,v=s.reload,k=function(){v()};return m===D.LOADING?a.createElement(d,i({w:"full",pb:"x24"},t),a.createElement(f,{mbe:"x4"}),a.createElement(f,{mbe:"x8"}),a.createElement(f,{mbe:"x4"}),a.createElement(f,{mbe:"x8"}),a.createElement(f,{mbe:"x4"}),a.createElement(f,{mbe:"x8"})):g?a.createElement(d,i({mbs:"x16"},t),r("Oops_page_not_found")):a.createElement(I,i({data:c.integration,onChange:k},t))}t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},0),t.link("@babel/runtime/regenerator",{default:function(e){o=e}},1),t.link("@babel/runtime/helpers/extends",{default:function(e){i=e}},2),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){l=e}},3),t.export({default:function(){return A}}),t.link("react",{default:function(e){a=e},useMemo:function(e){u=e},useCallback:function(e){s=e}},0),t.link("@rocket.chat/fuselage",{Field:function(e){c=e},Box:function(e){d=e},Skeleton:function(e){f=e},Margins:function(e){m=e},Button:function(e){g=e}},1),t.link("../../../../contexts/TranslationContext",{useTranslation:function(e){p=e}},2),t.link("../../../../hooks/useEndpointAction",{useEndpointAction:function(e){v=e}},3),t.link("../../../../contexts/RouterContext",{useRoute:function(e){k=e}},4),t.link("../../../../contexts/ServerContext",{useMethod:function(e){x=e}},5),t.link("../../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){h=e}},6),t.link("../../../../contexts/ModalContext",{useSetModal:function(e){b=e}},7),t.link("../OutgoiongWebhookForm",{default:function(e){E=e}},8),t.link("../../../../hooks/useForm",{useForm:function(e){y=e}},9),t.link("../../../../components/DeleteSuccessModal",{default:function(e){C=e}},10),t.link("../../../../components/DeleteWarningModal",{default:function(e){w=e}},11),t.link("../../../../hooks/useEndpointData",{useEndpointData:function(e){_=e}},12),t.link("../../../../hooks/useAsyncState",{AsyncStatePhase:function(e){D=e}},13),t.link("../helpers/triggerWords",{triggerWordsToArray:function(e){W=e},triggerWordsToString:function(e){S=e}},14);var M=function(e){var n,t,r,o,i,l,a,u,s,c,d,f,m,g,p,v,k;return{enabled:null===(n=e.enabled)||void 0===n||n,impersonateUser:e.impersonateUser,event:e.event,token:e.token,urls:null!==(t=e.urls.join("\n"))&&void 0!==t?t:"",triggerWords:S(e.triggerWords),targetRoom:null!==(r=e.targetRoom)&&void 0!==r?r:"",channel:null!==(o=e.channel.join(", "))&&void 0!==o?o:"",username:null!==(i=e.username)&&void 0!==i?i:"",name:null!==(l=e.name)&&void 0!==l?l:"",alias:null!==(a=e.alias)&&void 0!==a?a:"",avatarUrl:null!==(u=e.avatarUrl)&&void 0!==u?u:"",emoji:null!==(s=e.emoji)&&void 0!==s?s:"",scriptEnabled:null!==(c=e.scriptEnabled)&&void 0!==c&&c,script:null!==(d=e.script)&&void 0!==d?d:"",retryFailedCalls:null===(f=e.retryFailedCalls)||void 0===f||f,retryCount:null!==(m=e.retryCount)&&void 0!==m?m:5,retryDelay:null!==(g=e.retryDelay)&&void 0!==g?g:"power-of-ten",triggerrWordAnywhere:null!==(p=e.triggerrWordAnywhere)&&void 0!==p&&p,runOnEdits:null===(v=e.runOnEdits)||void 0===v||v}};function I(e){var n=e.data,t=e.onChange,f=e.setSaveAction,_=l(e,["data","onChange","setSaveAction"]),D=p(),S=h(),A=y(M(n)),I=A.handlers,j=A.values,O=A.reset,T=b(),F=x("updateOutgoingIntegration"),R=k("admin-integrations"),P=u((function(){return{type:"webhook-outgoing",integrationId:n._id}}),[n._id]),U=v("POST","integrations.remove",P),G=s((function(){var e=function(){return T()},n=function(){function n(){var n;return o.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.awrap(U());case 2:(n=t.sent).success&&T(a.createElement(C,{children:D("Your_entry_has_been_deleted"),onClose:function(){e(),R.push({})}}));case 4:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return n}();T(a.createElement(w,{children:D("Integration_Delete_Warning"),onDelete:n,onCancel:e}))}),[U,R,T,D]),B=j.urls,H=j.triggerWords,L=s(function(){function e(){return o.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.awrap(F(n._id,r(r({},j),{},{triggerWords:W(H),urls:B.split("\n")})));case 3:S({type:"success",message:D("Integration_updated")}),t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),S({type:"error",message:e.t0});case 10:case"end":return e.stop()}}return e}(),null,null,[[0,7]],Promise)}return e}(),[n._id,S,j,t,F,D,H,B]),N=u((function(){return a.createElement(c,null,a.createElement(c.Row,{display:"flex",flexDirection:"column"},a.createElement(d,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},a.createElement(m,{inlineEnd:"x4"},a.createElement(g,{flexGrow:1,type:"reset",onClick:O},D("Reset")),a.createElement(g,{mie:"none",flexGrow:1,onClick:L},D("Save")))),a.createElement(g,{mbs:"x4",primary:!0,danger:!0,w:"full",onClick:G},D("Delete"))))}),[G,L,O,D]);return a.createElement(E,i({formValues:j,formHandlers:I,append:N},_))}}


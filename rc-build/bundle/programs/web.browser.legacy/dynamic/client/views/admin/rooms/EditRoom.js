function module(e,n,t){var l,o,a,r,c,i,u,m,s,d,f,E,h,p,v,x,b,w,C,R,k,y,g,_,A,D,T,S,N,G,O;t.link("@babel/runtime/regenerator",{default:function(e){l=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){o=e}},1),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){a=e}},2),t.export({EditRoomContextBar:function(){return P}}),t.link("react",{default:function(e){r=e},useState:function(e){c=e},useMemo:function(e){i=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){u=e},Skeleton:function(e){m=e},Button:function(e){s=e},ButtonGroup:function(e){d=e},TextInput:function(e){f=e},Field:function(e){E=e},ToggleSwitch:function(e){h=e},Icon:function(e){p=e},Callout:function(e){v=e},TextAreaInput:function(e){x=e}},1),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){b=e}},2),t.link("../../../components/VerticalBar",{default:function(e){w=e}},3),t.link("../../../components/NotAuthorizedPage",{default:function(e){C=e}},4),t.link("../../../components/avatar/RoomAvatarEditor",{default:function(e){R=e}},5),t.link("../../../components/DeleteChannelWarning",{default:function(e){k=e}},6),t.link("../../../contexts/ModalContext",{useSetModal:function(e){y=e}},7),t.link("../../../contexts/TranslationContext",{useTranslation:function(e){g=e}},8),t.link("../../../hooks/useForm",{useForm:function(e){_=e}},9),t.link("../../../../app/utils/client",{roomTypes:function(e){A=e},RoomSettingsEnum:function(e){D=e}},10),t.link("../../../contexts/ServerContext",{useMethod:function(e){T=e}},11),t.link("../../../contexts/AuthorizationContext",{usePermission:function(e){S=e}},12),t.link("../../../hooks/useEndpointAction",{useEndpointActionExperimental:function(e){N=e}},13),t.link("../../../hooks/useEndpointData",{useEndpointData:function(e){G=e}},14),t.link("../../../hooks/useAsyncState",{AsyncStatePhase:function(e){O=e}},15);var L=function(e){var n,t,l;return{roomName:"d"===e.t?e.usernames.join(" x "):A.getRoomName(e.t,a({type:e.t},e)),roomType:e.t,readOnly:!!e.ro,archived:!!e.archived,isDefault:!!e.default,favorite:!!e.favorite,featured:!!e.featured,roomTopic:null!==(n=e.topic)&&void 0!==n?n:"",roomDescription:null!==(t=e.description)&&void 0!==t?t:"",roomAnnouncement:null!==(l=e.announcement)&&void 0!==l?l:"",roomAvatar:void 0}};function P(e){var n=e.rid,t;return S("view-room-administration")?r.createElement(I,{rid:n}):r.createElement(C,null)}function I(e){var n=e.rid,t=G("rooms.adminRooms.getRoom",i((function(){return{rid:n}}),[n])),l=t.value,o=void 0===l?{}:l,c=t.phase,s=t.error,d=t.reload;return c===O.LOADING?r.createElement(u,{w:"full",pb:"x24"},r.createElement(m,{mbe:"x4"}),r.createElement(m,{mbe:"x8"}),r.createElement(m,{mbe:"x4"}),r.createElement(m,{mbe:"x8"}),r.createElement(m,{mbe:"x4"}),r.createElement(m,{mbe:"x8"})):c===O.REJECTED?s.message:r.createElement(j,{room:a({type:o.t},o),onChange:d})}function j(e){var n,t=e.room,a=e.onChange,m=g(),C=c(!1),G=o(C,2),O=G[0],P=G[1],I=y(),j=_(L(t)),F=j.values,M=j.handlers,B=j.hasUnsavedChanges,z=j.reset,H=i((function(){var e=A.getConfig(t.t).allowRoomSettingChange;return[e(t,D.NAME),e(t,D.TOPIC),e(t,D.ANNOUNCEMENT),e(t,D.ARCHIVE_OR_UNARCHIVE),e(t,D.DESCRIPTION),e(t,D.TYPE),e(t,D.READ_ONLY)]}),[t]),V=o(H,7),U=V[0],J=V[1],Y=V[2],W=V[3],q=V[4],K=V[5],Q=V[6],X=F.roomName,Z=F.roomType,$=F.readOnly,ee=F.archived,ne=F.isDefault,te=F.favorite,le=F.featured,oe=F.roomTopic,ae=F.roomAvatar,re=F.roomDescription,ce=F.roomAnnouncement,ie=M.handleIsDefault,ue=M.handleFavorite,me=M.handleFeatured,se=M.handleRoomName,de=M.handleRoomType,fe=M.handleReadOnly,Ee=M.handleArchived,he=M.handleRoomAvatar,pe=M.handleRoomTopic,ve=M.handleRoomDescription,xe=M.handleRoomAnnouncement,be=ee!==!!t.archived,we=S("delete-"+t.t),Ce=t.archived?"unarchive":"archive",Re=t.archived?"Room_has_been_unarchived":"Room_has_been_archived",ke=N("POST","rooms.saveRoomSettings",m("Room_updated_successfully")),ye=N("POST","rooms.changeArchivationState",m(Re)),ge=b(function(){function e(){var e,n;return l.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:return e=function(){return ke({rid:t._id,roomName:X,roomTopic:oe,roomType:Z,readOnly:$,default:ne,favorite:{defaultValue:ne,favorite:te},featured:le,roomDescription:re,roomAnnouncement:ce,roomAvatar:ae})},n=function(){return ye({rid:t._id,action:Ce})},o.next=4,l.awrap(Promise.all([B&&e(),be&&n()].filter(Boolean)));case 4:a();case 5:case"end":return o.stop()}}return o}(),null,null,null,Promise)}return e}()),_e=b((function(){de("p"===Z?"c":"p")})),Ae=T("eraseRoom"),De=b((function(){var e=function(){return I(void 0)},n=function(){function n(){return l.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.awrap(Ae(t._id));case 2:e(),P(!0);case 4:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return n}();I(r.createElement(k,{onConfirm:n,onCancel:e}))}));return r.createElement(w.ScrollableContent,{is:"form",onSubmit:b((function(e){return e.preventDefault()}))},O&&r.createElement(v,{type:"danger",title:m("Room_has_been_deleted")}),"d"!==t.t&&r.createElement(u,{pbe:"x24",display:"flex",justifyContent:"center"},r.createElement(R,{roomAvatar:ae,room:t,onChangeAvatar:he})),r.createElement(E,null,r.createElement(E.Label,null,m("Name")),r.createElement(E.Row,null,r.createElement(f,{disabled:O||!U,value:X,onChange:se,flexGrow:1}))),"d"!==t.t&&r.createElement(r.Fragment,null,r.createElement(E,null,r.createElement(E.Label,null,m("Owner")),r.createElement(E.Row,null,r.createElement(u,{fontScale:"p1"},null===(n=t.u)||void 0===n?void 0:n.username))),q&&r.createElement(E,null,r.createElement(E.Label,null,m("Description")),r.createElement(E.Row,null,r.createElement(x,{rows:4,disabled:O,value:re,onChange:ve,flexGrow:1}))),Y&&r.createElement(E,null,r.createElement(E.Label,null,m("Announcement")),r.createElement(E.Row,null,r.createElement(x,{rows:4,disabled:O,value:ce,onChange:xe,flexGrow:1}))),J&&r.createElement(E,null,r.createElement(E.Label,null,m("Topic")),r.createElement(E.Row,null,r.createElement(x,{rows:4,disabled:O,value:oe,onChange:pe,flexGrow:1}))),K&&r.createElement(E,null,r.createElement(E.Row,null,r.createElement(E.Label,null,m("Private")),r.createElement(h,{disabled:O,checked:"p"===Z,onChange:_e})),r.createElement(E.Hint,null,m("Just_invited_people_can_access_this_channel"))),Q&&r.createElement(E,null,r.createElement(E.Row,null,r.createElement(u,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},r.createElement(E.Label,null,m("Read_only")),r.createElement(h,{disabled:O,checked:$,onChange:fe}))),r.createElement(E.Hint,null,m("Only_authorized_users_can_write_new_messages"))),W&&r.createElement(E,null,r.createElement(E.Row,null,r.createElement(u,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},r.createElement(E.Label,null,m("Archived")),r.createElement(h,{disabled:O,checked:ee,onChange:Ee}))))),r.createElement(E,null,r.createElement(E.Row,null,r.createElement(u,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},r.createElement(E.Label,null,m("Default")),r.createElement(h,{disabled:O,checked:ne,onChange:ie})))),r.createElement(E,null,r.createElement(E.Row,null,r.createElement(u,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},r.createElement(E.Label,null,m("Favorite")),r.createElement(h,{disabled:O,checked:te,onChange:ue})))),r.createElement(E,null,r.createElement(E.Row,null,r.createElement(u,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},r.createElement(E.Label,null,m("Featured")),r.createElement(h,{disabled:O,checked:le,onChange:me})))),r.createElement(E,null,r.createElement(E.Row,null,r.createElement(u,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},r.createElement(d,{stretch:!0,flexGrow:1},r.createElement(s,{type:"reset",disabled:!B||O,onClick:z},m("Reset")),r.createElement(s,{flexGrow:1,disabled:!B||O,onClick:ge},m("Save")))))),r.createElement(E,null,r.createElement(E.Row,null,r.createElement(s,{primary:!0,flexGrow:1,danger:!0,disabled:O||!we,onClick:De},r.createElement(p,{name:"trash",size:"x16"}),m("Delete")))))}}


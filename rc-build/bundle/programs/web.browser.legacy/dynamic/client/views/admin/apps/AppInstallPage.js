function module(e,n,t){var l,a,r,i,o,u,c,s,p,f,m,d,x,k,E,h,b,v,w,F,g,C,_,y,I;t.link("@babel/runtime/regenerator",{default:function(e){l=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},1),t.link("@rocket.chat/fuselage",{Button:function(e){r=e},ButtonGroup:function(e){i=e},Icon:function(e){o=e},Field:function(e){u=e},FieldGroup:function(e){c=e},TextInput:function(e){s=e},Throbber:function(e){p=e}},0),t.link("react",{default:function(e){f=e},useCallback:function(e){m=e},useEffect:function(e){d=e},useState:function(e){x=e}},1),t.link("../../../components/Page",{default:function(e){k=e}},2),t.link("../../../contexts/RouterContext",{useRoute:function(e){E=e},useQueryStringParameter:function(e){h=e}},3),t.link("../../../contexts/ServerContext",{useEndpoint:function(e){b=e},useUpload:function(e){v=e}},4),t.link("../../../contexts/TranslationContext",{useTranslation:function(e){w=e}},5),t.link("../../../hooks/useFileInput",{useFileInput:function(e){F=e}},6),t.link("../../../hooks/useForm",{useForm:function(e){g=e}},7),t.link("./helpers",{handleInstallError:function(e){C=e}},8),t.link("./AppPermissionsReviewModal",{default:function(e){_=e}},9),t.link("../../../contexts/ModalContext",{useSetModal:function(e){y=e}},10),t.link("./lib/getPermissionsFromZippedApp",{getPermissionsFromZippedApp:function(e){I=e}},11);var P="https://rocket.chat/apps/package.zip";function A(){var e=w(),n=E("admin-apps"),t=y(),A=h("id"),S=h("url"),T=x(!1),z=a(T,2),R=z[0],U=z[1],D=A?"/apps/"+A:"/apps",B=b("POST",D),M=v(D),O=g({file:{},url:S}),G=O.values,L=O.handlers,Z=G.file,H=G.url,J=!!H||!!Z.name,N=L.handleFile,Q=L.handleUrl;d((function(){S&&Q(S)}),[S,Q]);var W=F(N,"app"),j,q=a(W,1)[0],K=function(){function e(e,a){var r,i,o;return l.async(function(){function u(u){for(;;)switch(u.prev=u.next){case 0:return(r=new FormData).append("app",a,a.name),r.append("permissions",JSON.stringify(e)),u.next=5,l.awrap(M(r));case 5:i=u.sent,o=i.app,n.push({context:"details",id:o.id}),t(null);case 9:case"end":return u.stop()}}return u}(),null,null,null,Promise)}return e}(),V=m((function(){U(!1),t(null)}),[U,t]),X=function(){function e(){var e,n,a,r,i;return l.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:if(U(!0),o.prev=1,!H){o.next=14;break}return o.next=5,l.awrap(B({url:H,downloadOnly:!0}));case 5:return a=o.sent,r=a.buff,i=Uint8Array.from(r.data),o.next=10,l.awrap(I(i));case 10:e=o.sent,n=new File([i],"app.zip",{type:"application/zip"}),o.next=18;break;case 14:return n=Z,o.next=17,l.awrap(I(n));case 17:e=o.sent;case 18:if(e&&0!==e.length){o.next=23;break}return o.next=21,l.awrap(K(e,n));case 21:o.next=24;break;case 23:t(f.createElement(_,{appPermissions:e,cancel:V,confirm:function(e){return K(e,n)}}));case 24:o.next=29;break;case 26:o.prev=26,o.t0=o.catch(1),C(o.t0);case 29:return o.prev=29,U(!1),o.finish(29);case 32:case"end":return o.stop()}}return o}(),null,null,[[1,26,29,32]],Promise)}return e}(),Y=function(){n.push()};return f.createElement(k,{flexDirection:"column"},f.createElement(k.Header,{title:e("App_Installation")}),f.createElement(k.ScrollableContent,null,f.createElement(c,{display:"flex",flexDirection:"column",alignSelf:"center",maxWidth:"x600",w:"full"},f.createElement(u,null,f.createElement(u.Label,null,e("App_Url_to_Install_From")),f.createElement(u.Row,null,f.createElement(s,{placeholder:P,value:H,onChange:Q,addon:f.createElement(o,{name:"permalink",size:"x20"})}))),f.createElement(u,null,f.createElement(u.Label,null,e("App_Url_to_Install_From_File")),f.createElement(u.Row,null,f.createElement(s,{value:Z.name||"",addon:f.createElement(r,{small:!0,primary:!0,onClick:q,mb:"neg-x4",mie:"neg-x8"},f.createElement(o,{name:"upload",size:"x12"}),e("Browse_Files"))}))),f.createElement(u,null,f.createElement(i,null,f.createElement(r,{disabled:!J||R,onClick:X},!R&&e("Install"),R&&f.createElement(p,{inheritColor:!0})),f.createElement(r,{onClick:Y},e("Cancel")))))))}t.exportDefault(A)}


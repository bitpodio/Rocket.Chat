function module(e,n,t){var r,l,a,o,u,c,i,s,f,m,d,p,h,E,k,x,b,g,C,v,S,y,_,w,D,M,T,B,F,I,A;function N(e){var n=e._id,t=e.onChange,r=o(e,["_id","onChange"]),l=s((function(){return{query:JSON.stringify({_id:n})}}),[n]),c=I("custom-sounds.list",l),i=c.value,f=c.phase,h=c.error,E=c.reload;if(f===A.LOADING)return u.createElement(m,{pb:"x20"},u.createElement(b,{mbs:"x8"}),u.createElement(C.Skeleton,{w:"full"}),u.createElement(b,{mbs:"x8"}),u.createElement(C.Skeleton,{w:"full"}),u.createElement(p,{stretch:!0,w:"full",mbs:"x8"},u.createElement(d,{disabled:!0},u.createElement(g,{inheritColor:!0})),u.createElement(d,{primary:!0,disabled:!0},u.createElement(g,{inheritColor:!0}))),u.createElement(p,{stretch:!0,w:"full",mbs:"x8"},u.createElement(d,{primary:!0,danger:!0,disabled:!0},u.createElement(g,{inheritColor:!0}))));if(h||!i||i.sounds.length<1)return u.createElement(m,{fontScale:"h1",pb:"x20"},h);var k=function(){t&&t(),E&&E()};return(u.createElement(P,a({data:i.sounds[0],onChange:k},r)))}function P(e){var n=e.close,t=e.onChange,a=e.data,b=o(e,["close","onChange","data"]),g=v(),C=y(),I=M(),A=a||{},N=A._id,P=A.name,R=s((function(){return a||{}}),[a]),q=i((function(){var e;return null!==(e=null==a?void 0:a.name)&&void 0!==e?e:""})),L=l(q,2),O=L[0],W=L[1],G=i((function(){return null!=a?a:{}})),U=l(G,2),j=U[0],z=U[1];f((function(){W(P||""),z(R||"")}),[P,R,N]);var H=S("deleteCustomSound"),J=S("uploadCustomSound"),V=S("insertOrUpdateSound"),K=c((function(e){z(e)}),[]),Q=s((function(){return P!==O||R!==j}),[O,P,R,j]),X=c(function(){function e(e){var n,t,l,a;return r.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:if(n=D(e,O,{previousName:P,previousSound:R,_id:N}),0!==(t=w(n,e)).length){o.next=15;break}return o.prev=3,o.next=6,r.awrap(V(n));case 6:l=o.sent,o.next=12;break;case 9:o.prev=9,o.t0=o.catch(3),C({type:"error",message:o.t0});case 12:n._id=l,n.random=Math.round(1e3*Math.random()),e&&e!==R&&(C({type:"success",message:g("Uploading_file")}),(a=new FileReader).readAsBinaryString(e),a.onloadend=function(){try{return J(a.result,e.type,n),C({type:"success",message:g("File_uploaded")})}catch(t){C({type:"error",message:t})}});case 15:t.forEach((function(e){return C({type:"error",message:g("error-the-field-is-required",{field:g(e)})})}));case 16:case"end":return o.stop()}}return o}(),null,null,[[3,9]],Promise)}return e}(),[N,C,V,O,P,R,g,J]),Y=c(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:X(j),t();case 2:case"end":return e.stop()}}return e}(),null,null,null,Promise)}return e}(),[X,j,t]),Z=c((function(){var e=function(){I(null),n(),t()},l=function(){function n(){return r.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.awrap(H(N));case 3:I((function(){return u.createElement(B,{children:g("Custom_Sound_Has_Been_Deleted"),onClose:e})})),n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),C({type:"error",message:n.t0}),t();case 10:case"end":return n.stop()}}return n}(),null,null,[[0,6]],Promise)}return n}(),a=function(){I(null)};I((function(){return u.createElement(F,{children:g("Custom_Sound_Delete_Warning"),onDelete:l,onCancel:a})}))}),[N,n,H,C,t,I,g]),$=_(K,"audio/mp3"),ee,ne=l($,1)[0];return u.createElement(T.ScrollableContent,b,u.createElement(k,null,u.createElement(k.Label,null,g("Name")),u.createElement(k.Row,null,u.createElement(E,{value:O,onChange:function(e){return W(e.currentTarget.value)},placeholder:g("Name")}))),u.createElement(k,null,u.createElement(k.Label,{alignSelf:"stretch"},g("Sound_File_mp3")),u.createElement(m,{display:"flex",flexDirection:"row",mbs:"none"},u.createElement(h,{inline:"x4"},u.createElement(d,{square:!0,onClick:ne},u.createElement(x,{name:"upload",size:"x20"})),j&&j.name||"none"))),u.createElement(k,null,u.createElement(k.Row,null,u.createElement(p,{stretch:!0,w:"full"},u.createElement(d,{onClick:n},g("Cancel")),u.createElement(d,{primary:!0,onClick:Y,disabled:!Q},g("Save"))))),u.createElement(k,null,u.createElement(k.Row,null,u.createElement(p,{stretch:!0,w:"full"},u.createElement(d,{primary:!0,danger:!0,onClick:Z},u.createElement(x,{name:"trash",mie:"x4"}),g("Delete"))))))}t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},1),t.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},2),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){o=e}},3),t.link("react",{default:function(e){u=e},useCallback:function(e){c=e},useState:function(e){i=e},useMemo:function(e){s=e},useEffect:function(e){f=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){m=e},Button:function(e){d=e},ButtonGroup:function(e){p=e},Margins:function(e){h=e},TextInput:function(e){E=e},Field:function(e){k=e},Icon:function(e){x=e},Skeleton:function(e){b=e},Throbber:function(e){g=e},InputBox:function(e){C=e}},1),t.link("../../../contexts/TranslationContext",{useTranslation:function(e){v=e}},2),t.link("../../../contexts/ServerContext",{useMethod:function(e){S=e}},3),t.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){y=e}},4),t.link("../../../hooks/useFileInput",{useFileInput:function(e){_=e}},5),t.link("./lib",{validate:function(e){w=e},createSoundData:function(e){D=e}},6),t.link("../../../contexts/ModalContext",{useSetModal:function(e){M=e}},7),t.link("../../../components/VerticalBar",{default:function(e){T=e}},8),t.link("../../../components/DeleteSuccessModal",{default:function(e){B=e}},9),t.link("../../../components/DeleteWarningModal",{default:function(e){F=e}},10),t.link("../../../hooks/useEndpointData",{useEndpointData:function(e){I=e}},11),t.link("../../../hooks/useAsyncState",{AsyncStatePhase:function(e){A=e}},12),t.exportDefault(N)}


function module(e,t,n){var a,l,r,s,o,u,i,c,m,f,d,p,h,v,E,b,x,k,g,w,C,S,D,A,R,U,y,G,I,L;function M(e){var t=e.uid,n=e.reload,a=C(),l=I("livechat/users/agent/"+t),r=l.value,s=l.phase,u=l.error,i=I("livechat/agents/"+t+"/departments"),c=i.value,m=i.phase,f=i.error,d=I("livechat/department"),p=d.value,v=d.phase,E=d.error;return[s,v,m].includes(L.LOADING)?o.createElement(A,null):u||f||E||!r||!r.user?o.createElement(h,{mbs:"x16"},a("User_not_found")):o.createElement(_,{uid:t,data:r,userDepartments:c,availableDepartments:p,reset:n})}function _(e){var t=e.data,n=e.userDepartments,A=e.availableDepartments,I=e.uid,L=e.reset,M=s(e,["data","userDepartments","availableDepartments","uid","reset"]),_=C(),T=y("omnichannel-agents"),F=c(),B=r(F,2),P=B[0],z=B[1],N,j=(t||{user:{}}).user,O=j.name,V=j.username,W=j.statusLivechat,q=U(j),H=u((function(){return A&&A.departments?A.departments.map((function(e){var t=e._id,n;return[t,e.name||t]})):[]}),[A]),J=u((function(){return n&&n.departments?n.departments.map((function(e){var t;return e.departmentId})):[]}),[n]),K=k(G),Q=i({values:{},hasUnsavedChanges:!1}),X=x((function(e){var t=e.hasUnsavedChanges,n=s(e,["hasUnsavedChanges"]);Q.current=n,t!==P&&z(t)})),Y=K.useMaxChatsPerAgent,Z=void 0===Y?function(){}:Y,$=R({departments:J,status:W,maxChats:0}),ee=$.values,te=$.handlers,ne=$.hasUnsavedChanges,ae=$.commit,le=Q.current,re=le.reset,se=le.commit,oe=te.handleDepartments,ue=te.handleStatus,ie=ee.departments,ce=ee.status,me=Z(),fe=g("livechat:saveAgentInfo"),de=g("livechat:changeLivechatStatus"),pe=w(),he=x((function(){L(),re()})),ve=x(function(){function e(){return l.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.awrap(fe(I,Q.current.values,ie));case 3:return e.next=5,l.awrap(de({status:ce,agentId:I}));case 5:pe({type:"success",message:_("saved")}),T.push({}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),pe({type:"error",message:e.t0}),console.log(e.t0);case 13:ae(),se();case 15:case"end":return e.stop()}}return e}(),null,null,[[0,9]],Promise)}return e}());return o.createElement(S.ScrollableContent,a({is:"form"},M),o.createElement(h,{alignSelf:"center"},o.createElement(D.Avatar,{margin:"auto",size:"x332",title:V,username:V})),o.createElement(m,null,o.createElement(m.Label,null,_("Name")),o.createElement(m.Row,null,o.createElement(f,{flexGrow:1,value:O,disabled:!0}))),o.createElement(m,null,o.createElement(m.Label,null,_("Username")),o.createElement(m.Row,null,o.createElement(f,{flexGrow:1,value:V,disabled:!0,addon:o.createElement(E,{name:"at",size:"x20"})}))),o.createElement(m,null,o.createElement(m.Label,null,_("Email")),o.createElement(m.Row,null,o.createElement(f,{flexGrow:1,value:q,disabled:!0,addon:o.createElement(E,{name:"mail",size:"x20"})}))),o.createElement(m,null,o.createElement(m.Label,null,_("Departments")),o.createElement(m.Row,null,o.createElement(v,{options:H,value:ie,placeholder:_("Select_an_option"),onChange:oe,flexGrow:1}))),o.createElement(m,null,o.createElement(m.Label,null,_("Status")),o.createElement(m.Row,null,o.createElement(b,{options:[["available",_("Available")],["not-available",_("Not_Available")]],value:ce,placeholder:_("Select_an_option"),onChange:ue,flexGrow:1}))),me&&o.createElement(me,{data:j,onChange:X}),o.createElement(m.Row,null,o.createElement(h,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},o.createElement(p,{inlineEnd:"x4"},o.createElement(d,{flexGrow:1,type:"reset",disabled:!ne&&!P,onClick:he},_("Reset")),o.createElement(d,{mie:"none",flexGrow:1,disabled:!ne&&!P,onClick:ve},_("Save"))))))}n.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},0),n.link("@babel/runtime/regenerator",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},2),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){s=e}},3),n.export({default:function(){return M},AgentEdit:function(){return _}}),n.link("react",{default:function(e){o=e},useMemo:function(e){u=e},useRef:function(e){i=e},useState:function(e){c=e}},0),n.link("@rocket.chat/fuselage",{Field:function(e){m=e},TextInput:function(e){f=e},Button:function(e){d=e},Margins:function(e){p=e},Box:function(e){h=e},MultiSelect:function(e){v=e},Icon:function(e){E=e},Select:function(e){b=e}},1),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){x=e}},2),n.link("use-subscription",{useSubscription:function(e){k=e}},3),n.link("../../../contexts/ServerContext",{useMethod:function(e){g=e}},4),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){w=e}},5),n.link("../../../contexts/TranslationContext",{useTranslation:function(e){C=e}},6),n.link("../../../components/VerticalBar",{default:function(e){S=e}},7),n.link("../../room/contextualBar/UserInfo",{UserInfo:function(e){D=e}},8),n.link("../../../components/Skeleton",{FormSkeleton:function(e){A=e}},9),n.link("../../../hooks/useForm",{useForm:function(e){R=e}},10),n.link("../../../lib/getUserEmailAddress",{getUserEmailAddress:function(e){U=e}},11),n.link("../../../contexts/RouterContext",{useRoute:function(e){y=e}},12),n.link("../additionalForms",{formsSubscription:function(e){G=e}},13),n.link("../../../hooks/useEndpointData",{useEndpointData:function(e){I=e}},14),n.link("../../../hooks/useAsyncState",{AsyncStatePhase:function(e){L=e}},15)}


function module(e,n,t){var i,l,o,a,u,s,c,r,f,d,m,h,k,b,p,v,x,C,g,E,F;t.link("@babel/runtime/regenerator",{default:function(e){i=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){l=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){o=e}},2),t.link("react",{default:function(e){a=e},useCallback:function(e){u=e},useState:function(e){s=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){c=e},Button:function(e){r=e},Icon:function(e){f=e},FieldGroup:function(e){d=e},ButtonGroup:function(e){m=e}},1),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){h=e}},2),t.link("use-subscription",{useSubscription:function(e){k=e}},3),t.link("./CustomFieldsForm",{default:function(e){b=e}},4),t.link("../../../components/Page",{default:function(e){p=e}},5),t.link("../../../contexts/TranslationContext",{useTranslation:function(e){v=e}},6),t.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){x=e}},7),t.link("../../../contexts/ServerContext",{useMethod:function(e){C=e}},8),t.link("../../../contexts/RouterContext",{useRoute:function(e){g=e}},9),t.link("../../../hooks/useForm",{useForm:function(e){E=e}},10),t.link("../additionalForms",{formsSubscription:function(e){F=e}},11);var S={field:"",label:"",scope:"visitor",visibility:!0,regexp:""},y=function(e){var n=e.reload,t=v(),y=x(),w=s({}),T=o(w,2),B=T[0],M=T[1],A,D=k(F).useCustomFieldsAdditionalForm,G,P=(void 0===D?function(){}:D)(),R=g("omnichannel-customfields"),U=u((function(){R.push({})}),[R]),W=E(S),_=W.values,j=W.handlers,z=W.hasUnsavedChanges,H=C("livechat:saveCustomField"),I=B.hasError,N=B.data,q=B.hasUnsavedChanges,J=_.label,K=_.field,L=!I&&J&&K&&(q||z),O=h(function(){function e(){return i.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.awrap(H(void 0,l(l({},_),{},{visibility:_.visibility?"visible":"hidden"},N)));case 3:y({type:"success",message:t("Saved")}),n(),R.push({}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),y({type:"error",message:e.t0});case 11:case"end":return e.stop()}}return e}(),null,null,[[0,8]],Promise)}return e}()),Q=h((function(e){M(l(l({},B),e))}));return a.createElement(p,null,a.createElement(p.Header,{title:t("New_Custom_Field")},a.createElement(m,null,a.createElement(r,{onClick:U},a.createElement(f,{size:"x16",name:"back"}),t("Back")),a.createElement(r,{primary:!0,onClick:O,disabled:!L},t("Save")))),a.createElement(p.ScrollableContentWithShadow,null,a.createElement(c,{maxWidth:"x600",w:"full",alignSelf:"center"},a.createElement(d,null,a.createElement(b,{values:_,handlers:j}),P&&a.createElement(P,{onChange:Q,state:_})))))};t.exportDefault(y)}


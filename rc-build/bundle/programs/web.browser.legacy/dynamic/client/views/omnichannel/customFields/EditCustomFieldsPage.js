function module(e,t,n){var i,l,a,o,u,s,c,r,d,f,m,h,k,p,b,v,E,C,x,g,F,S,y,_,w,A;n.link("@babel/runtime/regenerator",{default:function(e){i=e}},0),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},2),n.link("react",{default:function(e){o=e},useCallback:function(e){u=e},useState:function(e){s=e}},0),n.link("@rocket.chat/fuselage",{Box:function(e){c=e},Button:function(e){r=e},Icon:function(e){d=e},ButtonGroup:function(e){f=e},Callout:function(e){m=e},FieldGroup:function(e){h=e}},1),n.link("use-subscription",{useSubscription:function(e){k=e}},2),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){p=e}},3),n.link("./CustomFieldsForm",{default:function(e){b=e}},4),n.link("../../../components/Page",{default:function(e){v=e}},5),n.link("../../../components/PageSkeleton",{default:function(e){E=e}},6),n.link("../../../contexts/TranslationContext",{useTranslation:function(e){C=e}},7),n.link("../../../contexts/RouterContext",{useRouteParameter:function(e){x=e},useRoute:function(e){g=e}},8),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){F=e}},9),n.link("../../../contexts/ServerContext",{useMethod:function(e){S=e}},10),n.link("../additionalForms",{formsSubscription:function(e){y=e}},11),n.link("../../../hooks/useForm",{useForm:function(e){_=e}},12),n.link("../../../hooks/useEndpointData",{useEndpointData:function(e){w=e}},13),n.link("../../../hooks/useAsyncState",{AsyncStatePhase:function(e){A=e}},14);var D=function(e){return{id:e._id,field:e._id,label:e.label,scope:e.scope,visibility:"visible"===e.visibility,regexp:e.regexp}},P=function(e){var t=e.reload,n=C(),i=x("id"),l=w("livechat/custom-fields/"+i),a=l.value,u=l.phase,s=l.error;return u===A.LOADING?o.createElement(E,null):a&&a.success&&a.customField&&!s?o.createElement(T,{customField:a.customField,id:i,reload:t}):o.createElement(v,null,o.createElement(v.Header,{title:n("Edit_Custom_Field")}),o.createElement(v.ScrollableContentWithShadow,null,o.createElement(m,{type:"danger"},n("Error"))))},T=function(e){var t=e.customField,n=e.id,m=e.reload,E=C(),x=F(),w=s({}),A=a(w,2),P=A[0],T=A[1],B,M=k(y).useCustomFieldsAdditionalForm,G,R=(void 0===M?function(){}:M)(),W=g("omnichannel-customfields"),H=u((function(){W.push({})}),[W]),I=_(D(t)),U=I.values,j=I.handlers,z=I.hasUnsavedChanges,L=S("livechat:saveCustomField"),N=P.hasError,O=P.data,q=P.hasUnsavedChanges,J=U.label,K=U.field,Q=!N&&J&&K&&(q||z),V=p(function(){function e(){return i.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.awrap(L(n,l(l(l({},O),U),{},{visibility:U.visibility?"visible":"hidden"})));case 3:x({type:"success",message:E("Saved")}),m(),W.push({}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),x({type:"error",message:e.t0});case 11:case"end":return e.stop()}}return e}(),null,null,[[0,8]],Promise)}return e}()),X=p((function(e){T(l(l({},P),e))}));return o.createElement(v,null,o.createElement(v.Header,{title:E("Edit_Custom_Field")},o.createElement(f,{align:"end"},o.createElement(r,{onClick:H},o.createElement(d,{size:"x16",name:"back"}),E("Back")),o.createElement(r,{primary:!0,onClick:V,disabled:!Q},E("Save")))),o.createElement(v.ScrollableContentWithShadow,null,o.createElement(c,{maxWidth:"x600",w:"full",alignSelf:"center"},o.createElement(h,null,o.createElement(b,{values:U,handlers:j}),R&&o.createElement(R,{onChange:X,state:U,data:t})))))};n.exportDefault(P)}


function module(e,t,n){var a,r,c,i,o,l,u,s,f,m,d,E,p,v,x,k,h,g,C,T,y,b,w,A,P,D,R,S,_,M;function H(e){var t=e._id,n=e.reload,a=h("DELETE","livechat/users/agent/"+t),r=S(),i=_(),o=k(),s=l(function(){function e(){var e;return c.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.awrap(a());case 2:!0===(e=t.sent).success&&n();case 4:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return e}()),f=l((function(e){e.stopPropagation();var t=function(){function e(){return c.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.awrap(s());case 3:i({type:"success",message:o("Agent_removed")}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i({type:"error",message:e.t0});case 9:r();case 10:case"end":return e.stop()}}return e}(),null,null,[[0,6]],Promise)}return e}();r(u.createElement(R,{onDelete:t,onCancel:function(){return r()}}))}));return u.createElement(E.Cell,{fontScale:"p1",color:"hint",withTruncatedText:!0},u.createElement(v,{small:!0,ghost:!0,title:o("Remove"),onClick:f},u.createElement(p,{name:"trash",size:"x16"})))}function I(e){var t=e.reload,n=k(),a=A("id"),r=P("omnichannel-agents"),i=h("DELETE","livechat/users/agent/"+a),o=S(),s=_(),f=l(function(){function e(){var e;return c.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.awrap(i());case 2:!0===(e=n.sent).success&&(r.push({}),t());case 4:case"end":return n.stop()}}return n}(),null,null,null,Promise)}return e}()),m=l((function(e){e.stopPropagation();var t=function(){function e(){return c.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.awrap(f());case 3:s({type:"success",message:n("Agent_removed")}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s({type:"error",message:e.t0});case 9:o();case 10:case"end":return e.stop()}}return e}(),null,null,[[0,6]],Promise)}return e}();o(u.createElement(R,{onDelete:t,onCancel:function(){return o()}}))})),d=l((function(){return r.push({context:"edit",id:a})}));return[u.createElement(b.Action,{key:n("Remove"),title:n("Remove"),label:n("Remove"),onClick:m,icon:"trash"}),u.createElement(b.Action,{key:n("Edit"),title:n("Edit"),label:n("Edit"),onClick:d,icon:"edit"})]}n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){a=e}},0),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},1),n.link("@babel/runtime/regenerator",{default:function(e){c=e}},2),n.export({RemoveAgentButton:function(){return H},AgentInfoActions:function(){return I}}),n.link("@rocket.chat/fuselage-hooks",{useDebouncedValue:function(e){i=e},useMediaQuery:function(e){o=e},useMutableCallback:function(e){l=e}},0),n.link("react",{default:function(e){u=e},useMemo:function(e){s=e},useCallback:function(e){f=e},useState:function(e){m=e}},1),n.link("@rocket.chat/fuselage",{Box:function(e){d=e},Table:function(e){E=e},Icon:function(e){p=e},Button:function(e){v=e}},2),n.link("../../../components/GenericTable",{default:function(e){x=e}},3),n.link("../../../contexts/TranslationContext",{useTranslation:function(e){k=e}},4),n.link("../../../hooks/useEndpointAction",{useEndpointAction:function(e){h=e}},5),n.link("../../../contexts/AuthorizationContext",{usePermission:function(e){g=e}},6),n.link("../../../components/NotAuthorizedPage",{default:function(e){C=e}},7),n.link("./AgentsPage",{default:function(e){T=e}},8),n.link("./AgentEdit",{default:function(e){y=e}},9),n.link("./AgentInfo",{default:function(e){b=e}},10),n.link("../../../components/avatar/UserAvatar",{default:function(e){w=e}},11),n.link("../../../contexts/RouterContext",{useRouteParameter:function(e){A=e},useRoute:function(e){P=e}},12),n.link("../../../components/VerticalBar",{default:function(e){D=e}},13),n.link("../../../components/DeleteWarningModal",{default:function(e){R=e}},14),n.link("../../../contexts/ModalContext",{useSetModal:function(e){S=e}},15),n.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){_=e}},16),n.link("../../../hooks/useEndpointData",{useEndpointData:function(e){M=e}},17);var B=function(e){return"asc"===e?1:-1},N=function(e,t){var n=e.text,c=e.itemsPerPage,i=e.current,o=r(t,2),l=o[0],u=o[1];return s((function(){var e;return a(a({fields:JSON.stringify({name:1,username:1,emails:1,avatarETag:1}),text:n,sort:JSON.stringify((e={},e[l]=B(u),e.usernames="name"===l?B(u):void 0,e))},c&&{count:c}),i&&{offset:i})}),[n,c,i,l,u])};function z(){var e=k(),t=g("manage-livechat-agents"),n=m({text:"",current:0,itemsPerPage:25}),a=r(n,2),c=a[0],p=a[1],v=m(["name","asc"]),h=r(v,2),R=h[0],S=h[1],_=o("(min-width: 1024px)"),B=i(c,500),z=i(R,500),L=N(B,z),U=P("omnichannel-agents"),J=A("context"),O=A("id"),Q=l((function(e){var t=r(R,2),n=t[0],a=t[1];S(n!==e?[e,"asc"]:[e,"asc"===a?"desc":"asc"])})),V=l((function(e){return function(){return U.push({context:"info",id:e})}})),j=M("livechat/users/agent",L),q=j.value,G=j.reload,W=s((function(){return[u.createElement(x.HeaderCell,{key:"name",direction:R[1],active:"name"===R[0],onClick:Q,sort:"name"},e("Name")),_&&u.createElement(x.HeaderCell,{key:"username",direction:R[1],active:"username"===R[0],onClick:Q,sort:"username"},e("Username")),u.createElement(x.HeaderCell,{key:"email",direction:R[1],active:"emails.address"===R[0],onClick:Q,sort:"emails.address"},e("Email")),u.createElement(x.HeaderCell,{key:"status",direction:R[1],active:"status"===R[0],onClick:Q,sort:"status"},e("Livechat_status")),u.createElement(x.HeaderCell,{key:"remove",w:"x60"},e("Remove"))].filter(Boolean)}),[R,Q,e,_]),F=f((function(t){var n=t.emails,a=t._id,r=t.username,c=t.name,i=t.avatarETag,o=t.statusLivechat;return(u.createElement(E.Row,{key:a,tabIndex:0,role:"link",onClick:V(a),action:!0,"qa-user-id":a},u.createElement(E.Cell,{withTruncatedText:!0},u.createElement(d,{display:"flex",alignItems:"center"},u.createElement(w,{size:_?"x28":"x40",title:r,username:r,etag:i}),u.createElement(d,{display:"flex",withTruncatedText:!0,mi:"x8"},u.createElement(d,{display:"flex",flexDirection:"column",alignSelf:"center",withTruncatedText:!0},u.createElement(d,{fontScale:"p2",withTruncatedText:!0,color:"default"},c||r),!_&&c&&u.createElement(d,{fontScale:"p1",color:"hint",withTruncatedText:!0}," ","@"+r," "))))),_&&u.createElement(E.Cell,null,u.createElement(d,{fontScale:"p2",withTruncatedText:!0,color:"hint"},r)," ",u.createElement(d,{mi:"x4"})),u.createElement(E.Cell,{withTruncatedText:!0},n&&n.length&&n[0].address),u.createElement(E.Cell,{withTruncatedText:!0},e("available"===o?"Available":"Not_Available")),u.createElement(H,{_id:a,reload:G})))}),[_,G,V,e]),K=f((function(){if(!J)return"";var t=function(){U.push({})};return(u.createElement(D,null,u.createElement(D.Header,null,"edit"===J&&e("Edit_User"),"info"===J&&e("User_Info"),u.createElement(D.Close,{onClick:t})),"edit"===J&&u.createElement(y,{uid:O,reload:G}),"info"===J&&u.createElement(b,{uid:O},u.createElement(I,{id:O,reload:G}))))}),[e,J,O,U,G]);return t?u.createElement(T,{setParams:p,params:c,onHeaderClick:Q,data:q,useQuery:N,reload:G,header:W,renderRow:F,title:e("Agents")},u.createElement(K,null)):u.createElement(C,null)}n.exportDefault(z)}


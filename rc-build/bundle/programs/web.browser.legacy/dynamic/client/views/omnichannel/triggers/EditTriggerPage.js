function module(e,n,t){var a,r,l,o,s,i,u,c,m,f,d,p,g,k,h,v,b,x,E,C;t.link("@babel/runtime/regenerator",{default:function(e){a=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},1),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){l=e}},2),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){o=e}},3),t.link("react",{default:function(e){s=e}},0),t.link("@rocket.chat/fuselage",{Margins:function(e){i=e},Callout:function(e){u=e},FieldGroup:function(e){c=e},Box:function(e){m=e},Button:function(e){f=e}},1),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){d=e}},2),t.link("./TriggersForm",{default:function(e){p=e}},3),t.link("../../../components/PageSkeleton",{default:function(e){g=e}},4),t.link("../../../contexts/TranslationContext",{useTranslation:function(e){k=e}},5),t.link("../../../contexts/ServerContext",{useMethod:function(e){h=e}},6),t.link("../../../hooks/useForm",{useForm:function(e){v=e}},7),t.link("../../../contexts/RouterContext",{useRoute:function(e){b=e}},8),t.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){x=e}},9),t.link("../../../hooks/useEndpointData",{useEndpointData:function(e){E=e}},10),t.link("../../../hooks/useAsyncState",{AsyncStatePhase:function(e){C=e}},11);var S=function(e){var n=e.id,t=e.onSave,a=k(),r=E("livechat/triggers/"+n),l=r.value,o=r.phase;return o===C.LOADING?s.createElement(g,null):o!==C.REJECTED&&null!=l&&l.trigger?s.createElement(T,{data:l.trigger,onSave:t}):s.createElement(u,null,a("Error"),": error")},y=function(e){var n=e.name,t=e.description,a=e.enabled,r=e.runOnce,l,s=o(e.conditions,1)[0],i=s.name,u=s.value,c,m=o(e.actions,1)[0],f=m.action,d=m.params,p=d.sender,g=d.msg,k=d.name;return{name:null!=n?n:"",description:null!=t?t:"",enabled:!!a,runOnce:!!r,conditions:{name:null!=i?i:"page-url",value:null!=u?u:""},actions:{name:null!=f?f:"",params:{sender:null!=p?p:"queue",msg:null!=g?g:"",name:null!=k?k:""}}}},T=function(e){var n=e.data,t=e.onSave,o=x(),u=k(),g=b("omnichannel-triggers"),E=h("livechat:saveTrigger"),C=v(y(n)),S=C.values,T=C.handlers,D=C.hasUnsavedChanges,w=d(function(){function e(){var e,s,i,c,m;return a.async(function(){function f(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,e=S.actions.params,s=e.sender,i=e.msg,c=e.name,m=l(S,["actions"]),f.next=4,a.awrap(E(r(r({_id:n._id},m),{},{conditions:[S.conditions],actions:[{name:"send-message",params:r({sender:s,msg:i},"custom"===s&&{name:c})}]})));case 4:o({type:"success",message:u("Saved")}),t(),g.push({}),f.next=12;break;case 9:f.prev=9,f.t0=f.catch(0),o({type:"error",message:f.t0});case 12:case"end":return f.stop()}}return f}(),null,null,[[0,9]],Promise)}return e}()),F,M=S.name&&D;return s.createElement(s.Fragment,null,s.createElement(c,null,s.createElement(p,{values:S,handlers:T})),s.createElement(m,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},s.createElement(i,{inlineEnd:"x4"},s.createElement(f,{flexGrow:1,primary:!0,onClick:w,disabled:!M},u("Save")))))};t.exportDefault(S)}


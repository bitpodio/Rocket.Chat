function module(e,n,r){var t,i,s;r.export({useStreamUpdatesForMessageList:function(){return o}}),r.link("react",{useEffect:function(e){t=e}},0),r.link("../../contexts/ServerContext",{useStream:function(e){i=e}},1),r.link("../../lib/minimongo",{createFilterFromQuery:function(e){s=e}},2);var u=function(e){var n={ts:e.ts};return e.excludePinned&&(n.pinned={$ne:!0}),e.ignoreDiscussion&&(n.drid={$exists:!1}),e.users&&e.users.length&&(n["u.username"]={$in:e.users}),s(n)},o=function(e,n,r){var s=i("room-messages"),o=i("notify-room");t((function(){if(n&&r){var t=s(r,(function(n){e.handle(n)})),i=o(r+"/deleteMessage",(function(n){var r=n._id;e.remove(r)})),a=o(r+"/deleteMessageBulk",(function(n){var r=u(n);e.prune(r)}));return function(){t(),i(),a()}}e.clear()}),[s,o,n,r,e])}}


function module(n,r,t){var u,e,o,i,c,f,a,s,l,v;t.link("@babel/runtime/helpers/slicedToArray",{default:function(n){u=n}},0),t.link("@babel/runtime/helpers/createForOfIteratorHelperLoose",{default:function(n){e=n}},1),t.link("@babel/runtime/helpers/typeof",{default:function(n){o=n}},2),t.export({compileDocumentSelector:function(){return U}}),t.link("./comparisons",{equals:function(n){i=n},flatSome:function(n){c=n},isObject:function(n){f=n},some:function(n){a=n}},0),t.link("./lookups",{createLookupFunction:function(n){s=n}},1),t.link("./bson",{compareBSONValues:function(n){l=n},getBSONType:function(n){v=n}},2);var $=function(n){return n.every((function(n){return["number","string","symbol"].includes(o(n))}))},p=function(n,r){var t=null;if($(n)){t={};for(var u=e(n),o;!(o=u()).done;){var c=o.value;t[c]=c}}return function(r){return a(r,(function(r){return"string"==typeof r&&null!==t?!!t[r]:n.some((function(n){return i(n,r)}))}))}},y=function(n,r){var t=p(n,void 0);return function(n){return void 0===n||!t(n)}},m,d,g,b,A,h,k,x,O,S,w,E,R,j=function(n,r){return function(n){return!0}},F,N,B,I={$in:p,$nin:y,$all:function(n,r){return function(r){return!!Array.isArray(r)&&n.every((function(n){return r.some((function(r){return i(n,r)}))}))}},$lt:function(n,r){return function(r){return c(r,(function(r){return l(r,n)<0}))}},$lte:function(n,r){return function(r){return c(r,(function(r){return l(r,n)<=0}))}},$gt:function(n,r){return function(r){return c(r,(function(r){return l(r,n)>0}))}},$gte:function(n,r){return function(r){return c(r,(function(r){return l(r,n)>=0}))}},$ne:function(n,r){return function(r){return!a(r,(function(r){return i(r,n)}))}},$exists:function(n,r){return function(r){return n===(void 0!==r)}},$mod:function(n,r){var t=u(n,2),e=t[0],o=t[1];return function(n){return c(n,(function(n){return Number(n)%e===o}))}},$size:function(n,r){return function(r){return Array.isArray(r)&&n===r.length}},$type:function(n,r){return function(r){return void 0!==r&&c(r,(function(r){return v(r)===n}))}},$regex:function(n,r){var t;if(void 0!==r){var u=n instanceof RegExp?n.source:n;t=new RegExp(u,r)}else n instanceof RegExp||(t=new RegExp(n));return function(n){return void 0!==n&&c(n,(function(n){return t.test(String(n))}))}},$elemMatch:function(n,r){var t=U(n);return function(n){return!!Array.isArray(n)&&n.some((function(n){return t(n)}))}},$not:function(n,r){var t=Q(n);return function(n){return!t(n)}},$options:j,$near:j,$geoIntersects:j},L=function(n){var r=n.map(U);return function(n){return r.every((function(r){return r(n)}))}},T=function(n){var r=n.map(U);return function(n){return r.some((function(r){return r(n)}))}},q=function(n){var r=n.map(U);return function(n){return r.every((function(r){return!r(n)}))}},z=function(n){var r=n instanceof Function?n:Function("return "+n);return function(n){return!!r.call(n)}},D={$and:L,$or:T,$nor:q,$where:z},H=function(n){return n in I},M=function(n){return n in D},V=function(n){return Object.keys(n).every((function(n){return"$"===n.slice(0,1)}))},C=function(){return function(n){return c(n,(function(n){return null==n}))}},G=function(n){return function(r){return c(r,(function(r){return r===n}))}},J=function(n){return function(r){return void 0!==r&&c(r,(function(r){return n.test(String(r))}))}},K=function(n){return function(r){return!!Array.isArray(r)&&a(r,(function(r){return i(n,r)}))}},P=function(n){for(var r=[],t=0,u=Object.keys(n);t<u.length;t++){var e=u[t];if(H(e)){var o=n[e],i=I[e];r.push(i(o,n.$options))}}return function(n){return r.every((function(r){return r(n)}))}},Q=function(n){return null==n?C():f(n)?n instanceof RegExp?J(n):Array.isArray(n)?K(n):V(n)?P(n):function(r){return c(r,(function(r){return i(n,r)}))}:G(n)},U=function(n){var r=Object.entries(n).map((function(n){var r=u(n,2),t=r[0],e=r[1];if(void 0===e)return function(){return!0};if(M(t))switch(t){case"$and":return L(e);case"$or":return T(e);case"$nor":return q(e);case"$where":return z(e)}var o=s(t),i=Q(e);return function(n){var r;return o(n).some(i)}}));return function(n){return r.every((function(r){return r(n)}))}}}


function module(e,n,t){var a,r,l,c,o,i,s,u,d,m,f,p,h,E,b,y,_,C,x,g,k,v,w,D,T,O,B;t.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){a=e}},0),t.link("@babel/runtime/regenerator",{default:function(e){r=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},2),t.export({CreateChannel:function(){return P}}),t.link("meteor/kadira:flow-router",{FlowRouter:function(e){c=e}},0),t.link("react",{default:function(e){o=e},memo:function(e){i=e},useCallback:function(e){s=e},useEffect:function(e){u=e},useMemo:function(e){d=e},useState:function(e){m=e}},1),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){f=e},useDebouncedCallback:function(e){p=e}},2),t.link("@rocket.chat/fuselage",{Box:function(e){h=e},Modal:function(e){E=e},ButtonGroup:function(e){b=e},Button:function(e){y=e},TextInput:function(e){_=e},Icon:function(e){C=e},Field:function(e){x=e},ToggleSwitch:function(e){g=e}},3),t.link("../../contexts/TranslationContext",{useTranslation:function(e){k=e}},4),t.link("../../hooks/useForm",{useForm:function(e){v=e}},5),t.link("../../hooks/useEndpointAction",{useEndpointActionExperimental:function(e){w=e}},6),t.link("../../../ee/client/audit/UserAutoCompleteMultiple",{default:function(e){D=e}},7),t.link("../../contexts/SettingsContext",{useSetting:function(e){T=e}},8),t.link("../../contexts/AuthorizationContext",{usePermission:function(e){O=e}},9),t.link("../../contexts/ServerContext",{useMethod:function(e){B=e}},10);var P=function(e){var n=e.values,t=e.handlers,a=e.hasUnsavedChanges,c=e.onChangeUsers,i=e.onChangeType,s=e.onChangeBroadcast,f=e.canOnlyCreateOneType,v=e.e2eEnabledForPrivateByDefault,w=e.onCreate,O=e.onClose,P=k(),A=T("E2E_Enable"),F=T("UTF8_Names_Validation"),R=T("UI_Allow_room_names_with_special_chars"),S=B("roomNameExists"),U=d((function(){return R?"":new RegExp("^"+F+"$");var e}),[R,F]),I=m(),L=l(I,2),N=L[0],M=L[1],j=p(function(){function e(e){var n;return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:if(M(!1),!a){t.next=3;break}return t.abrupt("return");case 3:if(e&&0!==e.length){t.next=5;break}return t.abrupt("return",M(P("Field_required")));case 5:if(U.test(e)){t.next=7;break}return t.abrupt("return",M(P("error-invalid-name")));case 7:return t.next=9,r.awrap(S(e));case 9:if(!(n=t.sent)){t.next=12;break}return t.abrupt("return",M(P("Channel_already_exist",e)));case 12:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return e}(),100,[name]);u((function(){j(n.name)}),[j,n.name]);var z=d((function(){return!n.type||n.broadcast||!A||v}),[A,v,n.broadcast,n.type]),q=d((function(){return a&&!N}),[a,N]);return o.createElement(E,null,o.createElement(E.Header,null,o.createElement(E.Title,null,P("Create_channel")),o.createElement(E.Close,{onClick:O})),o.createElement(E.Content,null,o.createElement(x,{mbe:"x24"},o.createElement(x.Label,null,P("Name")),o.createElement(x.Row,null,o.createElement(_,{error:a?N:void 0,addon:o.createElement(C,{name:n.type?"lock":"hash",size:"x20"}),placeholder:P("Channel_name"),onChange:t.handleName})),a&&N&&o.createElement(x.Error,null,N)),o.createElement(x,{mbe:"x24"},o.createElement(x.Label,null,P("Topic")," ",o.createElement(h,{is:"span",color:"neutral-600"},"(",P("optional"),")")),o.createElement(x.Row,null,o.createElement(_,{placeholder:P("Channel_what_is_this_channel_about"),onChange:t.handleDescription}))),o.createElement(x,{mbe:"x24"},o.createElement(h,{display:"flex",justifyContent:"space-between",alignItems:"start"},o.createElement(h,{display:"flex",flexDirection:"column"},o.createElement(x.Label,null,P("Private")),o.createElement(x.Description,null,n.type?P("Only_invited_users_can_acess_this_channel"):P("Everyone_can_access_this_channel"))),o.createElement(g,{checked:n.type,disabled:!!f,onChange:i}))),o.createElement(x,{mbe:"x24",disabled:n.broadcast},o.createElement(h,{display:"flex",justifyContent:"space-between",alignItems:"start"},o.createElement(h,{display:"flex",flexDirection:"column"},o.createElement(x.Label,null,P("Read_only")),o.createElement(x.Description,null,P("All_users_in_the_channel_can_write_new_messages"))),o.createElement(g,{checked:n.readOnly,disabled:n.broadcast,onChange:t.handleReadOnly}))),o.createElement(x,{disabled:z,mbe:"x24"},o.createElement(h,{display:"flex",justifyContent:"space-between",alignItems:"start"},o.createElement(h,{display:"flex",flexDirection:"column"},o.createElement(x.Label,null,P("Encrypted")),o.createElement(x.Description,null,n.type?P("Encrypted_channel_Description"):P("Encrypted_not_available"))),o.createElement(g,{checked:n.encrypted,disabled:z,onChange:t.handleEncrypted}))),o.createElement(x,{mbe:"x24"},o.createElement(h,{display:"flex",justifyContent:"space-between",alignItems:"start"},o.createElement(h,{display:"flex",flexDirection:"column"},o.createElement(x.Label,null,P("Broadcast")),o.createElement(x.Description,null,P("Broadcast_channel_Description"))),o.createElement(g,{checked:n.broadcast,onChange:s}))),o.createElement(x,{mbe:"x24"},o.createElement(x.Label,null,P("Add_members")+" ("+P("optional")+")"),o.createElement(D,{value:n.users,onChange:c}))),o.createElement(E.Footer,null,o.createElement(b,{align:"end"},o.createElement(y,{onClick:O},P("Cancel")),o.createElement(y,{disabled:!q,onClick:w,primary:!0},P("Create")))))};t.exportDefault(i((function(e){var n=e.onClose,t=w("POST","channels.create"),l=w("POST","groups.create"),i=w("POST","channels.setDescription"),u=w("POST","groups.setDescription"),m=O("create-c"),p=O("create-p"),h=T("E2E_Enabled_Default_PrivateRooms"),E=d((function(){return!m&&p?"p":!(!m||p)&&"c"}),[m,p]),b,y=v({users:[],name:"",description:"",type:!E||"p"===E,readOnly:!1,encrypted:null!=h&&h,broadcast:!1}),_=y.values,C=y.handlers,x=y.hasUnsavedChanges,g=_.users,k=_.name,D=_.description,B=_.type,A=_.readOnly,F=_.broadcast,R=_.encrypted,S=C.handleUsers,U=C.handleEncrypted,I=C.handleType,L=C.handleBroadcast,N=C.handleReadOnly,M=f((function(e,n){if(!n){if(g.includes(e))return;return S([].concat(a(g),[e]))}S(g.filter((function(n){return n!==e})))})),j=f((function(e){return U(!e),I(e)})),z=f((function(e){return U(!e),N(e),L(e)})),q=s(function(){function e(){var e,a,o;return r.async(function(){function s(s){for(;;)switch(s.prev=s.next){case 0:if(e=function(e){c.goToRoomById(e)},a={name:k,members:g,readOnly:A,extraData:{broadcast:F,encrypted:R}},!B){s.next=9;break}return s.next=5,r.awrap(l(a));case 5:o=s.sent,e(o.group._id),s.next=13;break;case 9:return s.next=11,r.awrap(t(a));case 11:o=s.sent,e(o.channel._id);case 13:o.success&&o.group&&D?u({description:D,roomName:o.group.name}):o.success&&o.channel&&D&&i({description:D,roomName:o.channel.name}),n();case 15:case"end":return s.stop()}}return s}(),null,null,null,Promise)}return e}(),[F,t,l,D,R,k,n,A,i,u,B,g]);return o.createElement(P,{values:_,handlers:C,hasUnsavedChanges:x,onChangeUsers:M,onChangeType:j,onChangeBroadcast:z,canOnlyCreateOneType:E,e2eEnabledForPrivateByDefault:h,onClose:n,onCreate:q})})))}


function module(e,t,n){var a,r,o,i,l,c,u,s,f,d,m,h,k,C,v,E,p,b,x,T;n.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},0),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){r=e}},1),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){o=e}},2),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){i=e}},3),n.export({default:function(){return w}}),n.link("react",{default:function(e){l=e},useState:function(e){c=e},useMemo:function(e){u=e},useCallback:function(e){s=e},useEffect:function(e){f=e}},0),n.link("@rocket.chat/fuselage-hooks",{useDebouncedValue:function(e){d=e},useMutableCallback:function(e){m=e}},1),n.link("@rocket.chat/fuselage",{Table:function(e){h=e}},2),n.link("../../contexts/TranslationContext",{useTranslation:function(e){k=e}},3),n.link("../../hooks/useEndpointData",{useEndpointData:function(e){C=e}},4),n.link("../../components/GenericTable",{default:function(e){v=e}},5),n.link("../../components/FilterByText",{default:function(e){E=e}},6),n.link("../../contexts/RouterContext",{useRoute:function(e){p=e}},7),n.link("../../hooks/useFormatDate",{useFormatDate:function(e){b=e}},8),n.link("../../contexts/AuthorizationContext",{usePermission:function(e){x=e}},9),n.link("../../components/NotAuthorizedPage",{NotAuthorizedPage:function(e){T=e}},10);var g=function(e,t){var n=e.text,a=e.itemsPerPage,r=e.current,l=i(t,2),c=l[0],s=l[1];return u((function(){var e;return o(o({term:n,sort:JSON.stringify((e={},e[c]="asc"===s?1:-1,e))},a&&{count:a}),r&&{offset:r})}),[c,r,s,a,n])};function y(e){var t=e.setContactReload,n=c({text:"",current:0,itemsPerPage:25}),o=i(n,2),x=o[0],T=o[1],y=c(["username","asc"]),w=i(y,2),P=w[0],N=w[1],B=k(),D=d(x,500),H=d(P,500),R=g(D,H),A=p("omnichannel-directory"),F=b(),z=m((function(e){var t=i(P,2),n=t[0],a=t[1];if(n===e)return N([e,"asc"===a?"desc":"asc"]);N([e,"asc"])})),S=m((function(){return A.push({tab:"contacts",context:"new"})})),_=m((function(e){return function(){return A.push({tab:"contacts",context:"info",id:e})}})),j=C("livechat/visitors.search",R),M=j.value,q=j.reload;f((function(){t((function(){return q}))}),[q,t]);var G=u((function(){return[l.createElement(v.HeaderCell,{key:"username",direction:P[1],active:"username"===P[0],onClick:z,sort:"username"},B("Username")),l.createElement(v.HeaderCell,{key:"name",direction:P[1],active:"name"===P[0],onClick:z,sort:"name"},B("Name")),l.createElement(v.HeaderCell,{key:"phone",direction:P[1],active:"phone"===P[0],onClick:z,sort:"phone"},B("Phone")),l.createElement(v.HeaderCell,{key:"email",direction:P[1],active:"visitorEmails.address"===P[0],onClick:z,sort:"visitorEmails.address"},B("Email")),l.createElement(v.HeaderCell,{key:"lastchat",direction:P[1],active:"lastchat"===P[0],onClick:z,sort:"visitorEmails.address"},B("Last_Chat"))].filter(Boolean)}),[P,z,B]),I=s((function(e){var t=e._id,n=e.username,a=e.name,r=e.visitorEmails,o=e.phone,i=e.lastChat;return(l.createElement(h.Row,{key:t,tabIndex:0,role:"link",onClick:_(t),action:!0,"qa-user-id":t},l.createElement(h.Cell,{withTruncatedText:!0},n),l.createElement(h.Cell,{withTruncatedText:!0},a),l.createElement(h.Cell,{withTruncatedText:!0},o&&o.length&&o[0].phoneNumber),l.createElement(h.Cell,{withTruncatedText:!0},r&&r.length&&r[0].address),l.createElement(h.Cell,{withTruncatedText:!0},i&&F(i.ts))))}),[F,_]);return l.createElement(v,{header:G,renderRow:I,results:M&&M.visitors,total:M&&M.total,setParams:T,params:x,renderFilter:function(e){var t=e.onChange,n=r(e,["onChange"]);return(l.createElement(E,a({displayButton:!0,textButton:B("New_Contact"),onButtonClick:S,onChange:t},n)))}})}function w(e){var t;return x("view-l-room")?l.createElement(y,e):l.createElement(T,null)}}


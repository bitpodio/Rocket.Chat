function module(e,t,n){var a,r,l,o,i,c,u,s,m,d,f,p,h,v,E,k,g,x,b,w,D,C;function y(e){var t=e.tagId,n=e.reload,a=i((function(){return{tagId:t}}),[t]),r=w("livechat/tags.getOne",a),l=r.value,c=r.phase,u=r.error,s=w("livechat/department"),m=s.value,d=s.phase,p=s.error,h=k();return[c,d].includes(D.LOADING)?o.createElement(C,null):u||p?o.createElement(f,{m:"x16",type:"danger"},h("Not_Available")):o.createElement(T,{tagId:t,data:l,availableDepartments:m,reload:n})}function N(e){var t=e.reload,n=k(),a=w("livechat/department"),r=a.value,l=a.phase,i=a.error;return l===D.LOADING?o.createElement(C,null):i?o.createElement(m,{mbs:"x16"},n("Not_found")):o.createElement(T,{reload:t,isNew:!0,availableDepartments:r})}function T(e){var t=e.data,n=e.tagId,f=e.isNew,w=e.availableDepartments,D=e.reload,C=l(e,["data","tagId","isNew","availableDepartments","reload"]),y=k(),N=b("omnichannel-tags"),T=t||{},_=i((function(){return w&&w.departments?w.departments.map((function(e){var t=e._id,n;return[t,e.name||t]})):[]}),[w]),S=x({name:T.name,description:T.description,departments:T.departments&&""===T.departments[0]?[]:T.departments}),I=S.values,G=S.handlers,M=S.hasUnsavedChanges,R=G.handleName,A=G.handleDescription,L=G.handleDepartments,F=I.name,B=I.description,O=I.departments,P=i((function(){return F&&0!==F.length?void 0:y("The_field_is_required","name")}),[F,y]),W=v("livechat:saveTag"),j=E(),q=h((function(){D()})),U=i((function(){return!P}),[P]),V=h(function(){function e(){var e,t;return r.async(function(){function a(a){for(;;)switch(a.prev=a.next){case 0:if(e={name:F,description:B},U){a.next=3;break}return a.abrupt("return",j({type:"error",message:y("The_field_is_required")}));case 3:return t=O||[""],a.prev=4,a.next=7,r.awrap(W(n,e,t));case 7:j({type:"success",message:y("Saved")}),D(),N.push({}),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(4),j({type:"error",message:a.t0});case 15:case"end":return a.stop()}}return a}(),null,null,[[4,12]],Promise)}return e}());return o.createElement(g.ScrollableContent,a({is:"form"},C),o.createElement(c,null,o.createElement(c.Label,null,y("Name"),"*"),o.createElement(c.Row,null,o.createElement(u,{placeholder:y("Name"),flexGrow:1,value:F,onChange:R,error:M&&P}))),o.createElement(c,null,o.createElement(c.Label,null,y("Description")),o.createElement(c.Row,null,o.createElement(u,{placeholder:y("Description"),flexGrow:1,value:B,onChange:A}))),o.createElement(c,null,o.createElement(c.Label,null,y("Departments")),o.createElement(c.Row,null,o.createElement(d,{options:_,value:O,maxWidth:"100%",placeholder:y("Select_an_option"),onChange:L,flexGrow:1}))),o.createElement(c.Row,null,o.createElement(m,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},o.createElement(p,{inlineEnd:"x4"},!f&&o.createElement(s,{flexGrow:1,type:"reset",disabled:!M,onClick:q},y("Reset")),o.createElement(s,{primary:!0,mie:"none",flexGrow:1,disabled:!M||!U,onClick:V},y("Save"))))))}n.link("@babel/runtime/helpers/extends",{default:function(e){a=e}},0),n.link("@babel/runtime/regenerator",{default:function(e){r=e}},1),n.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){l=e}},2),n.export({TagEditWithData:function(){return y},TagNew:function(){return N},TagEdit:function(){return T}}),n.link("react",{default:function(e){o=e},useMemo:function(e){i=e}},0),n.link("@rocket.chat/fuselage",{Field:function(e){c=e},TextInput:function(e){u=e},Button:function(e){s=e},Box:function(e){m=e},MultiSelect:function(e){d=e},Callout:function(e){f=e},Margins:function(e){p=e}},1),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){h=e}},2),n.link("../../../../client/contexts/ServerContext",{useMethod:function(e){v=e}},3),n.link("../../../../client/contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){E=e}},4),n.link("../../../../client/contexts/TranslationContext",{useTranslation:function(e){k=e}},5),n.link("../../../../client/components/VerticalBar",{default:function(e){g=e}},6),n.link("../../../../client/hooks/useForm",{useForm:function(e){x=e}},7),n.link("../../../../client/contexts/RouterContext",{useRoute:function(e){b=e}},8),n.link("../../../../client/hooks/useEndpointData",{useEndpointData:function(e){w=e}},9),n.link("../../../../client/hooks/useAsyncState",{AsyncStatePhase:function(e){D=e}},10),n.link("../../../../client/components/Skeleton",{FormSkeleton:function(e){C=e}},11)}


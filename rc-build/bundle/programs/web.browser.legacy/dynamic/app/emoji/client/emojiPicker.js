function module(e,t,r){var o,n,i,a,c,s,l,p,u,g;r.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){o=e}},0),r.export({updateRecentEmoji:function(){return v}}),r.link("underscore",{default:function(e){n=e}},0),r.link("meteor/reactive-var",{ReactiveVar:function(e){i=e}},1),r.link("meteor/reactive-dict",{ReactiveDict:function(e){a=e}},2),r.link("meteor/kadira:flow-router",{FlowRouter:function(e){c=e}},3),r.link("meteor/templating",{Template:function(e){s=e}},4),r.link("../../../lib/escapeRegExp",{escapeRegExp:function(e){l=e}},5),r.link("../../theme/client/imports/components/emojiPicker.css"),r.link("../../utils/client",{t:function(e){p=e}},6),r.link("./lib/EmojiPicker",{EmojiPicker:function(e){u=e}},7),r.link("../lib/rocketchat",{emoji:function(e){g=e}},8),r.link("./emojiPicker.html");var m=27,f=new a("emojiList"),k=function(e,t){return t&&'<li class="emoji-'+e+' emoji-picker-item" data-emoji="'+e+'" title="'+e+'">'+t+"</li>"},j=function(e,t){var r;return Object.values(g.packages).map((function(r){if(r.emojisByCategory&&r.emojisByCategory[e])return r.emojisByCategory[e].map((function(e){var o=t>0&&r.toneList.hasOwnProperty(e)?"_tone"+t:"";return k(e,r.renderPicker(":"+e+o+":"))})).join("")})).join("")||"<li>"+p("No_emojis_found")+"</li>"};function v(e){f.set(e,j(e))}var y=function(e){var t=e.categoriesList,r=e.tone;t.forEach((function(e){return f.set(e.key,j(e.key,r))}))};function h(e){var t='<ul class="emoji-list">',r,o=s.instance().tone;u.currentCategory.set("");var n=new RegExp(l(e.replace(/:/g,"")),"i");for(var i in meteorBabelHelpers.sanitizeForInObject(g.list))if(g.list.hasOwnProperty(i)&&n.test(i)){var a=g.list[i],c=a.emojiPackage,p=a.shortnames,m=void 0===p?[]:p,f="";i=i.replace(/:/g,"");var j=void 0!==m[0]?m[0].replace(/:/g,""):m[0];o>0&&g.packages[c].toneList.hasOwnProperty(g)&&(f="_tone"+o);var v=!1;for(var y in meteorBabelHelpers.sanitizeForInObject(g.packages[c].emojisByCategory))if(g.packages[c].emojisByCategory.hasOwnProperty(y)){var h=g.packages[c].emojisByCategory[y],C=void 0!==j?j.replace(/:/g,"").split("_"):j;if(-1!==h.indexOf(i)||void 0!==C&&C.includes(e)){v=!0;break}}if(v){var d=g.packages[c].renderPicker(":"+i+f+":");t+=k(i,d)}}return t+="</ul>"}s.emojiPicker.helpers({emojiCategories:function(){return s.instance().categoriesList},emojiByCategory:function(e){var t=[];for(var r in meteorBabelHelpers.sanitizeForInObject(g.packages))g.packages.hasOwnProperty(r)&&g.packages[r].emojisByCategory.hasOwnProperty(e)&&(t=t.concat(g.packages[r].emojisByCategory[e]));return t},searching:function(){return s.instance().currentSearchTerm.get().length>0},searchResults:function(){return h(s.instance().currentSearchTerm.get())},emojiList:function(e){return f.get(e)},currentTone:function(){return"tone-"+s.instance().tone},activeCategory:function(e){return u.currentCategory.get()===e?"active":""},currentCategory:function(){return u.currentCategory.get()}}),s.emojiPicker.events({"click .emoji-picker":function(e){e.stopPropagation(),e.preventDefault()},"click .add-custom":function(e){e.stopPropagation(),e.preventDefault(),c.go("/admin/emoji-custom"),u.close()},"click .category-link":function(e){return e.stopPropagation(),e.preventDefault(),u.showCategory(e.currentTarget.hash.substr(1)),!1},"scroll .emojis":n.throttle((function(e,t){if(!u.scrollingToCategory){var r,o=t.$(e.currentTarget).scrollTop()+8,n=u.getCategoryPositions().filter((function(e){return e.top<=o})).pop();if(n){var i,a=n.el.id.replace("emoji-list-category-","");u.currentCategory.set(a)}}}),300),"click .change-tone > a":function(e,t){e.stopPropagation(),e.preventDefault(),t.$(".tone-selector").toggleClass("show")},"click .tone-selector .tone":function(e,t){e.stopPropagation(),e.preventDefault();var r=parseInt(e.currentTarget.dataset.tone),o;for(var n in o=r>0?"_tone"+r:"",meteorBabelHelpers.sanitizeForInObject(g.packages))if(g.packages.hasOwnProperty(n)&&g.packages[n].hasOwnProperty("toneList"))for(var i in meteorBabelHelpers.sanitizeForInObject(g.packages[n].toneList))g.packages[n].toneList.hasOwnProperty(i)&&$(".emoji-"+i).html(g.packages[n].render(":"+i+o+":"));u.setTone(r),t.setCurrentTone(r),$(".tone-selector").toggleClass("show")},"click .emoji-list .emoji-picker-item":function(e,t){e.stopPropagation();var r=e.currentTarget.dataset.emoji,o=t.tone,n="";for(var i in meteorBabelHelpers.sanitizeForInObject(g.packages))g.packages.hasOwnProperty(i)&&o>0&&g.packages[i].toneList.hasOwnProperty(r)&&(n="_tone"+o);var a=$(".emoji-picker .js-emojipicker-search");a&&a.val(""),t.currentSearchTerm.set(""),u.pickEmoji(r+n)},"keyup .js-emojipicker-search, change .js-emojipicker-search":function(e,t){if(e.preventDefault(),e.stopPropagation(),27===e.keyCode)return u.close();var r=e.target.value.trim(),o=t.currentSearchTerm;r!==o.get()&&o.set(r)}}),s.emojiPicker.onCreated((function(){var e=this;this.tone=u.getTone();var t=u.getRecent();for(var r in this.currentSearchTerm=new i(""),this.categoriesList=[],meteorBabelHelpers.sanitizeForInObject(g.packages)){var n;if(g.packages.hasOwnProperty(r))if(g.packages[r].emojiCategories)if(void 0!==g.packages[r].categoryIndex)(n=this.categoriesList).splice.apply(n,[g.packages[r].categoryIndex,0].concat(o(g.packages[r].emojiCategories)));else this.categoriesList=this.categoriesList.concat(g.packages[r].emojiCategories)}t.forEach((function(e){g.packages.base.emojisByCategory.recent.push(e)})),this.setCurrentTone=function(t){$(".current-tone").removeClass("tone-"+e.tone),$(".current-tone").addClass("tone-"+t),e.tone=t},y(this)}))}


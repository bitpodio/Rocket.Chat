function module(n,e,t){var r,i,o,a,u;t.link("@babel/runtime/helpers/toConsumableArray",{default:function(n){r=n}},0),t.export({createKatexMessageRendering:function(){return f}}),t.link("meteor/random",{Random:function(n){i=n}},0),t.link("katex",{default:function(n){o=n}},1),t.link("../../../lib/escapeHTML",{escapeHTML:function(n){a=n}},2),t.link("../../../lib/unescapeHTML",{unescapeHTML:function(n){u=n}},3),t.link("katex/dist/katex.min.css"),t.link("./style.css");var s=function(){function n(){}var e=n.prototype;return e.length=function(){function n(){return this.end-this.start}return n}(),e.extract=function(){function n(n){return n.substr(this.start,this.length())}return n}(),n}(),l=function(){function n(n,e){var t=this,r=e.dollarSyntax,o=e.parenthesisSyntax;this.renderLatex=function(n,e){try{return t.katex.renderToString(n,{displayMode:e,macros:{"\\href":"\\@secondoftwo"}})}catch(i){var r=i.message;return'<div class="katex-error katex-'+(e?"block":"inline")+'-error">'+a(r)+"</div>"}},this.renderMessage=function(n){var e;return"string"==typeof n?t.render(n,t.renderLatex):null!==(e=n.html)&&void 0!==e&&e.trim()?(n.tokens||(n.tokens=[]),n.html=t.render(n.html,(function(e,r){var o="=!="+i.id()+"=!=";return n.tokens.push({token:o,text:t.renderLatex(e,r)}),o})),n):n},this.katex=n,this.delimitersMap=[{opener:"\\[",closer:"\\]",displayMode:!0,enabled:function(){return o}},{opener:"\\(",closer:"\\)",displayMode:!1,enabled:function(){return o}},{opener:"$$",closer:"$$",displayMode:!0,enabled:function(){return r}},{opener:"$",closer:"$",displayMode:!1,enabled:function(){return r}}]}var e=n.prototype;return e.findOpeningDelimiter=function(){function n(n,e){var t=this.delimitersMap.filter((function(n){return n.enabled()})).map((function(t){return{options:t,pos:n.indexOf(t.opener,e)}})),i=t.filter((function(n){var e;return n.pos>=0})).map((function(n){var e;return n.pos}));if(0===i.length)return null;var o=Math.min.apply(Math,r(i)),a=t.findIndex((function(n){var e;return n.pos===o})),u;return t[a]}return n}(),e.getLatexBoundaries=function(){function n(n,e){var t=e.options.closer,r=e.pos,i=n.substr(r+t.length).indexOf(t);if(i<0)return null;var o=new s,a=new s;return o.start=r+t.length,o.end=o.start+i,a.start=r,a.end=o.end+t.length,{outer:a,inner:o}}return n}(),e.findLatex=function(){function n(n){for(var e=0,t;null!=(t=this.findOpeningDelimiter(n,e++));){var r=this.getLatexBoundaries(n,t);if(r&&r.inner.extract(n).trim().length)return r.options=t.options,r}return null}return n}(),e.extractLatex=function(){function n(n,e){var t=n.substr(0,e.outer.start),r=n.substr(e.outer.end),i=e.inner.extract(n);return{before:t,latex:i=u(i),after:r}}return n}(),e.render=function(){function n(n,e){for(var t="";null!=this.findLatex(n);){var r=this.findLatex(n),i=this.extractLatex(n,r),o=e(i.latex,r.options.displayMode);t+=i.before+o,n=i.after}return t+=n}return n}(),n}(),f=function(n){var e=new l(o,n);return function(n){return e.renderMessage(n)}}}

